!function(e,t){sumo.define("plugins/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,i){i()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,i=!1,s=!0;t[1]||t[7]?i=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?s=!1:t[4]&&(i=parseInt(t[4])<18);var o={};o.pluginBuilder="./css-builder";var n,a=function(){n=document.createElement("style"),e.appendChild(n)},r=function(e,t){a();var i=n.styleSheet||n.sheet;if(i&&i.addImport)i.addImport(e),n.onload=t;else{n.textContent='@import "'+e+'";';var s=setInterval(function(){try{n.sheet.cssRules,clearInterval(s),t()}catch(e){}},10)}},l=function(t,i){var o=document.createElement("link");if(o.type="text/css",o.rel="stylesheet",s)o.onload=function(){o.onload=function(){},setTimeout(i,7)};else var n=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){if(document.styleSheets[e].href==o.href)return clearInterval(n),i()}},10);o.href=t,e.appendChild(o)};return o.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},o.load=function(e,t,s,o){(i?r:l)(t.toUrl(e+".css"),s)},o}),sumo.define("babel",{}),sumo.define("es6",["babel","module"],function(e,t){"use strict";var i,s={};return"undefined"!=typeof window&&window.navigator&&window.document?i=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(e){4===i.readyState&&t(i.responseText)},i.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node&&(fs=require.nodeRequire("fs"),i=function(e,t){t(fs.readFileSync(e,"utf8"))}),{version:"0.1.6",load:function(t,o,n,a){var r=a.babel||{},l=a.es6||{},c=l.fileExtension||".es6",u=o.toUrl(t+c),m={sourceMaps:!a.isBuild&&"inline",sourceFileName:t};for(var h in m)r[h]=m[h];i(u,function(i){try{var o=e.transform(i,r).code}catch(e){n.error(e)}a.isBuild&&(s[t]=o),n.fromText(o)})},write:function(e,t,i){t in s&&i.asModule(e+"!"+t,s[t])}}}),sumo.define("es6!launcher/util/constants",[],function(){var e={service:{title:"Service",feature:"services"}},t="shortcuts-free-trial",i=[{name:"Analytics",subItems:[{name:"Dashboard",appId:"dashboard",isCore:"true"},{name:"Google Analytics",appId:"googleanalytics"},{name:"Heat Maps",appId:"heatmaps"},{name:"Content Analytics",appId:"content-analytics"}]},{name:"Shortcuts",appId:"shortcuts"},{name:"Forms",subItems:[{name:"List Builder",appId:"listbuilder"},{name:"List Builder",appId:"listbuilder-legacy"},{name:"Welcome Mat",appId:"welcome-mat"},{name:"Smart Bar",appId:"smart-bar"},{name:"Scroll Box",appId:"scrollbox"},{name:"Contact Form",appId:"contact-form"}]},{name:"Messages",appId:"messages",subItems:[{name:"Campaigns",appId:"messagecenter",isCore:!0},{name:"Chat",appId:"chat",isCore:!0}]},{name:"Subscribers",appId:"subscribers"},{name:"Social",subItems:[{name:"Share",appId:"share"},{name:"Image Sharer",appId:"image-sharer"},{name:"Highlighter",appId:"highlighter"}]}],s="notifications",o="messagecenter",n="[24hrCountdown]",a=60,r=[{label:"Email",value:"email"},{label:"Push Notification",value:"push"}],l="subscribers",c="chat";return{APP_ID:"launcher",SLUG_TO_FEATURE:e,GOOGLE_ANALYTICS_APP_ID:"674d3d92-3a9f-4620-99f6-ff856d18423d",SUMO_STORE_ID:"c9a64ad6-0863-4b66-bc0c-ef0fb5ef15d0",SUMO_HELP_ID:"94c05087-064a-411d-97a8-e3c8c8fdb70e",SETTINGS_ID:"5d26e2da-aef5-41c1-947a-624497281723",HIGHLIGHTER_APP_UUID:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",CONTENT_ANALYTICS_APP_UUID:"a25489e9-848c-4356-97ff-161b0852c509",CONTACT_FORM_APP_UUID:"822aaf16-c4d6-4241-911a-41567c68b443",SHARE_APP_UUID:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",DASHBOARD_APP_UUID:"8a92832c-ad3b-4d7a-9154-22856aa1d9e9",HEAT_MAPS_APP_UUID:"2c40add5-3570-45d7-8212-8fc2942f7f74",IMAGE_SHARER_APP_UUID:"55c989d5-855d-4538-b67b-3cdb46acd968",LIST_BUILDER_3_APP_UUID:"156085c5-0017-4150-b225-a731ad248f38",SCROLL_BOX_APP_UUID:"13359558-e447-43f3-a3cd-aa61c0b91c02",LIST_BUILDER_LEGACY_APP_UUID:"8dc42610-ae42-4164-90b1-573478b46574",WELCOME_MAT_APP_UUID:"4802de2d-b003-4fc4-8d07-901abb51e683",SMART_BAR_APP_UUID:"408190b5-e369-48af-8e31-afb7380ecd66",SHORTCUTS_APP_UUID:"c3da7147-2536-4768-af12-50317edc18ae",SIDEBAR_ITEMS:i,NOTIFICATIONS_APP_ID:"notifications",NOTIFICATIONS_APP_UUID:"ee27a0af-9947-40c9-8eab-0ab6a4f7a9c1",APP_STORE_ID:"c9a64ad6-0863-4b66-bc0c-ef0fb5ef15d0",COUNTDOWN_PLACEHOLDER:"[24hrCountdown]",NOTIFICATION_HEIGHT:60,MESSAGECENTER_APP_ID:"messagecenter",CampaignTypes:r,CampaignFilters:{campaignTypes:r,statuses:["draft","scheduled","queued","sending","sent","active","paused"]},SUBSCRIBERS_APP_ID:"subscribers",SUBSCRIBERS_APP_UUID:"c0b81e54-d408-4ee2-911b-46108f8b6e66",SearchFilters:[{key:"name",label:"Name",filters:[{key:"contains",label:"contains"}]},{key:"email",label:"Email Address",filters:[{key:"contains",label:"contains"}]},{key:"created",label:"Signed Up",filters:[{key:"is",label:"on",type:"date"},{key:"before",label:"before",type:"date"},{key:"after",label:"after",type:"date"}]},{key:"country",label:"Country",filters:[{key:"is",label:"is"}]},{key:"source",label:"Source",filters:[{key:"is",label:"is"}]},{key:"type",label:"Type",filters:[{key:"exists",label:"exists"}]}],CHAT_APP_UUID:"def79cfc-384b-45dd-b6b0-71ee6639860d",CHAT_APP_ID:"chat",CHAT_OBJECT_ID:"f5104759-c678-40f2-8809-add44b178274",DEFAULT_COLORS:{backgroundColor:"rgba(67,151,236,1)",chatBubbleColor:"rgba(195,220,236,1)",chatBackgroundColor:"rgba(234,240,245,1)",fontColor:"rgba(73,82,89,1)"},TRANSPARENT_MIMETYPES:["image/png","image/gif"],VALID_IMAGE_TYPES:["image/jpeg","image/png","image/x-png","image/gif","image/bmp","image/svg+xml"],SHORTCUTS_PLATFORMS:["shopify","woocommerce"],SHORTCUT_TEMPLATE_ID_ABANDONED_CART:"d1b28f5d-d834-4eab-bed8-505338512f5d",SHORTCUT_TEMPLATE_ID_GROW_EMAIL:"7b743121-fbf3-498a-8310-922af34b2560",SHORTCUTS_DISCOUNT_CODE:"shortcuts-free-trial",SHORTCUT_PLACEHOLDER_PRODUCT_TAGS:{product_title:"Extended Oversized Longsleeve Gray Sweat Shirt",product_desc:"Keep it classic in this vintage crew-neck tee made from 100% cotton in a shrunken top-of-the-jean length.",product_desc_more_display:"none",product_image:"https://media.sumo.com/0f3a8905dc38b006768f17372a2d911b588db048d3f620d2e7d1a4500875dfae",product_price:"$20.99"}}});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t){"function"==typeof sumo.define&&sumo.define.amd?sumo.define("jquery.cookie",["jquery"],t):t("object"===(void 0===e?"undefined":i(e))?require("jquery"):jQuery)}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function i(e){return r.raw?e:decodeURIComponent(e)}function s(e){return t(r.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),r.json?JSON.parse(e):e}catch(e){}}function n(t,i){var s=r.raw?t:o(t);return e.isFunction(i)?i(s):s}var a=/\+/g,r=e.cookie=function(o,a,l){if(void 0!==a&&!e.isFunction(a)){if(l=e.extend({},r.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[t(o),"=",s(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var m=o?void 0:{},h=document.cookie?document.cookie.split("; "):[],d=0,p=h.length;d<p;d++){var f=h[d].split("="),g=i(f.shift()),v=f.join("=");if(o&&o===g){m=n(v,a);break}o||void 0===(v=n(v))||(m[g]=v)}return m};r.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,o=s&&location.protocol&&location.protocol.replace(/\:/,""),n=s&&location.hostname,a=s&&(location.port||void 0),r=[];sumo.define("plugins/text",[],function(){var l,c,u;return"undefined"!=typeof window&&window.navigator&&window.document?c=function(e,t){var i=l.createXhr();i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&t(i.responseText)},i.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(u=require.nodeRequire("fs"),c=function(e,t){t(u.readFileSync(e,"utf8"))}):"undefined"!=typeof Packages&&(c=function(e,t){var i=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),i=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),o,n,a="";try{for(o=new java.lang.StringBuffer,(n=i.readLine())&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),o.append(n);null!==(n=i.readLine());)o.append(s),o.append(n);a=String(o.toString())}finally{i.close()}t(a)}),l={version:"1.0.2",strip:function(e){if(e){var e=e.replace(t,""),s=e.match(i);s&&(e=s[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,i,s;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(i=0;i<3;i++){s=e[i];try{t=new ActiveXObject(s)}catch(e){}if(t){e=[s];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:c,parseName:function(e){var t=!1,i=e.indexOf("."),s=e.substring(0,i),e=e.substring(i+1,e.length),i=e.indexOf("!");return-1!==i&&(t=e.substring(i+1,e.length),t="strip"===t,e=e.substring(0,i)),{moduleName:s,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,i,s){var o=l.xdRegExp.exec(e),n;return!o||(e=o[2],o=o[3],o=o.split(":"),n=o[1],o=o[0],!(e&&e!==t||o&&o!==i||(n||o)&&n!==s))},finishLoad:function(e,t,i,s,o){i=t?l.strip(i):i,o.isBuild&&(r[e]=i),s(i)},load:function(e,t,i,r){if(r.isBuild&&!r.inlineText)i();else{var c=l.parseName(e),u=c.moduleName+"."+c.ext,m=t.toUrl(u),h=r&&r.text&&r.text.useXhr||l.useXhr;!s||h(m,o,n,a)?l.get(m,function(t){l.finishLoad(e,c.strip,t,i,r)}):t([u],function(e){l.finishLoad(c.moduleName+"."+c.ext,c.strip,e,i,r)})}},write:function(e,t,i){if(t in r){var s=l.jsEscape(r[t]);i.asModule(e+"!"+t,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,t,i,s,o){var t=l.parseName(t),n=t.moduleName+"."+t.ext,a=i.toUrl(t.moduleName+"."+t.ext)+".js";l.load(n,i,function(){var t=function(e){return s(a,e)};t.asModule=function(e,t){return s.asModule(e,a,t)},l.write(e,n,t,o)},o)}}})}(),sumo.define("plugins/text!highlighter/templates/highlighter.html",[],function(){return'<div id="sumo_twilighter_div" class="sumo_highlighter_desktop" style="display:none">\n  <textarea id="sumo_twilighter_input" class="sumo_twilighter_textarea"></textarea>\n  <div class="sumo_twilighter_admin_highlight" style="display:none;">\n    <a href="javascript:void(0);">Save Highlight</a>\n  </div>\n  <div class="sumo_twilighter_admin" style="display:none;">\n    <a href="javascript:void(0);">Delete Highlight</a>\n  </div>\n  <br>\n  <div class="sumo_twilighter_tweet">\n    <a id="sumo_twilighter_btn" href="javascript:void(0);" alt ="Tweet this">\n      <img class="btn-icon">\n      <span class="btn-text">Tweet</span>\n    </a>\n  </div>\n  <div class="sumo_twilighter_fb">\n    <a id="sumo_twilighter_btn_fb" href="javascript:void(0);" alt="Facebook Share This">\n      <img class="btn-icon">\n      <span class="btn-text">Share</span>\n    </a>\n  </div>\n  <div class="sumo_twilighter_remaining"></div>\n</div>\n'}),sumo.define("plugins/text!highlighter/templates/highlighter_mobile.html",[],function(){return'<div id="sumo_twilighter_div" class="sumo_highlighter_mobile" style="display:none">\n  <div class="sumo_highlighter_m_right">\n    <div class="sumo_twilighter_m_tweet">\n      <a id="sumo_twilighter_btn" href="javascript:void(0);" alt="Tweet this">\n        <i class="btn-icon"></i>\n      </a>\n    </div>\n    <div class="sumo_twilighter_m_fb">\n      <a id="sumo_twilighter_btn_fb" href="javascript:void(0);" alt="Facebook Share This">\n        <i class="btn-icon"></i>\n      </a>\n    </div>\n  </div>\n  <div class="sumo_twilighter_m_input_div">\n    <input id="sumo_twilighter_input" type="text" class="sumo_twilighter_m_input" />\n  </div>\n</div>\n'}),sumo.define("twitter-text",[],function(){function e(e,t){return t=t||"","string"!=typeof e&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var s=i.txt.regexen[t]||"";return"string"!=typeof s&&(s=s.source),s}),t)}function t(e,t){return e.replace(/#\{(\w+)\}/g,function(e,i){return t[i]||""})}var i={};return i.txt={},i.txt.regexen={},i.txt.regexSupplant=e,i.txt.stringSupplant=t,i.txt.regexen.spaces_group=/\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000/,i.txt.regexen.invalid_chars_group=/\uFFFE\uFEFF\uFFFF\u202A-\u202E/,i.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,i.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm,i.txt.regexen.latinAccentChars=/\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u1E00-\u1EFF/,i.txt.regexen.validUrlPrecedingChars=e(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),i.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,i.txt.regexen.invalidDomainChars=t("#{punct}#{spaces_group}#{invalid_chars_group}",i.txt.regexen),i.txt.regexen.validDomainChars=e(/[^#{invalidDomainChars}]/),i.txt.regexen.validSubdomain=e(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),i.txt.regexen.validDomainName=e(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),i.txt.regexen.validGTLD=e(RegExp("(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|شبكة|بيتك|بازار|العليان|ارامكو|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@]|$))")),i.txt.regexen.validCCTLD=e(RegExp("(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@]|$))")),i.txt.regexen.validPunycode=/(?:xn--[0-9a-z]+)/,i.txt.regexen.validSpecialCCTLD=/(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))/,i.txt.regexen.validDomain=e(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),i.txt.regexen.validAsciiDomain=e(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),i.txt.regexen.invalidShortDomain=e(/^#{validDomainName}#{validCCTLD}$/i),i.txt.regexen.validSpecialShortDomain=e(/^#{validDomainName}#{validSpecialCCTLD}$/i),i.txt.regexen.validPortNumber=/[0-9]+/,i.txt.regexen.cyrillicLettersAndMarks=/\u0400-\u04FF/,i.txt.regexen.validGeneralUrlPathChars=e(/[a-z#{cyrillicLettersAndMarks}0-9!\*';:=\+,\.\$\/%#\[\]\-_~@\|&#{latinAccentChars}]/i),i.txt.regexen.validUrlBalancedParens=e("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),i.txt.regexen.validUrlPathEndingChars=e(/[\+\-a-z#{cyrillicLettersAndMarks}0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),i.txt.regexen.validUrlPath=e("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),i.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,i.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,i.txt.regexen.extractUrl=e("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),i.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,i.txt.regexen.urlHasHttps=/^https:\/\//i,i.txt.extractUrlsWithIndices=function(e,t){if(t||(t={extractUrlsWithoutProtocol:!0}),!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var s=[];i.txt.regexen.extractUrl.exec(e);){var o=RegExp.$2,n=RegExp.$3,a=RegExp.$4,r=RegExp.$5,l=RegExp.$7,c=i.txt.regexen.extractUrl.lastIndex,u=c-n.length;if(a)n.match(i.txt.regexen.validTcoUrl)&&(n=RegExp.lastMatch,c=u+n.length),s.push({url:n,indices:[u,c]});else{if(!t.extractUrlsWithoutProtocol||o.match(i.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var m=null,h=0;if(r.replace(i.txt.regexen.validAsciiDomain,function(e){var t=r.indexOf(e,h);h=t+e.length,m={url:e,indices:[u+t,u+h]},(l||e.match(i.txt.regexen.validSpecialShortDomain)||!e.match(i.txt.regexen.invalidShortDomain))&&s.push(m)}),null==m)continue;l&&(m.url=n.replace(r,m.url),m.indices[1]=c)}}return s},i.txt.modifyIndicesFromUTF16ToUnicode=function(e,t){i.txt.convertUnicodeIndices(e,t,!0)},i.txt.getUnicodeTextLength=function(e){return e.replace(i.txt.regexen.non_bmp_code_pairs," ").length},i.txt.convertUnicodeIndices=function(e,t,i){if(0!=t.length){var s=0,o=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var n=0,a=t[0];s<e.length;){if(a.indices[0]==(i?s:o)){var r=a.indices[1]-a.indices[0];if(a.indices[0]=i?o:s,a.indices[1]=a.indices[0]+r,++n==t.length)break;a=t[n]}var l=e.charCodeAt(s);55296<=l&&l<=56319&&s<e.length-1&&56320<=(l=e.charCodeAt(s+1))&&l<=57343&&s++,o++,s++}}},i.txt.getTweetLength=function(e,t){t||(t={short_url_length:23,short_url_length_https:23});var s=i.txt.getUnicodeTextLength(e),o=i.txt.extractUrlsWithIndices(e);i.txt.modifyIndicesFromUTF16ToUnicode(e,o);for(var n=0;n<o.length;n++)s+=o[n].indices[0]-o[n].indices[1],o[n].url.toLowerCase().match(i.txt.regexen.urlHasHttps)?s+=t.short_url_length_https:s+=t.short_url_length;return s},i}),sumo.define("color",[],function(){return{lightOrDark:function(e){var t,i,s,o;return e.toHex&&(e="#"+e.toHex()),e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),t=e[1],s=e[2],i=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),t=e>>16,s=e>>8&255,i=255&e),o=Math.sqrt(t*t*.299+s*s*.587+i*i*.114),o>127.5?"light":"dark"},whiteOrBlack:function(e){return"light"==this.lightOrDark(e)?"black":"white"},shadeColor:function(e,t){e=e.toString();var i=parseInt(e.slice(1),16),s=Math.round(2.55*t),o=(i>>16)+s,n=(i>>8&255)+s,a=(255&i)+s;return"#"+(16777216+65536*(o<255?o<1?0:o:255)+256*(n<255?n<1?0:n:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)},RGBColor:function(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}}],i=0;i<t.length;i++){var s=t[i].re,o=t[i].process,n=s.exec(e);n&&(channels=o(n),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i}},hexToRGBA:function(e,t){var i=new this.RGBColor(e);return i.a=t||1,i.toRGBA()}}}),sumo.define("jquery.style",["jquery"],function(e){if(!e.fn.style){var t=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};!!CSSStyleDeclaration.prototype.getPropertyValue||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,i,s){this.setAttribute(e,i);var s=void 0!==s?s:"";if(""!=s){var o=new RegExp(t(e)+"\\s*:\\s*"+t(i)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(o,e+": "+i+" !"+s+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){return new RegExp(t(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi").test(this.cssText)?"important":""}),e.fn.style=function(e,t,i){if(void 0===this.get(0))return this;var s=this.get(0).style;return void 0!==e?void 0!==t?(i="important"==i?i:"","important"!=i&&"important"==s.getPropertyPriority(e)&&s.removeProperty(e),s.setProperty(e,t,i),this):s.getPropertyValue(e):s}}}),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(i,s){"object"==typeof e?t.exports=s(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof sumo.define&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],s):i.URI=s(i.punycode,i.IPv6,i.SecondLevelDomains,i)}(this,function(e,t,i,s){"use strict";function o(e,t){return this instanceof o?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new o(e,t)}function n(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function r(e){return"Array"===a(e)}function l(e,t){var i={},s,o;if(r(t))for(s=0,o=t.length;s<o;s++)i[t[s]]=!0;else i[t]=!0;for(s=0,o=e.length;s<o;s++)void 0!==i[e[s]]&&(e.splice(s,1),o--,s--);return e}function c(e,t){var i,s;if(r(t)){for(i=0,s=t.length;i<s;i++)if(!c(e,t[i]))return!1;return!0}var o=a(t);for(i=0,s=e.length;i<s;i++)if("RegExp"===o){if("string"==typeof e[i]&&e[i].match(t))return!0}else if(e[i]===t)return!0;return!1}function u(e,t){if(!r(e)||!r(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var i=0,s=e.length;i<s;i++)if(e[i]!==t[i])return!1;return!0}function m(e){return escape(e)}function h(e){return encodeURIComponent(e).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}var d=s&&s.URI;o.version="1.12.0";var p=o.prototype,f=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,
o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},o.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return o.domAttributes[t]}},o.encode=h,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=h,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},o.encodeQuery=function(e,t){var i=o.encode(e+"");return t?i.replace(/%20/g,"+"):i},o.decodeQuery=function(e,t){e+="";try{return o.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}},o.recodePath=function(e){for(var t=(e+"").split("/"),i=0,s=t.length;i<s;i++)t[i]=o.encodePathSegment(o.decode(t[i]));return t.join("/")},o.decodePath=function(e){for(var t=(e+"").split("/"),i=0,s=t.length;i<s;i++)t[i]=o.decodePathSegment(t[i]);return t.join("/")};var g={encode:"encode",decode:"decode"},v,b=function(e,t){return function(i){return o[t](i+"").replace(o.characters[e][t].expression,function(i){return o.characters[e][t].map[i]})}};for(v in g)o[v+"PathSegment"]=b("pathname",g[v]);o.encodeReserved=b("reserved","encode"),o.parse=function(e,t){var i;return t||(t={}),i=e.indexOf("#"),i>-1&&(t.fragment=e.substring(i+1)||null,e=e.substring(0,i)),i=e.indexOf("?"),i>-1&&(t.query=e.substring(i+1)||null,e=e.substring(0,i)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=o.parseAuthority(e,t)):(i=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,i)||null,t.protocol&&!t.protocol.match(o.protocol_expression)?t.protocol=void 0:"file"===t.protocol?e=e.substring(i+3):"//"===e.substring(i+1,i+3)?(e=e.substring(i+3),e=o.parseAuthority(e,t)):(e=e.substring(i+1),t.urn=!0)),t.path=e,t},o.parseHost=function(e,t){var i=e.indexOf("/"),s,o;return-1===i&&(i=e.length),"["===e.charAt(0)?(s=e.indexOf("]"),t.hostname=e.substring(1,s)||null,t.port=e.substring(s+2,i)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,i)||null,t.port=null):(o=e.substring(0,i).split(":"),t.hostname=o[0]||null,t.port=o[1]||null),t.hostname&&"/"!==e.substring(i).charAt(0)&&(i++,e="/"+e),e.substring(i)||"/"},o.parseAuthority=function(e,t){return e=o.parseUserinfo(e,t),o.parseHost(e,t)},o.parseUserinfo=function(e,t){var i=e.indexOf("/"),s=i>-1?e.lastIndexOf("@",i):e.indexOf("@"),n;return s>-1&&(-1===i||s<i)?(n=e.substring(0,s).split(":"),t.username=n[0]?o.decode(n[0]):null,n.shift(),t.password=n[0]?o.decode(n.join(":")):null,e=e.substring(s+1)):(t.username=null,t.password=null),e},o.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var i={},s=e.split("&"),n=s.length,a,r,l,c=0;c<n;c++)a=s[c].split("="),r=o.decodeQuery(a.shift(),t),l=a.length?o.decodeQuery(a.join("="),t):null,i[r]?("string"==typeof i[r]&&(i[r]=[i[r]]),i[r].push(l)):i[r]=l;return i},o.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=o.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},o.buildHost=function(e){var t="";return e.hostname?(o.ip6_expression.test(e.hostname)?e.port?t+="["+e.hostname+"]:"+e.port:t+=e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},o.buildAuthority=function(e){return o.buildUserinfo(e)+o.buildHost(e)},o.buildUserinfo=function(e){var t="";return e.username&&(t+=o.encode(e.username),e.password&&(t+=":"+o.encode(e.password)),t+="@"),t},o.buildQuery=function(e,t,i){var s="",n,a,l,c;for(a in e)if(f.call(e,a)&&a)if(r(e[a]))for(n={},l=0,c=e[a].length;l<c;l++)void 0!==e[a][l]&&void 0===n[e[a][l]+""]&&(s+="&"+o.buildQueryParameter(a,e[a][l],i),!0!==t&&(n[e[a][l]+""]=!0));else void 0!==e[a]&&(s+="&"+o.buildQueryParameter(a,e[a],i));return s.substring(1)},o.buildQueryParameter=function(e,t,i){return o.encodeQuery(e,i)+(null!==t?"="+o.encodeQuery(t,i):"")},o.addQuery=function(e,t,i){if("object"==typeof t)for(var s in t)f.call(t,s)&&o.addQuery(e,s,t[s]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=i);"string"==typeof e[t]&&(e[t]=[e[t]]),r(i)||(i=[i]),e[t]=e[t].concat(i)}},o.removeQuery=function(e,t,i){var s,n,a;if(r(t))for(s=0,n=t.length;s<n;s++)e[t[s]]=void 0;else if("object"==typeof t)for(a in t)f.call(t,a)&&o.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==i?e[t]===i?e[t]=void 0:r(e[t])&&(e[t]=l(e[t],i)):e[t]=void 0}},o.hasQuery=function(e,t,i,s){if("object"==typeof t){for(var n in t)if(f.call(t,n)&&!o.hasQuery(e,n,t[n]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(a(i)){case"Undefined":return t in e;case"Boolean":return i===Boolean(r(e[t])?e[t].length:e[t]);case"Function":return!!i(e[t],t,e);case"Array":if(!r(e[t]))return!1;return(s?c:u)(e[t],i);case"RegExp":return r(e[t])?!!s&&c(e[t],i):Boolean(e[t]&&e[t].match(i));case"Number":i=String(i);case"String":return r(e[t])?!!s&&c(e[t],i):e[t]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.commonPath=function(e,t){var i=Math.min(e.length,t.length),s;for(s=0;s<i;s++)if(e.charAt(s)!==t.charAt(s)){s--;break}return s<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(s)&&"/"===t.charAt(s)||(s=e.substring(0,s).lastIndexOf("/")),e.substring(0,s+1))},o.withinString=function(e,t,i){i||(i={});var s=i.start||o.findUri.start,n=i.end||o.findUri.end,a=i.trim||o.findUri.trim,r=/[a-z0-9-]=["']?$/i;for(s.lastIndex=0;;){var l=s.exec(e);if(!l)break;var c=l.index;if(i.ignoreHtml){var u=e.slice(Math.max(c-3,0),c);if(u&&r.test(u))continue}var m=c+e.slice(c).search(n),h=e.slice(c,m).replace(a,"");if(!i.ignore||!i.ignore.test(h)){m=c+h.length;var d=t(h,c,m,e);e=e.slice(0,c)+d+e.slice(m),s.lastIndex=c+d.length}}return s.lastIndex=0,e},o.ensureValidHostname=function(t){if(t.match(o.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(o.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},o.noConflict=function(e){if(e){var i={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(i.URITemplate=URITemplate.noConflict()),t&&"function"==typeof t.noConflict&&(i.IPv6=t.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(i.SecondLevelDomains=SecondLevelDomains.noConflict()),i}return s.URI===this&&(s.URI=d),this},p.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new o(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},g={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},b=function(e){return function(t,i){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!i),this)}};for(v in g)p[v]=b(g[v]);g={query:"?",fragment:"#"},b=function(e,t){return function(i,s){return void 0===i?this._parts[e]||"":(null!==i&&(i+="",i.charAt(0)===t&&(i=i.substring(1))),this._parts[e]=i,this.build(!s),this)}};for(v in g)p[v]=b(v,g[v]);g={search:["?","query"],hash:["#","fragment"]},b=function(e,t){return function(i,s){var o=this[e](i,s);return"string"==typeof o&&o.length?t+o:o}};for(v in g)p[v]=b(g[v][1],g[v][0]);p.pathname=function(e,t){if(void 0===e||!0===e){var i=this._parts.path||(this._parts.hostname?"/":"");return e?o.decodePath(i):i}return this._parts.path=e?o.recodePath(e):"/",this.build(!t),this},p.path=p.pathname,p.href=function(e,t){var i;if(void 0===e)return this.toString();this._string="",this._parts=o._parts();var s=e instanceof o,n="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){e=e[o.getDomAttribute(e)]||"",n=!1}if(!s&&n&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e)this._parts=o.parse(e,this._parts);else{if(!s&&!n)throw new TypeError("invalid input");var a=s?e._parts:e;for(i in a)f.call(this._parts,i)&&(this._parts[i]=a[i])}return this.build(!t),this},p.is=function(e){var t=!1,s=!1,n=!1,a=!1,r=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,s=o.ip4_expression.test(this._parts.hostname),n=o.ip6_expression.test(this._parts.hostname),t=s||n,a=!t,r=a&&i&&i.has(this._parts.hostname),l=a&&o.idn_expression.test(this._parts.hostname),c=a&&o.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return a;case"sld":return r;case"ip":return t;case"ip4":case"ipv4":case"inet4":return s;case"ip6":case"ipv6":case"inet6":return n;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var y=p.protocol,w=p.port,_=p.hostname;p.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(o.protocol_expression)))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return y.call(this,e,t)},p.scheme=p.protocol,p.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port '"+e+"' contains characters other than [0-9]");return w.call(this,e,t)},p.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var i={};o.parseHost(e,i),e=i.hostname}return _.call(this,e,t)},p.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?o.buildHost(this._parts):"":(o.parseHost(e,this._parts),this.build(!t),this)},p.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?o.buildAuthority(this._parts):"":(o.parseAuthority(e,this._parts),this.build(!t),this)},p.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var i=o.buildUserinfo(this._parts);return i.substring(0,i.length-1)}return"@"!==e[e.length-1]&&(e+="@"),o.parseUserinfo(e,this._parts),this.build(!t),this},p.resource=function(e,t){var i;return void 0===e?this.path()+this.search()+this.hash():(i=o.parse(e),this._parts.path=i.path,this._parts.query=i.query,this._parts.fragment=i.fragment,this.build(!t),this)},p.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,i)||""}var s=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,s),r=new RegExp("^"+n(a));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&o.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(r,e),this.build(!t),this},p.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.match(/\./g);if(i&&i.length<2)return this._parts.hostname;var s=this._parts.hostname.length-this.tld(t).length-1;return s=this._parts.hostname.lastIndexOf(".",s-1)+1,this._parts.hostname.substring(s)||""}if(!e)throw new TypeError("cannot set domain empty");if(o.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=new RegExp(n(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},p.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var s=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(s+1);return!0!==t&&i&&i.list[o.toLowerCase()]?i.get(this._parts.hostname)||o:o}var a;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");a=new RegExp(n(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(n(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},p.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var i=this._parts.path.length-this.filename().length-1,s=this._parts.path.substring(0,i)||(this._parts.hostname?"/":"");return e?o.decodePath(s):s}var a=this._parts.path.length-this.filename().length,r=this._parts.path.substring(0,a),l=new RegExp("^"+n(r));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=o.recodePath(e),this._parts.path=this._parts.path.replace(l,e),this.build(!t),this},p.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var i=this._parts.path.lastIndexOf("/"),s=this._parts.path.substring(i+1);return e?o.decodePathSegment(s):s}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var r=new RegExp(n(this.filename())+"$");return e=o.recodePath(e),this._parts.path=this._parts.path.replace(r,e),a?this.normalizePath(t):this.build(!t),this},p.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var i=this.filename(),s=i.lastIndexOf("."),a,r;return-1===s?"":(a=i.substring(s+1),r=/^[a-z0-9%]+$/i.test(a)?a:"",e?o.decodePathSegment(r):r)}"."===e.charAt(0)&&(e=e.substring(1));var l=this.suffix(),c;if(l)c=e?new RegExp(n(l)+"$"):new RegExp(n("."+l)+"$");else{if(!e)return this;this._parts.path+="."+o.recodePath(e)}return c&&(e=o.recodePath(e),this._parts.path=this._parts.path.replace(c,e)),this.build(!t),this},p.segment=function(e,t,i){var s=this._parts.urn?":":"/",o=this.path(),n="/"===o.substring(0,1),a=o.split(s);if(void 0!==e&&"number"!=typeof e&&(i=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error("Bad segment '"+e+"', must be 0-based integer");if(n&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(r(t)){a=[];for(var l=0,c=t.length;l<c;l++)(t[l].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(t[l]))}else(t||"string"==typeof t)&&(""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t||"string"==typeof t&&t.length?a[e]=t:a.splice(e,1);return n&&a.unshift(""),this.path(a.join(s),i)},p.segmentCoded=function(e,t,i){var s,n,a;if("number"!=typeof e&&(i=t,t=e,e=void 0),void 0===t){if(s=this.segment(e,t,i),r(s))for(n=0,a=s.length;n<a;n++)s[n]=o.decode(s[n]);else s=void 0!==s?o.decode(s):void 0;return s}if(r(t))for(n=0,a=t.length;n<a;n++)t[n]=o.decode(t[n]);else t="string"==typeof t?o.encode(t):t;return this.segment(e,t,i)};var x=p.query;return p.query=function(e,t){if(!0===e)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),s=e.call(this,i);return this._parts.query=o.buildQuery(s||i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=o.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):x.call(this,e,t)},p.setQuery=function(e,t,i){var s=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof e)for(var n in e)f.call(e,n)&&(s[n]=e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");s[e]=void 0!==t?t:null}return this._parts.query=o.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(i=t),this.build(!i),this},p.addQuery=function(e,t,i){var s=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(s,e,void 0===t?null:t),this._parts.query=o.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(i=t),this.build(!i),this},p.removeQuery=function(e,t,i){var s=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(s,e,t),this._parts.query=o.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(i=t),this.build(!i),this},p.hasQuery=function(e,t,i){var s=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(s,e,t,i)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},p.normalizeHostname=function(i){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!i)),this},p.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},p.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,i=this._parts.path,s="",n,a;for("/"!==i.charAt(0)&&(t=!0,i="/"+i),i=i.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(s=i.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);;){if(-1===(n=i.indexOf("/..")))break;0!==n?(a=i.substring(0,n).lastIndexOf("/"),-1===a&&(a=n),i=i.substring(0,a)+i.substring(n+3)):i=i.substring(3)}return t&&this.is("relative")&&(i=s+i.substring(1)),i=o.recodePath(i),this._parts.path=i,this.build(!e),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},p.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var e=o.encode,t=o.decode;return o.encode=escape,o.decode=decodeURIComponent,this.normalize(),o.encode=e,o.decode=t,this},p.unicode=function(){var e=o.encode,t=o.decode;return o.encode=h,o.decode=unescape,this.normalize(),o.encode=e,o.decode=t,this},p.readable=function(){var t=this.clone();t.username("").password("").normalize();var i="";if(t._parts.protocol&&(i+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(i+=e.toUnicode(t._parts.hostname),t._parts.port&&(i+=":"+t._parts.port)):i+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(i+="/"),i+=t.path(!0),t._parts.query){for(var s="",n=0,a=t._parts.query.split("&"),r=a.length;n<r;n++){var l=(a[n]||"").split("=");s+="&"+o.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(s+="="+o.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}i+="?"+s.substring(1)}return i+=o.decodeQuery(t.hash(),!0)},p.absoluteTo=function(e){var t=this.clone(),i=["protocol","username","password","hostname","port"],s,n,a;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof o||(e=new o(e)),t._parts.protocol||(t._parts.protocol=e._parts.protocol),this._parts.hostname)return t;for(n=0;a=i[n];n++)t._parts[a]=e._parts[a];return t._parts.path?".."===t._parts.path.substring(-2)&&(t._parts.path+="/"):(t._parts.path=e._parts.path,t._parts.query||(t._parts.query=e._parts.query)),"/"!==t.path().charAt(0)&&(s=e.directory(),t._parts.path=(s?s+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},p.relativeTo=function(e){var t=this.clone().normalize(),i,s,n,a,r;if(t._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new o(e).normalize(),i=t._parts,s=e._parts,a=t.path(),r=e.path(),"/"!==a.charAt(0))throw new Error("URI is already relative");if("/"!==r.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(i.protocol===s.protocol&&(i.protocol=null),i.username!==s.username||i.password!==s.password)return t.build();if(null!==i.protocol||null!==i.username||null!==i.password)return t.build();if(i.hostname!==s.hostname||i.port!==s.port)return t.build();if(i.hostname=null,i.port=null,a===r)return i.path="",t.build();if(!(n=o.commonPath(t.path(),e.path())))return t.build();var l=s.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return i.path=l+i.path.substring(n.length),t.build()},p.equals=function(e){var t=this.clone(),i=new o(e),s={},n={},a={},l,c,m;if(t.normalize(),i.normalize(),t.toString()===i.toString())return!0;if(l=t.query(),c=i.query(),t.query(""),i.query(""),t.toString()!==i.toString())return!1;if(l.length!==c.length)return!1;s=o.parseQuery(l,this._parts.escapeQuerySpace),n=o.parseQuery(c,this._parts.escapeQuerySpace);for(m in s)if(f.call(s,m)){if(r(s[m])){if(!u(s[m],n[m]))return!1}else if(s[m]!==n[m])return!1;a[m]=!0}for(m in n)if(f.call(n,m)&&!a[m])return!1;return!0},p.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},p.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},o}),sumo.define("articles",[],function(){var e=[],t=["[class^=comment]","[id^=comment]","[class*=footer]","[class^=comment]",".archive-page",".aside",".hentry-metro",".hrf-entry"],i=[".sidebar:not(body)","aside","#sidebar","footer","[class*=footer]:not(body):not([class*=not-footer])","#comments","#livefyre-comments","[class^=fyre]","[id^=comment]","[class*=related-post]:not(body)",".tve-leads-lightbox"],s=[];return{_invalidateNode:function(e){if(e&&"#text"!==e.nodeName&&(s.push(e),e.childNodes&&e.childNodes.length>0))for(var t=0;t<e.childNodes.length;t++)this._invalidateNode(e.childNodes[t])},_findInvalidElements:function(e){for(var t=0;t<i.length;t++)for(var s=i[t],o=e.querySelectorAll(s),n=0;n<o.length;n++)this._invalidateNode(o[n])},_findAnchor:function(e){for(var t=null,i=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],s=0;s<i.length;s++){var o=i[s],n=e.querySelector(o+"[href]");if(n)return n[0]}return null},_findFooter:function(e){for(var t=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not([class^=comment-count]):not([class^=comments-link]):not([class^=comments-number]):not(li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],i=[".post-meta-info"],s=0;s<t.length;s++){var o=t[s],n=e.querySelector(o);if(n){if(n.classList.contains("fb-comments")){for(var a=n,r=n,l=!1;null!==r.previousElementSibling;){if("P"===r.nodeName&&"H3"===r.previousElementSibling.nodeName){l=!0,r=r.previousElementSibling;break}r=r.previousElementSibling}if(l){for(;null!==r.previousElementSibling;)if(r=r.previousElementSibling,"H3"===r.nodeName)return r;return a}return a}return n}}return null},_findHeader:function(e){for(var t=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],i=0;i<t.length;i++){var s=t[i],o=e.querySelector(s);if(o)return o}return null},_validateArticles:function(e){if(!e||!e.length)return[];for(var t=[],i=0;i<e.length;i++){var o=e[i],n=!0;if(o.innerText&&""!==o.innerText.trim()){for(var a=0;a<s.length;a++)o===s[a]&&(n=!1);if(n){o.__header||(o.__header=this._findHeader(o)),o.__title=o.__header?o.__header:null,o.__footer=this._findFooter(o),self._title&&(o.__titleText=self.__title.innerText());var r=o.__header&&o.__header.length?this._findAnchor(o.__header[0]):null;o.__anchor=r||this._findAnchor(o),o.__anchor?o.__url=o.__anchor.getAttribute("href"):o.__url=null,o.__url||(o.__url=window.location.href),t.push(o)}}}return t},_findLeaves:function(e,i){for(var s=i,o=0;o<t.length;o++)s+=":not("+t[o]+")";return e.querySelectorAll(s)||[]},findAll:function(){var t=document.querySelector('main, [role="main"]'),i=t||document.body;e.push("article"),e.push(".post"),e.push(".entry-content"),e.push(".post-content"),e.push(".post_box"),e.push(".post-item"),e.push(".blog-post-wrapper"),e.push(".type-post"),e.push("#content"),e.push(".blog_content"),i===document.body?(e.push("main .hentry"),e.push("[role=main] .hentry"),e.push("main .content"),e.push("[role=main] .content")):(e.push(".hentry"),e.push(".content")),e.push("#post-content"),e.push("#blog-content"),e.push(".blog-post"),this._findInvalidElements(i);for(var s=0;s<e.length;s++){var o=this._findLeaves(i,e[s]),n=this._validateArticles(o);if(n.length>0)return n}var a=document.querySelectorAll("p"),o=[];if(a&&a.length){for(var s=0;s<a.length;s++){var r=a[s].parentNode;if(!(o.indexOf(r)>-1)){for(var l=r.childNodes,c=!1,u=0,m=0;m<l.length;m++)if("P"===l[m].tagName&&u++,u>=3){c=!0;break}c&&o.push(r)}}var n=this._validateArticles(o);if(n.length>0)return n}return[]},find:function(){var e=this.findAll();return e&&e.length?e[0]:null},hasArticles:function(){return this.findAll().length>=1}}}),sumo.define("jquery.displayrules",["jquery","URI","articles"],function(e,t,i){e.isCurrentUrlAllowed=function(s,o,n,a){function r(e,t,i,s){var o=[];if(e&&e.length)for(var n=0;n<e.length;n++){var a=e[n];if("object"==typeof a&&a.hasOwnProperty(t)&&a[t]==i&&(o.push(a),s))return o[0]}return s?null:o}if(s&&s.length){var l=r(s,"filter_type","article",!0),c=[];l&&(c=i.findAll()),n||(n=!1);var u=function(e){for(var t=Object.keys(e),i=t.length,s=Array(i),o=0;o<i;o++)s[o]=[t[o],e[t[o]]];return s},m=function(e){var t=u(e),i=t.length;return function(e){if(null==e)return!i;e=new Object(e);for(var s=0;s<i;s++){var o=t[s],n=o[0];if(o[1]!==e[n]||!(n in e))return!1}return!0}},h=function(e){var e=e.substr(1).split("&");if(""==e)return{};for(var t={},i=0;i<e.length;++i){var s=e[i].split("=",2);if(1==s.length)t[s[0]]="";else try{t[s[0]]=decodeURIComponent(s[1].replace(/\+/g," "))}catch(e){t[s[0]]=s[1].replace(/\+/g," ")}}return t},d=function(e,t,i){if(e.has_hash&&e.hash!=t)return!1;if(e.has_query_params){var s=h(e.search),o=h(i);if(m(s)(o))return!0;if(!(["containing","beginning"].indexOf(e.filter_type)>=0))return!1;for(var n=!0,a=Object.keys(s),r=0;r<a.length;r++){var l=a[r],c=s[a[r]];if(c&&c.length)if(l in o){if(0!=o[l].indexOf(c))return!1}else{if("containing"!=e.filter_type)return!1;var u=!1;if(Object.keys(o).forEach(function(e){e.lastIndexOf(l)>=0&&l==e.substring(e.lastIndexOf(l))&&0==o[e].indexOf(c)&&(u=!0)}),!u)return!1}else{if(l in o)continue;for(var d=Object.keys(o),u=!1,p=0;p<d.length;p++){if(0==d[p].indexOf(l)){u=!0;break}}if(!u)return!1}}}return!0},p=r(s,"parsedUserAgent",!0,!0),f=window.location.toString();f&&(f=f.toLowerCase());var g=window.location.pathname.toString();g&&(g=g.toLowerCase());var v=window.location.hostname+g;v&&(v=v.toLowerCase()),"/"==g[g.length-1]&&(g=g.substring(0,g.length-1),v=v.substring(0,v.length-1)),0==v.indexOf("www.")&&(v=v.substring(4));var b=window.location.search;b&&(b=b.toLowerCase());var y=window.location.hash;y&&(y=y.toLowerCase(),"#"!=y[0]&&(y="#"+y));for(var w=h(b),_=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),x=document.cookie.split(";"),k={},S=[],C=0;C<x.length;C++){var T=x[C].substring(0,x[C].indexOf("=")).trim(),E=x[C].substring(x[C].indexOf("=")+1).trim();S.push(T),k[T]=E}var $=document.getElementsByTagName("meta"),I=document.referrer;if(I&&I.length){I=I.toLowerCase();try{var L=t(I);if(L.is("ip")){var A=L.hostname();A&&(A=A.toLowerCase())}else{var A=L.domain();A&&(A=A.toLowerCase())}var O=L.path();O&&(O=O.toLowerCase());var P=L.tld();P&&(P=P.toLowerCase());var B=L.hostname()?L.hostname().toLowerCase()+O:O;"/"==O[O.length-1]&&(O=O.substring(0,O.length-1),B=B.substring(0,B.length-1)),0==B.indexOf("www.")&&(B=B.substring(4));var D=L.search(),U=L.hash()}catch(e){I=!1}}else I=!1;var R=function(t){var i=!1;return e.each(t,function(e,t){var s=!1;if(t.forEach(function(e){var t=!1
;if(!s)if("article"==e.filter_type)1==c.length&&(t=!0);else if("smaller"==e.filter_type)(isNaN(parseFloat(e.filter_value))||_<parseFloat(e.filter_value))&&(t=!0);else if("bigger"==e.filter_type)(isNaN(parseFloat(e.filter_value))||_>=parseFloat(e.filter_value))&&(t=!0);else if("views_lt"==e.filter_type)(isNaN(e.pageviews)||a<e.pageviews)&&(t=!0);else if("views_eq"==e.filter_type)(isNaN(e.pageviews)||a==e.pageviews)&&(t=!0);else if("views_gt"==e.filter_type)(isNaN(e.pageviews)||a>e.pageviews)&&(t=!0);else if("countryis"==e.filter_type)n==e.filter_value.toLowerCase()&&(t=!0);else if("countryisnot"==e.filter_type)n&&n==e.filter_value.toLowerCase()||(t=!0);else if("c_exists"==e.filter_type)S.indexOf(e.filter_value)>=0&&(t=!0);else if("c_dne"==e.filter_type)S.indexOf(e.filter_value)<0&&(t=!0);else if("c_equals"==e.filter_type)S.indexOf(e.filter_value)>=0&&k[e.filter_value]==e.param_value&&(t=!0);else if("c_notequals"==e.filter_type)(S.indexOf(e.filter_value)<0||k[e.filter_value]!=e.param_value)&&(t=!0);else if("c_contains"==e.filter_type)S.indexOf(e.filter_value)>=0&&k[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if("c_notcontains"==e.filter_type)(S.indexOf(e.filter_value)<0||k[e.filter_value].indexOf(e.param_value)<0)&&(t=!0);else if("mt_equals"===e.filter_type)for(var i=0;i<$.length;i++){var o=$[i].getAttribute(e.filter_value);o&&o.toLowerCase()===e.param_value.toLowerCase()&&(t=!0)}else if("mt_notequals"===e.filter_type){for(var r=!1,i=0;i<$.length;i++){var o=$[i].getAttribute(e.filter_value);o&&o.toLowerCase()===e.param_value.toLowerCase()&&(r=!0)}t=!r}else if("mt_contains"===e.filter_type)for(var i=0;i<$.length;i++){var o=$[i].getAttribute(e.filter_value);o&&-1!==o.toLowerCase().indexOf(e.param_value.toLowerCase())&&(t=!0)}else if("mt_notcontains"===e.filter_type){for(var r=!1,i=0;i<$.length;i++){var o=$[i].getAttribute(e.filter_value);o&&-1!==o.toLowerCase().indexOf(e.param_value.toLowerCase())&&(r=!0)}t=!r}else if("mt_beginning"===e.filter_type)for(var i=0;i<$.length;i++){var o=$[i].getAttribute(e.filter_value);o&&o.toLowerCase().substring(0,e.param_value.length)===e.param_value.toLowerCase()&&(t=!0)}else if("q_exists"==e.filter_type)w&&w.hasOwnProperty(e.filter_value.toLowerCase())&&(t=!0);else if("q_dne"==e.filter_type)w&&w.hasOwnProperty(e.filter_value)||(t=!0);else if("q_equals"==e.filter_type)w&&w[e.filter_value]&&w[e.filter_value]==e.param_value&&(t=!0);else if("q_notequals"==e.filter_type)w&&w[e.filter_value]&&w[e.filter_value]==e.param_value||(t=!0);else if("q_contains"==e.filter_type)w&&w[e.filter_value]&&w[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if("q_notcontains"==e.filter_type)(!w||!w[e.filter_value]||w[e.filter_value].indexOf(e.param_value)<0)&&(t=!0);else if("exact"==e.filter_type){var l=d(e,y,b);l&&(e.full_url?v==e.match_url&&(t=!0):null==e.match_url&&l?t=!0:v!=e.match_url&&g!=e.match_url||(t=!0))}else if("beginning"==e.filter_type){var l=d(e,y,b);l&&(e.full_url?0==v.indexOf(e.match_url.toLowerCase())&&(t=!0):null==e.match_url&&l?t=!0:0!=v.indexOf(e.match_url.toLowerCase())&&0!=g.indexOf(e.match_url.toLowerCase())||(t=!0))}else if("containing"==e.filter_type){var l=d(e,y,b);l&&(e.full_url?v.indexOf(e.match_url.toLowerCase())>=0&&(t=!0):null==e.match_url&&l?t=!0:v.indexOf(e.match_url.toLowerCase())>=0&&(t=!0))}else if(I&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(e.filter_type)>=0)if("r_url_exact"==e.filter_type){var l=d(e,U,D);e.full_url?l&&B==e.match_url.toLowerCase()&&(t=!0):l&&B==e.match_url.toLowerCase()?t=!0:null==e.match_url&&l&&(t=!0)}else if("r_domain_exact"==e.filter_type)e.host?e.host==A&&(t=!0):e.filter_value==A&&(t=!0);else if("r_url_beginning"==e.filter_type){var l=d(e,U,D);e.full_url?l&&0==B.indexOf(e.match_url)&&(t=!0):l&&0==B.indexOf(e.match_url)?t=!0:null==e.match_url&&l&&(t=!0)}else if("r_domain_beginning"==e.filter_type)e.host&&0==A.indexOf(e.host)?t=!0:0==A.indexOf(e.filter_value)&&(t=!0);else if("r_url_containing"==e.filter_type){var l=d(e,U,D);e.full_url?l&&B.indexOf(e.match_url)>=0&&(t=!0):l&&B.indexOf(e.match_url)>=0?t=!0:null==e.match_url&&l&&(t=!0)}else"r_domain_containing"==e.filter_type&&(e.host&&A.indexOf(e.host)>=0?t=!0:A.indexOf(e.filter_value)>=0&&(t=!0));else if("ua_os"==e.filter_type&&p&&p.compareOS){var u=[e.filter_value];"winmobile"==e.filter_value?u=["windows mobile","windows phone"]:"macos"==e.filter_value?u=["mac os"]:"windesktop"==e.filter_value&&(u=["windows"]),u.indexOf(p.compareOS)>=0&&(t=!0)}else if("ua_browser"==e.filter_type&&p&&p.compareBrowser){var u=[e.filter_value];"chrome"==e.filter_value?u=["chrome","chromium"]:"ie"==e.filter_value?u=["ie","ie mobile"]:"opera"==e.filter_value?u=["opera","opera mini","opera mobile","opera tablet"]:"safari"==e.filter_value&&(u=["safari","mobile safari"]),u.indexOf(p.compareBrowser)>=0&&(t=!0)}else if("ua_exact"==e.filter_type)e.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(t=!0);else if("ua_beginning"==e.filter_type)0==navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())&&(t=!0);else if("ua_containing"==e.filter_type)navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())>=0&&(t=!0);else if("hash_exact"==e.filter_type){var m="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;m.toLowerCase()==y.toLowerCase()&&(t=!0)}else if("hash_beginning"==e.filter_type){var m="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;0==y.toLowerCase().indexOf(m.toLowerCase())&&(t=!0)}else if("hash_containing"==e.filter_type){var m="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;y.toLowerCase().indexOf(m.toLowerCase())>=0&&(t=!0)}else"all"==e.filter_type&&(t=!0);t||(s=!0)}),!s)return i=!0,!1}),i},N=r(s,"rule_type","include",!1);if(N&&N.length){var z={},j=0;N.forEach(function(e){e.group_id&&e.group_id.length?z.hasOwnProperty(e.group_id)?z[e.group_id].push(e):z[e.group_id]=[e]:(z[j]=[e],j+=1)}),currentUrlIncluded=R(z)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var F=r(s,"rule_type","exclude",!1),M=!1;if(!F||!F.length)return!0;var H={},j=0;return F.forEach(function(e){e.group_id&&e.group_id.length?H.hasOwnProperty(e.group_id)?H[e.group_id].push(e):H[e.group_id]=[e]:(H[j]=[e],j+=1)}),!(M=R(H))}return!0}}),sumo.define("selectorator",["jquery"],function(e){var t,i,s,o,n,a,r,l;return r=e.map,n=e.extend,a=e.inArray,s=function(e,t){return-1!==a(e,t)},o=function(e){return e.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},i=function(e,t){return r(e,function(e){return e===t?null:e})},l=function(e){return r(e,function(t,i){return parseInt(i,10)===parseInt(e.indexOf(t),10)?t:null})},t=function(){function t(t,i){this.element=t,this.options=n(n({},e.selectorator.options),i),this.cachedResults={}}return t.prototype.query=function(t){var i;return(i=this.cachedResults)[t]||(i[t]=e(t.replace(/#([^\s]+)/g,"[id='$1']")))},t.prototype.getProperTagName=function(){return this.element[0]?"span"==this.element[0].tagName.toLowerCase()&&this.getIgnore("class")&&s(this.element.attr("class"),this.getIgnore("class"))?this.hasParent()?this.element.parent()[0].tagName.toLowerCase():null:this.element[0].tagName.toLowerCase():null},t.prototype.hasParent=function(){return this.element&&0<this.element.parent().size()},t.prototype.isElement=function(){var e;return(e=this.element[0])&&e.nodeType===e.ELEMENT_NODE},t.prototype.validate=function(e,t,i,o){var n,a;if(null==i&&(i=!0),null==o&&(o=!1),a=this.query(e),i&&1<a.size()||!i&&0===a.size()){if(!t||-1!==e.indexOf(":"))return null;if(n=o?" > ":" ",e=t+n+e,a=this.query(e),i&&1<a.size()||!i&&0===a.size())return null}return s(this.element[0],a.get())?e:null},t.prototype.generate=function(){var e,t,s,o,n;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(t=[],n=[this.generateSimple,this.generateAncestor,this.generateRecursive],s=0,o=n.length;s<o;s++)if(e=n[s],(t=l(i(e.call(this))))&&t.length>0)return t;return l(t)},t.prototype.generateText=function(){var e,t,s,o,n;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(t=[],n=[this.generateTextSelector],s=0,o=n.length;s<o;s++)if(e=n[s],(t=l(i(e.call(this))))&&t.length>0)return t;return l(t)},t.prototype.generateAncestor=function(){var i,s,o,n,a,r,l,c,u,m,h,d,p,f;for(a=[],f=this.element.parents(),c=0,h=f.length;c<h;c++){for(s=f[c],i=!0,l=this.generateSimple(null,!1),u=0,d=l.length;u<d;u++)for(r=l[u],n=new t(e(s),this.options).generateSimple(null,!1),m=0,p=n.length;m<p;m++)o=n[m],e.merge(a,this.generateSimple(o,!0,i));i=!1}return a},t.prototype.generateSimple=function(e,t,s){var o,n,a,l,c,u,m,h;for(a=this,l=a.getProperTagName(),c=function(i){return a.validate(i,e,t,s)},h=[[a.getIdSelector],[a.getClassSelector],[a.getIdSelector,!0],[a.getClassSelector,!0],[a.getNameSelector],[function(){return[a.getProperTagName()]}]],u=0,m=h.length;u<m;u++)if(o=h[u],n=o[0].call(a,o[1])||[],n=i(r(n,c)),n.length>0)return n;return[]},t.prototype.generateTextSelector=function(e,t,s){var o,n,a,r,l,c,u,m;for(a=this,r=a.getProperTagName(),l=function(i){return a.validate(i,e,t,s)},m=[[a.getIdSelector],[a.getTextSelector,!0],[function(){return[a.getProperTagName()]}]],c=0,u=m.length;c<u;c++)if(o=m[c],n=o[0].call(a,o[1])||[],n=i(n),n.length>0)return n;return[]},t.prototype.generateRecursive=function(){var e,i,s,o;return o=this.getProperTagName(),-1!==o.indexOf(":")&&(o="*"),i=this.element.parent(),s=new t(i).generate()[0],e=i.children(o).index(this.element),o=o+":eq("+e+")",""!==s&&(o=s+" > "+o),[o]},t.prototype.getIdSelector=function(e){var t;return null==e&&(e=!1),e=e?this.getProperTagName():"",t=this.element.attr("id"),"string"==typeof t&&t.trim().length&&!s(t,this.getIgnore("id"))&&0!=t.indexOf("yui")?[e+"#"+o(t)]:null},t.prototype.getTextSelector=function(i){var s="";if(this.hasParent()){var o=this.element.parent()[0];i=i?o.tagName.toLowerCase():"",o=e(o);var n=o.text();"string"==typeof n&&n.length>0&&(s=i+":similar("+n+")")}var a=this.element.prev();if(a.length){var r=new t(a).generateSimple(null,!1);r&&(s+=" > "+r)}return s?[s]:null},t.prototype.getClassSelector=function(e){var t,i,n;return null==e&&(e=!1),n=this.getProperTagName(),/^(body|html)$/.test(n)?null:(e=e?n:"",i=this.getIgnore("class"),t=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),r(t,function(t){return t&&!s(t,i)?e+"."+o(t):null}))},t.prototype.getNameSelector=function(){var e,t;return t=this.getProperTagName(),e=this.element.attr("name"),e&&!s(e,this.getIgnore("name"))?[t+"[name='"+e+"']"]:null},t.prototype.getIgnore=function(e){var t,i,s;return i=this.options.ignore||{},t="class"===e?"classes":e+"s",s=i[e]||i[t],"string"==typeof s?[s]:s},t}(),e.selectorator={options:{},unique:l,clean:i,escapeSelector:o},e.fn.selectorator=function(i){return new t(e(this),i)},e.fn.getSelector=function(e){return this.selectorator(e).generate()},e.fn.getTextSelector=function(e){return this.selectorator(e).generateText()},this}),sumo.define("range",["jquery"],function(e){var t=function(e){return e.fn.compare=function(e){try{e=e.jquery?e[0]:e}catch(e){return null}if(window.HTMLElement){var t=HTMLElement.prototype.toString.call(e);if("[xpconnect wrapped native prototype]"==t||"[object XULElement]"==t||"[object Window]"===t)return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(e);if(this[0]==document&&e!=document)return 8;var i=(this[0]!==e&&this[0].contains(e)&&16)+(this[0]!=e&&e.contains(this[0])&&8),s=document.documentElement;return this[0].sourceIndex&&(i+=this[0].sourceIndex<e.sourceIndex&&4,i+=this[0].sourceIndex>e.sourceIndex&&2,i+=(this[0].ownerDocument!==e.ownerDocument||this[0]!=s&&this[0].sourceIndex<=0||e!=s&&e.sourceIndex<=0)&&1),i},e}(e),i=function(e){e.fn.range=function(){return e.Range(this[0])};var t=function(e){return e.replace(/([a-z])([a-z]+)/gi,function(e,t,i){return t+i.toLowerCase()}).replace(/_/g,"")},i=function(e){return e.replace(/^([a-z]+)_TO_([a-z]+)/i,function(e,t,i){return i+"_TO_"+t})},s=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},o=function(e,t,i){},n={};e.Range=function(t){if(this.constructor!==e.Range)return new e.Range(t);t&&t.jquery&&(t=t[0]),!t||t.nodeType?(this.win=s(t),this.win.document.createRange?this.range=this.win.document.createRange():this.win&&this.win.document.body&&this.win.document.body.createTextRange&&(this.range=this.win.document.body.createTextRange()),t&&this.select(t)):null!=t.clientX||null!=t.pageX||null!=t.left?this.moveToPoint(t):t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length?this.moveToPoint(t.originalEvent.touches[0]):t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length?this.moveToPoint(t.originalEvent.changedTouches[0]):this.range=t},e.Range.current=function(t){var i=s(t),o;return i.getSelection?(o=i.getSelection(),new e.Range(o.rangeCount?o.getRangeAt(0):i.document.createRange())):new e.Range(i.document.selection.createRange())},e.extend(e.Range.prototype,{moveToPoint:function(t){var i=t.clientX,s=t.clientY;if(!i){var o=v();i=(t.pageX||t.left||0)-o.left,s=(t.pageY||t.top||0)-o.top}if(n.moveToPoint)return this.range=e.Range().range,this.range.moveToPoint(i,s),this;for(var r=document.elementFromPoint(i,s),l=0;l<r.childNodes.length;l++){var c=r.childNodes[l];if(3===c.nodeType||4===c.nodeType)for(var u=e.Range(c),m=u.toString().length,h=1;h<m+1;h++){var d=u.end(h).rect();if(d.left<=i&&d.left+d.width>=i&&d.top<=s&&d.top+d.height>=s)return u.start(h-1),this.range=u.range,this}}var p;a(r.childNodes,function(i){var s=e.Range(i);if(s.rect().top>t.clientY)return!1;p=s}),p?(p.start(p.toString().length),this.range=p.range):this.range=e.Range(r).range},window:function(){return this.win||window},overlaps:function(t){t.nodeType&&(t=e.Range(t).select(t));var i=this.compare("START_TO_START",t),s=this.compare("END_TO_END",t);return i<=0&&s>=0||(i>=0&&this.compare("START_TO_END",t)<=0||this.compare("END_TO_START",t)>=0&&s<=0)},collapse:function(e){return this.range.collapse(void 0===e||e),this},toString:function(){return"string"==typeof this.range.text?this.range.text:this.range.toString()},start:function(t){if(void 0===t){if(this.range.startContainer)return{container:this.range.startContainer,offset:this.range.startOffset};var i=this.clone().collapse().parent(),s=e.Range(i).select(i).collapse();return s.move("END_TO_START",this),{container:i,offset:s.toString().length}}if(this.range.setStart)if("number"==typeof t)this.range.setStart(this.range.startContainer,t);else if("string"==typeof t){var o=m(this.range.startContainer,this.range.startOffset,parseInt(t,10));this.range.setStart(o.node,o.offset)}else this.range.setStart(t.container,t.offset);else if("string"==typeof t)this.range.moveStart("character",parseInt(t,10));else{var n=this.start().container,a;"number"==typeof t?a=t:(n=t.container,a=t.offset);var r=e.Range(n).collapse();r.range.move(a),this.move("START_TO_START",r)}return this},end:function(t){if(void 0===t){if(this.range.startContainer)return{container:this.range.endContainer,offset:this.range.endOffset};var i=this.clone().collapse(!1).parent(),s=e.Range(i).select(i).collapse();return s.move("END_TO_END",this),{container:i,offset:s.toString().length}}if(this.range.setEnd)if("number"==typeof t)this.range.setEnd(this.range.endContainer,t);else if("string"==typeof t){var o=m(this.range.endContainer,this.range.endOffset,parseInt(t,10));this.range.setEnd(o.node,o.offset)}else this.range.setEnd(t.container,t.offset);else if("string"==typeof t)this.range.moveEnd("character",parseInt(t,10));else{var n=this.end().container,a;"number"==typeof t?a=t:(n=t.container,a=t.offset);var r=e.Range(n).collapse();r.range.move(a),this.move("END_TO_START",r)}return this},parent:function(){if(this.range.commonAncestorContainer)return this.range.commonAncestorContainer;var t=this.range.parentElement(),i=this.range;return a(t.childNodes,function(s){if(e.Range(s).range.inRange(i))return t=s,!1}),t},rect:function(t){var i=this.range.getBoundingClientRect();if(i.height||i.width||(i=this.range.getClientRects()[0]),"page"===t){var s=v();i=e.extend({},i),i.top+=s.top,i.left+=s.left}return i},rects:function(t){for(var i=e.map(e.makeArray(this.range.getClientRects()).sort(function(e,t){return t.width*t.height-e.width*e.height}),function(t){return e.extend({},t)}),s=0,o,n=i.length;s<i.length;){var a=i[s],r=!1;for(o=s+1;o<i.length;)if(g(a,i[o])){if(i[o].width){r=i[o];break}i.splice(o,1)}else o++;r?i.splice(s,1):s++}if("page"==t){var l=v();return e.each(i,function(e,t){t.top+=l.top,t.left+=l.left})}return i}}),function(){var s=e.Range.prototype,o=e.Range().range;s.compare=o.compareBoundaryPoints?function(e,t){return this.range.compareBoundaryPoints(this.window().Range[i(e)],t.range)}:function(e,i){return this.range.compareEndPoints(t(e),i.range)},s.move=o.setStart?function(e,t){var i=t.range;switch(e){case"START_TO_END":this.range.setStart(i.endContainer,i.endOffset);break;case"START_TO_START":this.range.setStart(i.startContainer,i.startOffset);break;case"END_TO_END":this.range.setEnd(i.endContainer,i.endOffset);break;case"END_TO_START":this.range.setEnd(i.startContainer,i.startOffset)}return this}:function(e,i){return this.range.setEndPoint(t(e),i.range),this};var n=o.cloneRange?"cloneRange":"duplicate",r=o.selectNodeContents?"selectNodeContents":"moveToElementText";s.clone=function(){return e.Range(this.range[n]())},s.select=o.selectNodeContents?function(e){if(e)this.range.selectNodeContents(e);else{var t=this.window().getSelection();t.removeAllRanges(),t.addRange(this.range)}return this}:function(e){if(e)if(3===e.nodeType){var t=e.parentNode,i=0,s;a(t.childNodes,function(t){if(t===e)return s=i+t.nodeValue.length,!1;i+=t.nodeValue.length}),this.range.moveToElementText(t),this.range.moveEnd("character",s-this.range.text.length),this.range.moveStart("character",i)}else this.range.moveToElementText(e);else this.range.select();return this}}();var a=function(e,t){for(var i,s,o=0;e[o];o++)if(i=e[o],3===i.nodeType||4===i.nodeType){if(!1===t(i))return!1}else if(8!==i.nodeType&&!1===a(i.childNodes,t))return!1},r=function(e){return 3===e.nodeType||4===e.nodeType},l=function(e,t){return function(i,s){return i[e]&&!s?r(i[e])?i[e]:arguments.callee(i[e]):i[t]?r(i[t])?i[t]:arguments.callee(i[t]):i.parentNode?arguments.callee(i.parentNode,!0):void 0}},c=l("firstChild","nextSibling"),u=l("lastChild","previousSibling"),m=function(e,t,i){var s=i<0?u:c;return r(e)?t+i<0?h(s(e),t+i):h(e,t+i):(e=e.childNodes[t]?e.childNodes[t]:e.lastChild,r(e)||(e=s(e)),h(e,i))},h=function(e,t){var i=t<0?u:c;for(t=Math.abs(t);e&&t>=e.nodeValue.length;)t-=e.nodeValue.length,e=i(e);return{node:e,offset:i===c?t:e.nodeValue.length-t}},d,p=function(e){return null==d&&(d="isElementContentWhitespace"in e),d?e.isElementContentWhitespace:3===e.nodeType&&""==e.data.trim()},f=function(e,t){return e.left<=t.clientX&&e.left+e.width>=t.clientX&&e.top<=t.clientY&&e.top+e.height>=t.clientY},g=function(e,t){return f(e,{clientX:t.left,clientY:t.top})&&f(e,{clientX:t.left+t.width,clientY:t.top})&&f(e,{clientX:t.left,clientY:t.top+t.height})&&f(e,{clientX:t.left+t.width,clientY:t.top+t.height})},v=function(e){var e=e||window;return doc=e.document.documentElement,body=e.document.body,{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};return n.moveToPoint=!!e.Range().range.moveToPoint,e}(e,t)}),Function.prototype.debounce=function(e){var t=this,i=null,s=e;return function(){function e(){t.apply(o,n),i=null}var o=this,n=arguments;i&&clearTimeout(i),i=setTimeout(e,s)}},Function.prototype.throttle=function(e){var t=this,i=null,s=e;return function(){var e=this,o=arguments,n=Date.now();(!i||n-i>=s)&&(i=n,t.apply(e,o))}},sumo.define("limit",function(){}),sumo.define("es6!services/highlighter/index",["jquery","jquery.cookie","plugins/text!highlighter/templates/highlighter.html","plugins/text!highlighter/templates/highlighter_mobile.html","twitter-text","color","jquery.style","jquery.displayrules","selectorator","range","limit"],function(e,t,i,s,o,n){function a(){return e.browser.mobile&&("ontouchstart"in window||!!navigator.msMaxTouchPoints)}function r(t,i){var s=e._data(t,"events");return!!(s&&s[i]||t.onclick)}function l(t,i){var s=e(t).html(),o=e(t).html(),n=[];e(t).find("iframe").each(function(t){var i=document.getElementById(e(this).attr("id"));i&&i.contentWindow&&n.push([e(this).attr("id"),i.contentWindow.document])});var a=[],r=[],l=/<[^>]*>/,u=i.entry;if(u=u.replace(/\xA0/g," "),a=s.match(/<[^>]*>|&nbsp;/gi),r=[],a)for(var m=0;m<a.length;m++){if(0==m)var h=0;else var h=r[m-1];var d=s.substring(h).indexOf(a[m]),p=h+d;r.push(p),s="&nbsp;"==a[m].toLowerCase()?s.substring(0,p)+" "+s.substring(p+a[m].length):s.substring(0,p)+s.substring(p+a[m].length)}var u=e("<div/>").html(u).text().trim();u=u.replace(/\xA0/g," ");var f=s.indexOf(u);if(f>-1){var g,v,b,y,w,p,_,x,k,S,m,p,C,m,p,T;!function(){var h=function e(t,i){var o=s.substring(t,i).search(l);o>-1&&(anyHTMLmatch=s.substring(t+o,i).match(l)[0],s=s.substring(0,o+t)+b+anyHTMLmatch+g+s.substring(t+o+anyHTMLmatch.length),t+=o+g.length+anyHTMLmatch.length+b.length,i+=g.length+b.length,e(t,i))};for(g="<span class='sumo_twilighter_highlighted twilighter-"+i.hash+"'>",v="<span class='sumo_twilighter_shares'>"+(0===i.share_count?"":c(i.share_count))+"</span></span>",b="</span>",y=f+u.length,s=s.substring(0,f)+g+s.substring(f,y)+v+s.substring(y),w=0,p=r[m],_=0,x=0,k=[],S=[],m=r.length-1;m>=0;m--)p=r[m],p<f&&(_+=a[m].length,"&nbsp;"==a[m].toLowerCase()&&(_-=1)),p<y&&(r[m]>=f&&(k.push(a[m]),S.push(p-f+g.length)),x+=a[m].length,"&nbsp;"==a[m].toLowerCase()&&(x-=1));for(C=s.substring(f,y+g.length+v.length),m=0;m<S.length;m++)C=C.substring(0,S[m])+k[m]+C.substring(S[m]+("&nbsp;"==k[m].toLowerCase()?1:0));s=o.substring(0,_+f)+C+o.substring(x+y),p=s.indexOf(g)+g.length,T=s.indexOf(v),p>-1&&T>-1&&(h(p,T),t.innerHTML=s,n.forEach(function(e,t){var i=e[0],s=e[1],o=document.getElementById(i).contentWindow.document;o.open(),o.write("<head>"+s.head.innerHTML+"</head><body>"+s.body.innerHTML+"</body>"),o.close()}),e(t).find(".sumo_twilighter_highlighted").invert())}()}}function c(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function u(){var t=window.location.href;if(!B||U)return U&&(t=U),t;e.ajax({type:"POST",dataType:"json",url:P.sumoUrl+"/apps/twilighter/shorten",data:{site_id:P.siteId,href:t},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){return e.success?(t=e.url,U=e.url,t):t})}function m(t){var i=window.location.href,s=(location.protocol,23),o=0,n=!0;if(D){t.split(" ").reverse().forEach(function(e){o||e.match(/^https?:\/\//i)&&(o=e.length)}),(t.match(/https?:\/\//i)||t.match(/ via @/i))&&(n=!1)}if(B&&!U)e.ajax({type:"POST",dataType:"json",url:P.sumoUrl+"/apps/twilighter/shorten",data:{site_id:P.siteId,href:i},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(r){r.success&&(i=r.url,U=r.url);var l=280-s+o;R&&(D&&t.match(/ via @/i)||(l-=("@"==R[0]?5:6)+R.length));var c=t.trim();c=c.replace(/\r\n|\n|\r/g," "),(D&&n||!D&&c.length+1>l)&&(c=c.substr(0,l-2)+"…");var u=R?" via "+("@"==R[0]?"":"@")+R:"";D&&(c.match(/https?:\/\//i)&&(i=""),c.match(/ via @/i)&&(u="")),(i||u)&&(c=c+(i?" "+i:"")+u),e("#sumo_twilighter_input").val(c).data({"sumome-twilighter-url":i,"sumome-twilighter-via":u,"sumome-twilighter-msg":c}),a()||S()});else{U&&(i=U);var r=280-s+o;R&&(D&&t.match(/ via @/i)||(r-=("@"==R[0]?5:6)+R.length));var l=t.trim();l=l.replace(/\r\n|\n|\r/g," "),(D&&n||!D&&l.length+1>r)&&(l=l.substr(0,r-2)+"…");var c=R?" via "+("@"==R[0]?"":"@")+R:"";D&&(l.match(/https?:\/\//i)&&(i=""),l.match(/ via @/i)&&(c="")),(i||c)&&(l=l+(i?" "+i:"")+c),e("#sumo_twilighter_input").val(l).data({"sumome-twilighter-url":i,"sumome-twilighter-via":c,"sumome-twilighter-msg":l}),a()||S()}}function h(e){return"https://twitter.com/intent/tweet?text="+encodeURIComponent(e)+"&related="+encodeURIComponent("thesumome For your own twitter highlighter plugin")}function d(t){var i="",s=document.title,o=u();if(e('meta[property="og:description"]').attr("content")&&(s=e('meta[property="og:description"]').attr("content")),e('meta[property="og:image"]').attr("content")&&(i=e('meta[property="og:image"]').attr("content")),D){var n=e("#sumo_twilighter_input").data("sumome-twilighter-msg");if(n.indexOf(o)<0&&n.match(/https?:\/\//i)){n.split(" ").reverse().forEach(function(e){e.match(/^https?:\/\//i)&&(o=e)})}}return"https://www.facebook.com/v2.8/dialog/feed?app_id=214248668771590&display=popup&link="+encodeURIComponent(o)+"&caption="+t+"&name="+encodeURIComponent(document.title)+"&description="+encodeURIComponent(s)+"&redirect_uri="+encodeURIComponent("http:"+P.sumoUrl)+"/apps/twilighter/fbshared&picture="+i}function p(t){if(t&&t.length){var i=t.shift(),s=!1,o=!1;e(".sumo_twilighter_highlighted").each(function(t){e(e(".sumo_twilighter_highlighted")[t]).text().indexOf(i.entry)>-1?s=!0:e(e(".sumo_twilighter_highlighted")[t]).closest("[rel~=noshare]").length&&(o=!0)});var n;if(e(i.selector)&&e(i.selector).length)var n=e(i.selector);else if(i.selector){var a=/\#[^\s]+\./g,r=/\#[^\s]+/g,c=i.selector,u=c.match(a);if(u)for(var m=0,h=u.length;m<h;m++)c=c.replace(/\#[^\s]+\./,"[id="+u[m].substring(1,u[m].length-1)+"].");var u=c.match(r);if(u)for(var m=0,h=u.length;m<h;m++)c=c.replace(/\#[^\s]+/,"[id="+u[m].substring(1)+"]");e(c).length&&(n=e(c))}if(n&&!s&&!o){var d=n.html();l(n[0],i),e(".twilighter-"+i.hash).hover(function(){e(".twilighter-"+i.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+i.hash).css({cursor:"inherit"}).invert()})}window.setTimeout(function(){p(t)},0)}else e(".sumo_twilighter_shares").mousedown(function(){return!1})}function f(){e(".sumo_twilighter_highlighted").contents().unwrap()}function g(e){return 280-o.txt.getTweetLength(e)}function v(t){for(var i=e(t).attr("class").split(" "),s=0;s<i.length;s++)if("twilighter-"==i[s].substring(0,"twilighter-".length))return i[s].split("-")[1];return""}function b(t){if(D&&!P.user&&!(e(t.target).closest("#sumo_twilighter_div").length||(e(t.target).closest(".sumo_twilighter_highlighted").length||e(t.target).closest(".sumo_twilighter_shares").length)&&v(e(t.target).closest(".sumo_twilighter_highlighted"))))return void e("#sumo_twilighter_div").hide();if(e(".sumo_twilighter_shares").css("visibility","hidden"),e(t.target).closest("#sumo_twilighter_div").length||e(t.target).is("a")&&"sumo_twilighter_btn"!=e(t.target).attr("id")||e(t.target).parents("a").length||r(t.target,"click")||e(t.target).closest("[rel~=noshare]").length)return void e(".sumo_twilighter_shares").css("visibility","visible");if("selectionchange"==t.type){if(0==e.Range.current().toString().length)return void e(".sumo_twilighter_shares").css("visibility","visible");var i=e.Range.current(),s=i.parent();if(e(s).hasClass("sumo_twilighter_highlighted")&&(s=e(s).parent()[0]),s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.CDATA_SECTION_NODE||(s=s.parentNode),e(s).closest("#sumo_twilighter_div").length)return void e(".sumo_twilighter_shares").css("visibility","visible")}var o=!1;e("#sumo_twilighter_input").val(""),E="";var n={ignore:{classes:["sumo_twilighter_tweet","sumo_twilighter_highlighted"],ids:["sumo_twilighter_div"]}},l=!1;if((e(t.target).closest(".sumo_twilighter_highlighted").length||e(t.target).closest(".sumo_twilighter_shares").length)&&v(e(t.target).closest(".sumo_twilighter_highlighted"))){E=v(e(t.target).closest(".sumo_twilighter_highlighted"));var c=N[E].entry;l=!0}else var c=e.Range.current().toString();if(c=c.replace(/\xA0/g," "),E||c&&c.length>6&&c.length<250&&c.split(/[\u4e00-\u9fcc]|\s+/g).length>2)if(a()||!a()&&C!=c){if(C=c,T=c,E)$=N[E].selector;else{var i=e.Range.current();C=e.Range.current().toString().trim(),T=e.Range.current().toString().trim();var s=i.parent();e(s).hasClass("sumo_twilighter_highlighted")&&(s=e(s).parent()[0]),s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.CDATA_SECTION_NODE||(s=s.parentNode);var u=e(s).range(),h=u.toString().indexOf(C);h>0&&u.start("+"+h),u.toString().length-C.length>0&&u.end("-"+(u.toString().length-C.length));var d=u.parent();e(d).hasClass("sumo_twilighter_highlighted")&&(d=e(d).parent()[0]),d.nodeType!==Node.TEXT_NODE&&d.nodeType!==Node.CDATA_SECTION_NODE||(d=d.parentNode),$=e(d).getSelector()[0]}var p=-1;if(!E){var f=/<[^>]*>/g,g=/&nbsp;/gi;if(e($).length)elementHtml=e($)[0].innerHTML;else{var b=/\#[^\s]+\./g,y=/\#[^\s]+/g,w=$,_=w.match(b);if(_)for(var x=0,k=_.length;x<k;x++)w=w.replace(/\#[^\s]+\./,"[id="+_[x].substring(1,_[x].length-1)+"].");var _=w.match(y);if(_)for(var x=0,k=_.length;x<k;x++)w=w.replace(/\#[^\s]+/,"[id="+_[x].substring(1)+"]");e(w).length&&(elementHtml=e(w)[0].innerHTML)}if(!elementHtml)return C="",$="",E="",T="",e("#sumo_twilighter_div").hide(),void e(".sumo_twilighter_shares").css("visibility","visible");elementHtml=elementHtml.replace(/\<span class=[\'|\"]sumo_twilighter_shares[\'|\"].*?\>[-,0-9 ]+\<\/span\>/,""),elementHtml=elementHtml.replace(f,""),elementHtml=elementHtml.replace(g," "),p=elementHtml.indexOf(c)}if(p<0&&!E)return C="",$="",E="",T="",e("#sumo_twilighter_div").hide(),void e(".sumo_twilighter_shares").css("visibility","visible");D&&void 0!==N[E]&&void 0!==N[E].admin_message&&(C=N[E].admin_message),m(C),e("#sumo_twilighter_div").is(":visible")||(l?O.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"click"}):O.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"highlight"}),O.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"popup"})),div_width=e("#sumo_twilighter_div").outerWidth(),div_height=e("#sumo_twilighter_div").outerHeight(),win_height=e(window).height()+e(window).scrollTop(),win_width=e(window).width()+e(window).scrollLeft(),a()?function(){var t=function t(i,s){var o="text-width-tester",n=e("#"+o);return n.length?n.css({font:s}).html(i):(n=e('<span id="'+o+'" style="display:none;font:'+s+';">'+i+"</span>"),e("body").append(n)),{width:n.width(),height:n.height()}},i=function i(s,o,n,a){var r=e(s),l="M",c=r.height()+5,u=n+" "+o+"px "+a,m=t("M",u).height;m>c?(o=o*c/m*.9,o<16&&(o=16),u=n+" "+o+"px "+a,r.css({font:u})):r.css({font:u})},s=function t(){var s=24,o=24<.05*window.innerHeight?.05*window.innerHeight:24,n=e("#sumo_twilighter_div").width(),a=e("#sumo_twilighter_div").innerHeight(),r=o,l=Math.floor(.075*window.innerHeight),c=r<l?r:l,u=Math.floor(.65*c),m=Math.floor(.65*c);e(".sumo_highlighter_mobile").css({"background-size":a<40?"0px":Math.round(Math.round(.03*window.innerHeight)/23*158)+"px "+Math.round(.03*window.innerHeight)+"px"}),e(".sumo_twilighter_m_fb .btn-icon").css({"background-size":m+"px "+u+"px",height:u+"px",width:m+"px",left:Math.floor((l-m)/2)-1+"px",top:Math.round((r-u)/2)-1+"px"}),e(".sumo_twilighter_m_tweet .btn-icon").css({"background-size":m+"px "+u+"px",height:u+"px",width:m+"px",left:Math.floor((l-m)/2)-1+"px",top:Math.round((r-u)/2)-1+"px"}),e(".sumo_twilighter_m_fb a").css({height:r+"px",width:l+"px"}),e(".sumo_twilighter_m_tweet a").css({height:r+"px",width:l+"px"}),e(".sumo_highlighter_m_right").css({width:2*l+8+"px"}),e(".sumo_twilighter_m_input_div").css({height:o+"px"}),i(document.getElementById("sumo_twilighter_input"),200,"normal","Georgia, serif")};e("#sumo_twilighter_div").css(A).show(),s(),e("#sumo_twilighter_input").focus(function(e){s()}),e(window).resize(function(t){e(":focus").hasClass("sumo_twilighter_m_input")||s()}.debounce(300))}():(A.top<0?e("#sumo_twilighter_div").css({top:0}):A.top+div_height>win_height?e("#sumo_twilighter_div").css({top:win_height-div_height}):e("#sumo_twilighter_div").css({top:A.top}),D&&P.user?e(".sumo_twilighter_admin_highlight").show():e(".sumo_twilighter_admin_highlight").hide(),P.user?e(".sumo_twilighter_admin").show():e(".sumo_twilighter_admin").hide(),A.left<0?e("#sumo_twilighter_div").css({left:0}).show():A.left+div_width>win_width?e("#sumo_twilighter_div").css({
left:win_width-div_width}).show():e("#sumo_twilighter_div").css({left:A.left}).show())}else e(t.target).is("#sumo_twilighter_div")||e(t.target).parents("#sumo_twilighter_div").length||(C="",$="",E="",T="",e("#sumo_twilighter_div").css(A).hide(),e(".sumo_twilighter_shares").css("visibility","visible"));else C="",$="",E="",T="",e("#sumo_twilighter_div").hide(),e(".sumo_twilighter_shares").css("visibility","visible");e(".sumo_twilighter_shares").css("visibility","visible")}function y(){var t;if(e($).length)var t=e($);else{var i=/\#[^\s]+\./g,s=/\#[^\s]+/g,o=$,n=o.match(i);if(n)for(var a=0,r=n.length;a<r;a++)o=o.replace(/\#[^\s]+\./,"[id="+n[a].substring(1,n[a].length-1)+"].");var n=o.match(s);if(n)for(var a=0,r=n.length;a<r;a++)o=o.replace(/\#[^\s]+/,"[id="+n[a].substring(1)+"]");e(o).length&&(t=e(o))}t&&(t.find(".sumo_twilighter_highlighted").each(function(t,i){e(i).replaceWith(e(i).html())}),t.find(".sumo_twilighter_shares").each(function(t,i){e(i).remove()}))}function w(t){var i=e("#sumo_twilighter_input").data("sumome-twilighter-url"),s=e("#sumo_twilighter_input").data("sumome-twilighter-via"),o=e("#sumo_twilighter_input").val().replace(i,"").replace(s,"").trim();e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:P.sumoUrl+"/apps/twilighter/admin/save",data:{session_id:P.sessionId,site_id:P.siteId,entry:C,pathname:location.pathname,selector:$,hash:E,message:o},success:function t(i){if(i.entry){var s=i.entry;if(N[s.hash]=s,"[object Array]"===Object.prototype.toString.call(s.selector))var o=s.selector[0];else var o=s.selector;var n;if(e(o)&&e(o).length)var n=e(o);else if(o){var a=/\#[^\s]+\./g,r=/\#[^\s]+/g,c=o,u=c.match(a);if(u)for(var m=0,h=u.length;m<h;m++)c=c.replace(/\#[^\s]+\./,"[id="+u[m].substring(1,u[m].length-1)+"].");var u=c.match(r);if(u)for(var m=0,h=u.length;m<h;m++)c=c.replace(/\#[^\s]+/,"[id="+u[m].substring(1)+"]");e(c).length&&(n=e(c))}n&&(n.find(".sumo_twilighter_highlighted").each(function(t,i){e(i).replaceWith(e(i).html())}),n.find(".sumo_twilighter_shares").each(function(t,i){e(i).remove()}),n&&(l(n[0],s),e("#twilighter-"+s.hash).mousedown(b),e(".twilighter-"+s.hash).hover(function(){e(".twilighter-"+s.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+s.hash).css({cursor:"inherit"}).invert()})))}C="",$="",E="",e("#sumo_twilighter_div").css(I).hide()}})}function _(t){e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:P.sumoUrl+"/apps/twilighter/delete",data:{site_id:P.siteId,entry:C,pathname:location.pathname,selector:$,hash:E},success:function t(i){i.success&&(y(),e("#sumo_twilighter_div").css(I).hide())}})}function x(t){function i(e,t,i,s){var o=void 0!=window.screenLeft?window.screenLeft:screen.left,n=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var a=width/2-i/2+o,r=height/2-s/2+n,l=window.open(e,t,"width="+i+", height="+s+", top="+r+", left="+a);window.focus&&l.focus()}e(t.target).is("a")&&0==e(t.target).closest("#sumo_twilighter_btn").length||(O.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"twitter"}),i(h(e("#sumo_twilighter_input").val()),"Tweet",575,350),e.ajax({type:"POST",dataType:"json",url:P.sumoUrl+"/apps/twilighter/share",data:{entry:C,siteId:P.siteId,pathname:location.pathname,selector:$,sessionId:P.sessionId,clickType:"tweet",hash:E},xhrFields:{withCredentials:!1},crossDomain:!0}).success(function(t){if(t.entry){var i=t.entry;if(N[i.hash]=i,"[object Array]"===Object.prototype.toString.call(i.selector))var s=i.selector[0];else var s=i.selector;var o;if(e(s)&&e(s).length)var o=e(s);else if(s){var n=/\#[^\s]+\./g,a=/\#[^\s]+/g,r=s,c=r.match(n);if(c)for(var u=0,m=c.length;u<m;u++)r=r.replace(/\#[^\s]+\./,"[id="+c[u].substring(1,c[u].length-1)+"].");var c=r.match(a);if(c)for(var u=0,m=c.length;u<m;u++)r=r.replace(/\#[^\s]+/,"[id="+c[u].substring(1)+"]");e(r).length&&(o=e(r))}o&&(o.find(".sumo_twilighter_highlighted").each(function(t,i){e(i).replaceWith(e(i).html())}),o.find(".sumo_twilighter_shares").each(function(t,i){e(i).remove()}),o&&(l(o[0],i),e("#twilighter-"+i.hash).mousedown(b),e(".twilighter-"+i.hash).hover(function(){e(".twilighter-"+i.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+i.hash).css({cursor:"inherit"}).invert()})))}C="",$="",E="",e("#sumo_twilighter_div").css(I).hide()}))}function k(t){function i(e,t,i,s){var o=void 0!=window.screenLeft?window.screenLeft:screen.left,n=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var a=width/2-i/2+o,r=height/2-s/2+n,l=window.open(e,t,"width="+i+", height="+s+", top="+r+", left="+a);window.focus&&l.focus()}e(t.target).is("a")&&0==e(t.target).closest("#sumo_twilighter_btn_fb").length||(O.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"facebook"}),i(d(T),"Facebook Share",575,350),e.ajax({type:"POST",dataType:"json",url:P.sumoUrl+"/apps/twilighter/share",data:{entry:C,siteId:P.siteId,pathname:location.pathname,selector:$,sessionId:P.sessionId,clickType:"tweet",hash:E},xhrFields:{withCredentials:!1},crossDomain:!0}).success(function(t){if(t.entry){var i=t.entry;if(N[i.hash]=i,"[object Array]"===Object.prototype.toString.call(i.selector))var s=i.selector[0];else var s=i.selector;if(!e(s).length){var o=/\#[^\s]+\./g,n=/\#[^\s]+/g,a=s,r=a.match(o);if(r)for(var c=0,u=r.length;c<u;c++)a=a.replace(/\#[^\s]+\./,"[id="+r[c].substring(1,r[c].length-1)+"].");var r=a.match(n);if(r)for(var c=0,u=r.length;c<u;c++)a=a.replace(/\#[^\s]+/,"[id="+r[c].substring(1)+"]");e(a).length&&(s=a)}e(s).find(".sumo_twilighter_highlighted").each(function(t,i){e(i).replaceWith(e(i).html())}),e(s).find(".sumo_twilighter_shares").each(function(t,i){e(i).remove()}),e(s)&&e(s).length&&(l(e(s)[0],i),e("#twilighter-"+i.hash).mousedown(b),e(".twilighter-"+i.hash).hover(function(){e(".twilighter-"+i.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+i.hash).css({cursor:"inherit"}).invert()}))}C="",$="",E="",e("#sumo_twilighter_div").hide()}))}function S(){var t=g(e("#sumo_twilighter_input").val());e(".sumo_twilighter_remaining").text(t),t<0?e(".sumo_twilighter_remaining").css("color","red"):e(".sumo_twilighter_remaining").css("color",q)}var C,T,E,$,I,L,A,O,P,B=!1,D=!1,U,R="",N={},z="#f0f0f0",j="#4c66a4",F="#3484bf",M="white",H="white",q="#999",W=!1,Q,X=!1;return function(t){(e.browser=e.browser||{}).mobile=/(android|bb\d+|meego).+mobile|android|ipad|playbook|silk|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),e.fn.invert=function(e){var e=e||"0.15",t="color";if(this.css(t)){var i=new n.RGBColor(this.css(t));i.ok&&this.css("background-color","rgba("+i.r+","+i.g+","+i.b+","+e+")")}},{settings:{},initialize:function t(i){this.api.on("331c6750-848e-4469-b1bb-bfbb4fa4cd99/service/reload",e.proxy(function(){this.load(!0,null)},this)),this.load(!1,i)},load:function t(o,r){void 0!==o&&o&&(e(".sumo_twilighter_shares").remove(),f());var l;O=this.api,P=this.sumoProperties,Q=P.baseUrl+"images/apps/331c6750-848e-4469-b1bb-bfbb4fa4cd99/";var c={type:"POST",dataType:"json",url:P.sumoUrl+"/services",data:{highlighterService:!0,site_id:P.siteId,pathname:location.pathname,geoLocation:P.geoLocation,pageViews:P.views,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0},u=null;u=r?function(){return{done:function e(t){t({highlighterService:r})}}}:e.ajax,u(c).done(e.proxy(function(t){var o=t.highlighterService;if(o&&"success"in o&&o.success&&(e.extend(this.settings,o),this.settings.ctry=!(!P.geoLocation||!P.geoLocation.ctry)&&P.geoLocation.ctry,this.settings.views=P.views?P.views:1,this.settings.reflink="https://sumo.com/?src=sm-hl-"+P.siteId+"&utm_source=sumo-powered-by&utm_medium=highlighter&utm_campaign="+P.siteId,e.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views))){if(o.entries&&o.entries.length&&(l=o.entries,l.forEach(function(e){N[e.hash]=e}),window.setTimeout(function(){p(l.slice())},0)),void 0!==o.useUrlShortener&&(B=o.useUrlShortener),void 0!==o.useAdminHighlights&&(D=o.useAdminHighlights),void 0!==o.viaTwitterHandle&&o.viaTwitterHandle&&o.viaTwitterHandle.trim()&&(R=o.viaTwitterHandle.trim()),o.modalColor&&(z=o.modalColor),o.fbButtonColor&&(j=o.fbButtonColor),o.twButtonColor&&(F=o.twButtonColor),"noSumoBranding"in o&&(X=o.noSumoBranding),M=n.whiteOrBlack(j),H=n.whiteOrBlack(F),a()?(e("body").append(s),e(".sumo_twilighter_m_fb").on("click",k),e(".sumo_twilighter_m_tweet").on("click",x),e(".sumo_highlighter_mobile").css("background-color",z,"important"),e(".sumo_twilighter_m_fb a").css("background-color",j,"important"),e(".sumo_twilighter_m_tweet a").css("background-color",F,"important"),e(".sumo_twilighter_m_fb .btn-text").css("color",M,"important"),e(".sumo_twilighter_m_tweet .btn-text").css("color",H,"important"),e(".sumo_twilighter_m_fb .btn-icon").css("background-image","url("+Q+"facebook-"+M+"-60.png)","important"),e(".sumo_twilighter_m_tweet .btn-icon").css("background-image","url("+Q+"twitter-"+H+"-60.png)","important")):(e("body").append(i),X?e(".sumo_highlighter_desktop").css("padding","15px"):e(".sumo_twilighter_remaining").before('<a target="_blank" class="sumo_twilighter_logo" href="'+this.settings.reflink+'">Powered by Sumo</a>'),e(".sumo_twilighter_fb").on("click",k),e(".sumo_twilighter_tweet").on("click",x),q=n.shadeColor(z,"light"==n.lightOrDark(z)?-45:45),e(".sumo_highlighter_desktop").css("background-color",z,"important"),e(".sumo_twilighter_remaining").css("color",q,"important"),e(".sumo_twilighter_logo").css("color",q,"important"),e(".sumo_twilighter_admin_highlight").find("a").css("color",q,"important"),e(".sumo_twilighter_admin").find("a").css("color",q,"important"),e(".sumo_twilighter_fb a").css("background-color",j,"important"),e(".sumo_twilighter_tweet a").css("background-color",F,"important"),e(".sumo_twilighter_fb .btn-text").css("color",M,"important"),e(".sumo_twilighter_tweet .btn-text").css("color",H,"important"),e(".sumo_twilighter_fb .btn-icon").attr("src",Q+"facebook-"+M+"-60.png"),e(".sumo_twilighter_tweet .btn-icon").attr("src",Q+"twitter-"+H+"-60.png")),D&&P.user&&e(".sumo_twilighter_admin_highlight").find("a").on("click",w),P.user&&e(".sumo_twilighter_admin").find("a").on("click",_),a()||e("#sumo_twilighter_input").keyup(function(){S()}),W)return;a()?(e(document).on("selectionchange",function(t){var i=0,s=0;if(window.getSelection&&document.createRange&&void 0!==document.createRange().getBoundingClientRect){var o=window.getSelection();if(o.rangeCount>0){var n=o.getRangeAt(0).getBoundingClientRect();i=n.left,s=n.top}}else if(document.selection&&"Control"!=document.selection.type){var a=document.selection.createRange();i=a.boundingLeft,s=a.boundingTop}L={top:s/e(window).height()>=.5?0:"auto",bottom:s/e(window).height()>=.5?"auto":0,left:(e(window).width()+e(window).scrollLeft())/2-e("#sumo_twilighter_div").outerWidth()/2},A=L,b(t.originalEvent)}),e(window).on("touchstart",function(t){e(t.target).on("touchend",function(t){var i=t.target;L={top:(i.getBoundingClientRect().top+i.getBoundingClientRect().height/2)/e(window).height()>=.5?0:"auto",bottom:(i.getBoundingClientRect().top+i.getBoundingClientRect().height/2)/e(window).height()>=.5?"auto":0,left:(e(window).width()+e(window).scrollLeft())/2-e("#sumo_twilighter_div").outerWidth()/2},A=L,b(t),e(t.target).off("touchend")}),e(t.target).on("touchmove",function(t){e(t.target).off("touchend")})}),e(window).on("touchmove",function(t){e("#sumo_twilighter_div").is(":visible")&&!e(t.target).closest("#sumo_twilighter_div").length&&(C="",$="",E="",e("#sumo_twilighter_div").hide())})):(e(window).mousemove(function(e){I={top:e.pageY,left:e.pageX},A=I}.throttle(150)),e(window).on("mouseup",function(e){1===e.which&&b(e)})),W=!0}},this))}}}),sumo.define("htmlParser",[],function(){function e(e,a){e=e||"",a=a||{};for(var r in t)t.hasOwnProperty(r)&&(a.autoFix&&(a["fix_"+r]=!0),a.fix=a.fix||a["fix_"+r]);var l=[],c=document.createElement("div"),u=function(e){return"string"==typeof e&&-1!==e.indexOf("&")?(c.innerHTML=e,c.textContent||c.innerText||e):e},m=function(t){e+=t},h=function(t){e=t+e},d={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},p={comment:function(){var t=e.indexOf("--\x3e");if(t>=0)return{content:e.substr(4,t-1),length:t+3}},endTag:function(){var t=e.match(s);if(t)return{tagName:t[1],length:t[0].length}},atomicTag:function(){var t=p.startTag();if(t){var i=e.slice(t.length);if(i.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var s=i.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(s)return{tagName:t.tagName,attrs:t.attrs,content:s[1],length:s[0].length+t.length}}}},startTag:function(){if(-1===e.indexOf(">"))return null;var t=e.match(i);if(t){var s={},a={},r=t[2];return t[2].replace(o,function(e,t){if(arguments[2]||arguments[3]||arguments[4]||arguments[5])if(arguments[5])s[arguments[5]]="",a[t]=!0;else{var i=arguments[2]||arguments[3]||arguments[4]||n.test(t)&&t||"";s[t]=u(i)}else s[t]=null;r=r.replace(e,"")}),{tagName:t[1],attrs:s,booleanAttrs:a,rest:r,unary:!!t[3],length:t[0].length}}},chars:function(){var t=e.indexOf("<");return{length:t>=0?t:e.length}}},f=function(){for(var t in d)if(d[t].test(e)){var i=p[t]();return i?(i.type=i.type||t,i.text=e.substr(0,i.length),e=e.slice(i.length),i):null}},g=function(e){for(var t;t=f();)if(e[t.type]&&!1===e[t.type](t))return},v=function(){var t=e;return e="",t},b=function(){return e};return a.fix&&function(){var t=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,i=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,s=[];s.last=function(){return this[this.length-1]},s.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},s.containsTagName=function(e){for(var t=0,i;i=this[t];t++)if(i.tagName===e)return!0;return!1};var o=function(e){return e&&"startTag"===e.type&&(e.unary=t.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e},n=f,r=function(){var t=e,i=o(n());return e=t,i},l=function(){var e=s.pop();h("</"+e.tagName+">")},c={startTag:function(e){var t=e.tagName;"TR"===t.toUpperCase()&&s.lastTagNameEq("TABLE")?(h("<TBODY>"),m()):a.fix_selfClose&&i.test(t)&&s.containsTagName(t)?s.lastTagNameEq(t)?l():(h("</"+e.tagName+">"),m()):e.unary||s.push(e)},endTag:function(e){s.last()?a.fix_tagSoup&&!s.lastTagNameEq(e.tagName)?l():s.pop():a.fix_tagSoup&&u()}},u=function(){n(),m()},m=function(){var e=r();e&&c[e.type]&&c[e.type](e)};f=function(){return m(),o(n())}}(),{append:m,readToken:f,readTokens:g,clear:v,rest:b,stack:l}}var t=function(){var e={},t,i=window.document.createElement("div");return t="<P><I></P></I>",i.innerHTML=t,e.tagSoup=i.innerHTML!==t,i.innerHTML="<P><i><P></P></i></P>",e.selfClose=2===i.childNodes.length,e}(),i=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,s=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,o=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,n=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,a=!1;e.supports=t,e.tokenToString=function(e){var t={comment:function(e){return"\x3c!--"+e.content},endTag:function(e){return"</"+e.tagName+">"},atomicTag:function(e){return t.startTag(e)+e.content+t.endTag(e)},startTag:function(e){var t="<"+e.tagName;for(var i in e.attrs){t+=" "+i;var s=e.attrs[i];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[i]||(t+='="'+(s?s.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"')}return e.rest&&(t+=e.rest),t+(e.unary&&!e.html5Unary?"/>":">")},chars:function(e){return e.text}};return t[e.type](e)},e.escapeAttributes=function(e){var t={};for(var i in e){var s=e[i];t[i]=s&&s.replace(/(^|[^\\])"/g,'$1\\"')}return t};for(var r in t)e.browserHasFlaw=e.browserHasFlaw||!t[r]&&r;return e}),sumo.define("postscribe",["htmlParser"],function(e){function t(){}function i(e){return e!==h&&null!==e}function s(e){return"function"==typeof e}function o(e,t,i){var s,o=e&&e.length||0;for(s=0;s<o;s++)t.call(i,e[s],s)}function n(e,t,i){var s;for(s in e)e.hasOwnProperty(s)&&t.call(i,s,e[s])}function a(e,t){return n(t,function(t,i){e[t]=i}),e}function r(e,t){return e=e||{},n(t,function(t,s){i(e[t])||(e[t]=s)}),e}function l(e){try{return p.call(e)}catch(i){var t=[];return o(e,function(e){t.push(e)}),t}}function c(e){return!!(e&&"tagName"in e)&&!!~e.tagName.toLowerCase().indexOf("script")}function u(e){return!!(e&&"tagName"in e)&&!!~e.tagName.toLowerCase().indexOf("style")}var m={afterAsync:t,afterDequeue:t,afterStreamStart:t,afterWrite:t,autoFix:!0,beforeEnqueue:t,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:t,error:function(e){throw e},releaseAsync:!1},h=void 0,d=!1,p=Array.prototype.slice,f=function(e){return e[e.length-1]},g=function(){function t(e,t,s){var o=m+t;if(2===arguments.length){var n=e.getAttribute(o);return i(n)?String(n):n}i(s)&&""!==s?e.setAttribute(o,s):e.removeAttribute(o)}function r(i,s){var o=i.ownerDocument;a(this,{root:i,options:s,win:o.defaultView||o.parentWindow,doc:o,parser:e("",{autoFix:s.autoFix}),actuals:[i],proxyHistory:"",proxyRoot:o.createElement(i.nodeName),scriptStack:[],writeQueue:[]}),t(this.proxyRoot,"proxyof",0)}var m="data-ps-";return r.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var e;!this.deferredRemote&&this.writeQueue.length;)e=this.writeQueue.shift(),s(e)?this.callFunction(e):this.writeImpl(e)},r.prototype.callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this.onScriptStart(t),e.call(this.win,this.doc),this.onScriptDone(t)},r.prototype.writeImpl=function(e){this.parser.append(e);for(var t,i=[],s,o;(t=this.parser.readToken())&&!(s=c(t))&&!(o=u(t));)(t=this.options.beforeWriteToken(t))&&i.push(t);this.writeStaticTokens(i),s&&this.handleScriptToken(t),o&&this.handleStyleToken(t)},r.prototype.writeStaticTokens=function(e){var t=this.buildChunk(e);if(t.actual)return t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,this.walkChunk(),t},r.prototype.buildChunk=function(t){var i=this.actuals.length,s=[],n=[],a=[];return o(t,function(t){var o=e.tokenToString(t);if(s.push(o),t.attrs){if(!/^noscript$/i.test(t.tagName)){var r=i++;n.push(o.replace(/(\/?>)/," "+m+"id="+r+" $1")),"ps-script"!==t.attrs.id&&"ps-style"!==t.attrs.id&&a.push("atomicTag"===t.type?"":"<"+t.tagName+" "+m+"proxyof="+r+(t.unary?" />":">"))}}else n.push(o),a.push("endTag"===t.type?o:"")}),{tokens:t,raw:s.join(""),actual:n.join(""),proxy:a.join("")}},r.prototype.walkChunk=function(){for(var e,s=[this.proxyRoot];i(e=s.shift());){var o=1===e.nodeType;if(!(o&&t(e,"proxyof"))){o&&(this.actuals[t(e,"id")]=e,t(e,"id",null));var n=e.parentNode&&t(e.parentNode,"proxyof");n&&this.actuals[n].appendChild(e)}s.unshift.apply(s,l(e.childNodes))}},r.prototype.handleScriptToken=function(e){var t=this.parser.clear();if(t&&this.writeQueue.unshift(t),e.src=e.attrs.src||e.attrs.SRC,e=this.options.beforeWriteToken(e)){e.src&&this.scriptStack.length?this.deferredRemote=e:this.onScriptStart(e);var i=this;this.writeScriptToken(e,function(){i.onScriptDone(e)})}},r.prototype.handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",e=this.options.beforeWriteToken(e),e&&this.writeStyleToken(e),t&&this.write()},r.prototype.writeStyleToken=function(e){var t=this.buildStyle(e);this.insertStyle(t),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},r.prototype.buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),n(e.attrs,function(e,i){t.setAttribute(e,i)}),t},r.prototype.insertStyle=function(e){this.writeImpl('<span id="ps-style"/>');var t=this.doc.getElementById("ps-style");t.parentNode.replaceChild(e,t)},r.prototype.onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},r.prototype.onScriptDone=function(e){if(e!==this.scriptStack[0])return void this.options.error({message:"Bad script nesting or script finished twice"});this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)},r.prototype.writeScriptToken=function(e,t){var i=this.buildScript(e),s=this.shouldRelease(i),o=this.options.afterAsync;e.src&&(i.src=e.src,this.scriptLoadHandler(i,s?o:function(){t(),o()}));try{this.insertScript(i),e.src&&!s||t()}catch(e){this.options.error(e),t()}},r.prototype.buildScript=function(e){var t=this.doc.createElement(e.tagName);return n(e.attrs,function(e,i){t.setAttribute(e,i)}),e.content&&(t.text=e.content),t},r.prototype.insertScript=function(e){this.writeImpl('<span id="ps-script"/>');var t=this.doc.getElementById("ps-script");t&&t.parentNode&&t.parentNode.replaceChild(e,t)},r.prototype.scriptLoadHandler=function(e,t){function i(){e=e.onload=e.onreadystatechange=e.onerror=null}function s(){i(),t()}function o(e){i(),n(e),t()}var n=this.options.error;a(e,{onload:function(){s()},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&s()},onerror:function(){o({message:"remote script failed "+e.src})}})},r.prototype.shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},r}();return{postscribe:function(){function e(){var e=c.shift(),t;e&&(t=f(e),t.afterDequeue(),e.stream=i.apply(null,e),t.afterStreamStart())}function i(i,s,r){function c(e){e=r.beforeWrite(e),u.write(e),r.afterWrite(e)}u=new g(i,r),u.id=n++,u.name=r.name||u.id,o.streams[u.name]=u;var m=i.ownerDocument,h={close:m.close,open:m.open,write:m.write,writeln:m.writeln};a(m,{close:t,open:t,write:function(){return c(l(arguments).join(""))},writeln:function(){return c(l(arguments).join("")+"\n")}});var d=u.win.onerror||t;return u.win.onerror=function(e,t,i){r.error({msg:e+" - "+t+":"+i}),d.apply(u.win,arguments)},u.write(s,function t(){a(m,h),u.win.onerror=d,r.done(),u=null,e()}),u}function o(i,o,n){s(n)&&(n={done:n}),n=r(n,m),i=/^#/.test(i)?window.document.getElementById(i.substr(1)):i.jquery?i[0]:i;var a=[i,o,n];return i.postscribe={cancel:function(){a.stream?a.stream.abort():a[1]=t}},n.beforeEnqueue(a),c.push(a),u||e(),i.postscribe}var n=0,c=[],u=null;return a(o,{streams:{},queue:c,WriteStream:g})}()}}),sumo.define("debounce",["jquery"],function(e){"$:nomunge";var t;e.throttle=t=function(t,i,s,o){function n(){function e(){r=+new Date,s.apply(l,u)}function n(){a=void 0}var l=this,c=+new Date-r,u=arguments;o&&!a&&e(),a&&clearTimeout(a),void 0===o&&c>t?e():!0!==i&&(a=setTimeout(o?n:e,void 0===o?t-c:t))}var a,r=0;return"boolean"!=typeof i&&(o=s,s=i,i=void 0),e.guid&&(n.guid=s.guid=s.guid||e.guid++),n},e.debounce=function(e,i,s){return void 0===s?t(e,i,!1):t(e,s,!1!==i)}}),sumo.define("es6!services/contact-form/index",["jquery","postscribe","articles","color","jquery.style","jquery.displayrules","debounce"],function(e,t,i,s){var o=["display_rules","positions","use_captcha","recaptcha_public_key","captcha_language","heading_text","email_placeholder_text","body_placeholder_text","continue_heading_text","continue_blurb_text","continue_button_text","tab_background_color","pixels_shown","pixels_conversion","tab_text","tab_text_color","modal_color","heading_color","text_color","heading_font","text_font","button_text","button_back_color","button_fore_color","content_width","media_id","timestamp","uuid","hash","hasContactForm","noSumoBranding"],n={settings:{},forms:[],tabs:[],articles:[],load:function t(s){var a=this;this.articles=e(i.findAll()),this.settings.firstArticle=this.articles.filter(":first"),this.settings.lastArticle=this.articles.filter(":last"),n.api.on("822aaf16-c4d6-4241-911a-41567c68b443/service/settings",function(e){e.use_captcha&&(sumo.require(["lib/recaptcha/recaptcha"]),a.publicKey=e.recaptcha_public_key),o.forEach(function(t){var i=t.replace(/_\w/g,function(e){return e[1].toUpperCase()});e[t]&&(a.settings[i]=e[t])}),e.contactFormTemplate&&(a.settings.template=e.contactFormTemplate.id),e.contactFormTemplate&&(a.settings.templateHtml=e.contactFormTemplate.html),a.destroy(!0)}),s&&"success"in s&&s.success&&(s.use_captcha&&(sumo.require(["lib/recaptcha/recaptcha"]),this.publicKey=s.recaptcha_public_key),o.forEach(function(e){var t=e.replace(/_\w/g,function(e){return e[1].toUpperCase()});s[e]&&(a.settings[t]=s[e])}),this.settings.template=s.contactFormTemplate?s.contactFormTemplate.id:null,this.settings.templateHtml=s.contactFormTemplate?s.contactFormTemplate.html:null,this.settings.templateSlug=s.contactFormTemplate?s.contactFormTemplate.slug:null,this.settings.ctry=!(!this.sumoProperties.geoLocation||!this.sumoProperties.geoLocation.ctry)&&this.sumoProperties.geoLocation.ctry,this.settings.views=this.sumoProperties.views?this.sumoProperties.views:1,this.settings.reflink="https://sumo.com/?src=sm-cf-"+this.sumoProperties.siteId+"&utm_source=sumo-powered-by&utm_medium=contact-form&utm_campaign="+this.sumoProperties.siteId,e.isCurrentUrlAllowed(this.settings.displayRules,null,this.settings.ctry,this.settings.views)&&this.install())},findAndStyleElements:function e(){this.$headingEl=this.$template.find(".sumome-contactform-heading"),this.$textEl=this.$template.find(".sumome-contactform-text"),this.$inputEl=this.$template.find(".sumome-contactform-input"),this.$textAreaEl=this.$template.find(".sumome-contactform-textarea"),this.$buttonEl=this.$template.find(".sumome-contactform-button"),this.$buttonTextEl=this.$template.find(".sumome-contactform-button-text"),this.$continueButtonEl=this.$template.find(".sumome-contactform-continue"),this.$continueButtonTextEl=this.$template.find(".sumome-contactform-continue-text"),this.settings.noSumoBranding||(this.$continueButtonEl.after('<div class="sumome-contactform-link-div"><a class="sumome-contactform-link" href="'+this.settings.reflink+'" target="_blank">Powered by Sumo</a></div>'),this.$poweredEl=this.$template.find(".sumome-contactform-link"),this.$poweredEl.style("color",this.settings.textColor,"important")),this.$errorEl=this.$template.find(".sumome-contactform-form div.sumome-contactform-error").hide(),this.$closeButton=this.$template.find(".sumome-contactform-close"),this.$closeButton.style("color",this.settings.textColor,"important"),this.$template.style("background-color","transparent","important")},addLoader:function t(i){var s=e("<span>&#8226;</span>").addClass("sumome-button-loading-dot");i.html(""),i.append(s.clone()).append(s.clone()).append(s.clone()).append(s.clone()),i.counter=0,i.loadingDotInterval=setInterval(e.proxy(function(){var e=i.counter%4,t=parseInt(i.counter/4)%2;i.find("span.sumome-button-loading-dot").eq(e).animate({opacity:t?0:1}),i.counter+=1},this),200)},resizeHandler:function t(){var i=e(".sumome-contactform-pullouttab-bottom-center"),s=e(".sumome-contactform-sticky-bottom-center-page");if(i&&i.length&&i.is(":visible")){var o=i.width();i.css("left",e(window).width()/2-o/2)}if(s&&s.length&&s.is(":visible")){var o=s.width();s.css("left",e(window).width()/2-o/2)}},removeLoader:function e(t){t.counter=0,clearInterval(t.loadingDotInterval),t.html("")},sendMessage:function i(s,o,n,a,r,l,c,u){s.$buttonEl.data("sumome-disabled",!0),s.$errorEl.text("").hide(),this.addLoader(s.$buttonEl),e.ajax({type:"POST",dataType:"json",url:this.sumoProperties.sumoUrl+"/apps/contactform/sendmessage",data:{site_id:this.sumoProperties.siteId,email_address:o,message:n,msgpot:a,current_url:window.location.href,timestamp:r,uuid:l,hash:c,recaptcha_response:u},xhrFields:{withCredentials:!1},crossDomain:!0}).done(e.proxy(function(i){if(this.removeLoader(s.$buttonEl),i&&"success"in i&&i.success){if(this.api.emit("event",{appId:"822aaf16-c4d6-4241-911a-41567c68b443",event:"message"}),s.$inputEl.hide(),s.$textAreaEl.hide(),s.$buttonEl.hide(),s.$buttonEl.text(this.settings.buttonText),s.$continueButtonEl.show(),s.$textEl.show(),s.$headingEl.text(this.settings.continueHeadingText),i.timestamp&&i.uuid&&i.hash&&(s.$hiddenTimestampEl.val(i.timestamp),s.$hiddenUuidEl.val(i.uuid),s.$hiddenHashEl.val(i.hash)),this.settings.useCaptcha&&s.find("div#recaptcha_widget").hide(),this.settings.hasContactForm&&this.settings.pixelsConversion){var o=e('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>');e("body").append(o),t.postscribe(o.get(0),this.settings.pixelsConversion)}}else s.$buttonEl.text(this.settings.buttonText),s.$errorEl.text(i.error).show(),window.clearTimeout(s.timer),s.timer=setTimeout(e.proxy(function(){s.$errorEl.text("").hide()},this),5e3),i&&"recaptcha_form"in i&&s.$textAreaEl.after(this.$recaptchaWidgetEl),setTimeout(e.proxy(function(){s.$buttonEl.data("sumome-disabled",!1)},this),1e3)},this))},addEventListeners:function t(i,s){var o=this;if(i.$buttonEl=i.find(".sumome-contactform-button"),i.$textAreaEl=i.find(".sumome-contactform-textarea"),i.$inputEl=i.find(".sumome-contactform-input"),i.$continueButtonEl=i.find(".sumome-contactform-continue"),i.$textEl=i.find(".sumome-contactform-text"),i.$headingEl=i.find(".sumome-contactform-heading"),
i.$closeButton=i.find(".sumome-contactform-close"),i.$captchaEl=i.find(".sumome-contactform-captcha"),i.$errorEl=i.find(".sumome-contactform-error"),i.$hiddenTimestampEl=i.find(".sumome-contactform-timestamp"),i.$hiddenUuidEl=i.find(".sumome-contactform-uuid"),i.$hiddenHashEl=i.find(".sumome-contactform-hash"),["sumome-contactform-sbp","sumome-contactform-lp","sumome-contactform-rp","sumome-contactform-mbl","sumome-contactform-mbr"].indexOf(i.attr("id"))<0&&(i.$inputEl.on("focus",e.proxy(function(e){i.addClass("sumome-contactform-focused")},this)),i.$textAreaEl.on("focus",e.proxy(function(e){i.addClass("sumome-contactform-focused")},this)),i.$inputEl.on("blur",e.proxy(function(t){setTimeout(e.proxy(function(){e(document.activeElement).parents("#"+i.attr("id")).length||i.removeClass("sumome-contactform-focused")},this))},this)),i.$textAreaEl.on("blur",e.proxy(function(t){setTimeout(e.proxy(function(){e(document.activeElement).parents("#"+i.attr("id")).length||i.removeClass("sumome-contactform-focused")},this))},this)),i.$buttonEl.on("blur",e.proxy(function(t){setTimeout(e.proxy(function(){e(document.activeElement).parents("#"+i.attr("id")).length||i.removeClass("sumome-contactform-focused")},this))},this)),i.$inputEl.on("keydown",e.proxy(function(e){13===e.keyCode&&i.$buttonEl.trigger("click")},this))),i.$buttonEl.on("click",e.proxy(function(){if(!i.continueMode&&!i.$buttonEl.data("sumome-disabled")){var e=/\S+@\S+\.\S/,t=i.$inputEl.val().trim(),s=i.$textAreaEl.val().trim(),o=i.find(".sumome-contactform-msgpot").val().trim(),n=i.find(".sumome-contactform-timestamp").val().trim(),a=i.find(".sumome-contactform-uuid").val().trim(),r=i.find(".sumome-contactform-hash").val().trim(),l=void 0;this.publicKey&&void 0!==this.recaptchaId&&(l=window.grecaptcha.getResponse(this.recaptchaId)),e.test(t)&&i.$textAreaEl.val().trim().length>1&&(!this.settings.useCaptcha||l)?this.sendMessage(i,t,s,o,n,a,r,l):(i.removeClass("sumome-animated sumome-shake"),i.get(0).offsetWidth=i.get(0).offsetWidth,i.addClass("sumome-animated sumome-shake"))}},this)),i.$continueButtonEl.on("click",e.proxy(function(){i.$textAreaEl.val(""),i.$inputEl.show(),i.$textAreaEl.show(),i.$buttonEl.show(),i.$continueButtonEl.hide(),i.$textEl.hide(),i.$headingEl.text(this.settings.headingText),i.$buttonEl.data("sumome-disabled",!1),s&&(s.hasClass("sumome-contactform-pullouttab-left")&&i.addClass("sumome-contactform-left-page-hidden"),s.hasClass("sumome-contactform-pullouttab-right")&&i.addClass("sumome-contactform-right-page-hidden"),(s.hasClass("sumome-contactform-pullouttab-bottom-left")||s.hasClass("sumome-contactform-pullouttab-bottom-center")||s.hasClass("sumome-contactform-pullouttab-bottom-right"))&&i.addClass("sumome-contactform-sticky-bottom-page-hidden"),i.removeClass("sumome-contactform-focused"),s.show(),this.resizeHandler())},this)),s&&(s.on("click",e.proxy(function(){s.hasClass("sumome-contactform-pullouttab-left")&&i.toggleClass("sumome-contactform-left-page-hidden"),s.hasClass("sumome-contactform-pullouttab-right")&&i.toggleClass("sumome-contactform-right-page-hidden"),(s.hasClass("sumome-contactform-pullouttab-bottom-left")||s.hasClass("sumome-contactform-pullouttab-bottom-center")||s.hasClass("sumome-contactform-pullouttab-bottom-right"))&&i.toggleClass("sumome-contactform-sticky-bottom-page-hidden"),i.hasClass("sumome-contactform-left-page-hidden")||i.hasClass("sumome-contactform-right-page-hidden")||i.hasClass("sumome-contactform-sticky-bottom-page-hidden")?(i.removeClass("sumome-contactform-focused"),s.show(),this.resizeHandler()):(i.addClass("sumome-contactform-focused"),s.hide(),this.resizeHandler())},this)),i.$closeButton.on("click",e.proxy(function(){s.hasClass("sumome-contactform-pullouttab-left")&&i.toggleClass("sumome-contactform-left-page-hidden"),s.hasClass("sumome-contactform-pullouttab-right")&&i.toggleClass("sumome-contactform-right-page-hidden"),(s.hasClass("sumome-contactform-pullouttab-bottom-left")||s.hasClass("sumome-contactform-pullouttab-bottom-center")||s.hasClass("sumome-contactform-pullouttab-bottom-right"))&&i.toggleClass("sumome-contactform-sticky-bottom-page-hidden"),i.hasClass("sumome-contactform-left-page-hidden")||i.hasClass("sumome-contactform-right-page-hidden")||i.hasClass("sumome-contactform-sticky-bottom-page-hidden")?(i.removeClass("sumome-contactform-focused"),s.show(),this.resizeHandler()):(i.addClass("sumome-contactform-focused"),s.hide(),this.resizeHandler())},this)),this.tabs.push(s)),this.settings.useCaptcha&&i.find("div.sumome-contactform-captcha")){var n=function t(){var s=/\S+@\S+\.\S/,n=i.$inputEl.val().trim();!i.find("div#recaptcha_widget").length&&s.test(n)&&i.$textAreaEl.val().trim().length>1?o.$recaptchaWidgetEl?(i.$textAreaEl.after(o.$recaptchaWidgetEl),o.$recaptchaWidgetEl.show(),setTimeout(function(){o.recaptchaId=window.grecaptcha.render("recaptcha_checkbox",{sitekey:o.publicKey})})):(o.$recaptchaWidgetEl=e("<div></div>").attr("id","recaptcha_widget").css("display","none"),o.$recaptchaCheckboxEl=e("<div></div>").attr("id","recaptcha_checkbox").attr("data-sitekey",o.publicKey).addClass("g-recaptcha"),o.$recaptchaWidgetEl.append(o.$recaptchaCheckboxEl),i.$textAreaEl.after(o.$recaptchaWidgetEl),o.$recaptchaWidgetEl.show(),setTimeout(function(){o.recaptchaId=window.grecaptcha.render("recaptcha_checkbox",{sitekey:o.publicKey})})):i.find("div#recaptcha_widget").length&&o.$recaptchaWidgetEl&&!o.$recaptchaWidgetEl.is(":visible")&&s.test(n)&&i.$textAreaEl.val().trim().length>1&&(i.$textAreaEl.after(o.$recaptchaWidgetEl),o.$recaptchaWidgetEl.show())};i.$textAreaEl.on("change.sumomeRecaptcha paste keyup.sumomeRecaptcha focus.sumomeRecaptcha",e.proxy(n,this)),i.$inputEl.on("change.sumomeRecaptcha paste.sumomeRecaptcha keyup.sumomeRecaptcha focus.sumomeRecaptcha",e.proxy(n,this))}},styleRecaptcha:function t(){this.recaptchaInterval=setInterval(e.proxy(function(){this.$captchaImageEl.style("width")&&(this.$captchaImageEl.style("width","64%"),clearInterval(this.recaptchaInterval))},this),200)},install:function i(){var o=window.location.href;if(e(window).on("resize.sumome-contactform",e.debounce(300,function(e){n.resizeHandler()})),this.settings.template){this.$template=e("<div></div>"),this.settings.templateSlug&&this.$template.addClass("sumome-contactform-template-"+this.settings.templateSlug),this.$content=e("<div></div>"),this.$content.addClass("sumome-contactform-content"),this.$template.append(this.$content),this.$template.addClass("sumome-contactform"),this.$template.timer=null;var a=this.settings.templateHtml,r=a.match(/\{sm\:.*?\}/g);if(r){var l=[];r.forEach(e.proxy(function(e){var t=e.replace(/([\{\}]|sm\:)/g,""),i=t.split("|");if(i.length>1){var o=i[1].split(":");a=a.replace(e,s.shadeColor(this.settings[i[0]],parseInt(o[1])))}else if("Font"==t.substr(-4)){var n=this.settings[t];if(n){var r=n.split(":"),c=r[0].split(","),u=c.shift(),m=r[1]?r[1]:400;c.unshift("'"+u+"'"),c.length&&(a=a.replace(new RegExp(e,"g"),"font-family: "+c.join(",")+" !important;"),l.push(u.replace(/ /g,"+")+":"+m))}else a=a.replace(e,"")}else a=a.replace(e,this.settings[i[0]])},this)),l.length&&(l=e.unique(l),a='<link href="//fonts.googleapis.com/css?family='+l.join("|")+'" type="text/css" rel="stylesheet">'+a)}this.$content.append(a),this.findAndStyleElements(),this.$headingEl.text(this.settings.headingText),this.$inputEl.attr("placeholder",this.settings.emailPlaceholderText),this.$textAreaEl.attr("placeholder",this.settings.bodyPlaceholderText),this.$textAreaEl.after("<input name='msgpot' class='sumome-contactform-msgpot' type='text' style='display:none;'>"),this.$textAreaEl.after("<input name='timestamp' class='sumome-contactform-timestamp' type='hidden' value='"+this.settings.timestamp+"'>"),this.$textAreaEl.after("<input name='uuid' class='sumome-contactform-uuid' type='hidden' value='"+this.settings.uuid+"'>"),this.$textAreaEl.after("<input name='hash' class='sumome-contactform-hash' type='hidden' value='"+this.settings.hash+"'>"),this.$textEl.html(this.settings.continueBlurbText),this.settings.useCaptcha&&(this.$captchaEl=e("<div></div>").addClass("sumome-contactform-captcha"),this.$textAreaEl.after(this.$captchaEl)),this.$buttonEl.text(this.settings.buttonText),this.$continueButtonTextEl.text(this.settings.continueButtonText),this.$pulloutTab=e("<div></div>").addClass("sumome-contactform-pullouttab"),this.$pulloutTab.text(this.settings.tabText),this.$template.addClass("sumome-contactform-small");if(Math.min(window.screen.availWidth||e(window).width(),e(window).width())>480){if("positions"in this.settings&&this.settings.positions.indexOf("lp")>=0){var c=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-left"),c.attr("id","sumome-contactform-lp"),this.addEventListeners(c,u),this.settings.useCaptcha&&c.$captchaEl.attr("id","sumome-contactform-captcha-lp"),c.addClass("sumome-contactform-left-page sumome-contactform-left-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackgroundColor,"important"),u.style("color",this.settings.tabTextColor,"important"),e("body").append(u),e("body").append(c),this.forms.push(c)}if("positions"in this.settings&&this.settings.positions.indexOf("rp")>=0){var m=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-right"),m.attr("id","sumome-contactform-rp"),this.addEventListeners(m,u),this.settings.useCaptcha&&m.$captchaEl.attr("id","sumome-contactform-captcha-lp"),m.addClass("sumome-contactform-right-page sumome-contactform-right-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackgroundColor,"important"),u.style("color",this.settings.tabTextColor,"important"),u.find(""),e("body").append(u),e("body").append(m),this.forms.push(m)}if("positions"in this.settings&&(this.settings.positions.indexOf("sblp")>=0||this.settings.positions.indexOf("sbcp")>=0||this.settings.positions.indexOf("sbrp")>=0)){var h=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);h.attr("id","sumome-contactform-sbp"),h.addClass("sumome-contactform-sticky-bottom-page-hidden"),this.settings.positions.indexOf("sblp")>=0&&(u.addClass("sumome-contactform-pullouttab-bottom-left"),h.addClass("sumome-contactform-sticky-bottom-left-page sumome-contactform-fixed")),this.settings.positions.indexOf("sbcp")>=0&&(u.addClass("sumome-contactform-pullouttab-bottom-center"),h.addClass("sumome-contactform-sticky-bottom-center-page sumome-contactform-fixed")),this.settings.positions.indexOf("sbrp")>=0&&(u.addClass("sumome-contactform-pullouttab-bottom-right"),h.addClass("sumome-contactform-sticky-bottom-right-page sumome-contactform-fixed")),this.addEventListeners(h,u),this.settings.useCaptcha&&h.$captchaEl.attr("id","sumome-contactform-captcha-sbp"),u.style("background-color",this.settings.tabBackgroundColor,"important"),u.style("color",this.settings.tabTextColor,"important"),e("body").append(u),e("body").append(h),this.forms.push(h)}}else{if("positions"in this.settings&&this.settings.positions.indexOf("mbl")>=0){var d=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-left"),d.attr("id","sumome-contactform-mbl"),this.addEventListeners(d,u),this.settings.useCaptcha&&d.$captchaEl.attr("id","sumome-contactform-captcha-mbl"),d.addClass("sumome-contactform-mobile sumome-contactform-left-page sumome-contactform-left-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackgroundColor,"important"),u.style("color",this.settings.tabTextColor,"important"),e("body").append(u),e("body").append(d),this.forms.push(d)}if("positions"in this.settings&&this.settings.positions.indexOf("mbr")>=0){var p=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-right"),p.attr("id","sumome-contactform-mbr"),this.addEventListeners(p,u),this.settings.useCaptcha&&p.$captchaEl.attr("id","sumome-contactform-captcha-mbr"),p.addClass("sumome-contactform-mobile sumome-contactform-right-page sumome-contactform-right-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackgroundColor,"important"),u.style("color",this.settings.tabTextColor,"important"),u.find(""),e("body").append(u),e("body").append(p),this.forms.push(p)}}if(this.$template.removeClass("sumome-contactform-small").addClass("sumome-contactform-"+this.settings.contentWidth),this.$closeButton.hide(),"positions"in this.settings&&(this.settings.positions.indexOf("blp")>=0||this.settings.positions.indexOf("bp")>=0||this.settings.positions.indexOf("brp")>=0)){var f=this.$template.clone(!0,!0);if(f.attr("id","sumome-contactform-bp"),this.addEventListeners(f),this.settings.positions.indexOf("blp")>=0){f.addClass("sumome-contactform-left");var g="blp"}else if(this.settings.positions.indexOf("brp")>=0){f.addClass("sumome-contactform-right");var g="brp"}else if(this.settings.positions.indexOf("bp")>=0){f.addClass("sumome-contactform-center");var g="bp"}this.settings.useCaptcha&&f.$captchaEl.attr("id","sumome-contactform-captcha-"+g);var v=e("footer"),b=[];v.each(e.proxy(function(t,i){var s=!1;this.articles.each(e.proxy(function(t,o){e(o).find(e(i)).length&&(s=!0)},this)),s||b.push(e(i))},this)),b.length?b[b.length-1].prepend(f):e("body").append(f),this.forms.push(f)}if("positions"in this.settings&&(this.settings.positions.indexOf("tla")>=0||this.settings.positions.indexOf("tca")>=0||this.settings.positions.indexOf("tra")>=0)){var y=this.$template.clone(!0,!0);y.attr("id","sumome-contactform-ta"),this.addEventListeners(y),this.settings.positions.indexOf("tla")>=0?y.addClass("sumome-contactform-left"):this.settings.positions.indexOf("tra")>=0?y.addClass("sumome-contactform-right"):this.settings.positions.indexOf("tca")>=0&&y.addClass("sumome-contactform-center"),this.settings.useCaptcha&&y.$captchaEl.attr("id","sumome-contactform-captcha-"+g),this.settings.firstArticle.prepend(y),this.forms.push(y)}if("positions"in this.settings&&(this.settings.positions.indexOf("bla")>=0||this.settings.positions.indexOf("bca")>=0||this.settings.positions.indexOf("bra")>=0)){var w=this.$template.clone(!0,!0);if(w.attr("id","sumome-contactform-ba"),this.addEventListeners(w),this.settings.positions.indexOf("bla")>=0){w.addClass("sumome-contactform-left");var g="bla"}else if(this.settings.positions.indexOf("bra")>=0){w.addClass("sumome-contactform-right");var g="bra"}else if(this.settings.positions.indexOf("bca")>=0){w.addClass("sumome-contactform-center");var g="bca"}this.settings.useCaptcha&&w.$captchaEl.attr("id","sumome-contactform-captcha-"+g),this.settings.lastArticle.append(w),this.forms.push(w)}}if(this.forms.length>0&&this.settings.hasContactForm&&this.settings.pixelsShown){var _=e('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>');e("body").append(_),t.postscribe(_.get(0),this.settings.pixelsShown)}},destroy:function t(i){this.forms.forEach(function(e){e.$textAreaEl&&(e.$textAreaEl.off(".sumomeRecaptcha"),e.$textAreaEl.remove()),e.$inputEl&&(e.$inputEl.off(".sumomeRecaptcha"),e.$inputEl.remove())}),e(window).off(".sumome-contactform"),this.forms=[],this.tabs.forEach(function(e){e.remove()}),this.tabs=[],e(".sumome-contactform-pullouttab").remove(),e(".sumome-contactform-content").parent().filter(":not(.sumome-contactform-preview)").remove(),this.recaptchaInterval&&clearInterval(this.recaptchaInterval),this.$captchaReloadBtn&&(this.$captchaReloadBtn.remove(),this.$captchaReloadBtn=null),this.$captchaAudioBtn&&(this.$captchaAudioBtn.remove(),this.$captchaAudioBtn=null),this.$captchaImageBtn&&(this.$captchaImageBtn.remove(),this.$captchaImageBtn=null),this.$captchaHelpBtn&&(this.$captchaHelpBtn.remove(),this.$captchaHelpBtn=null),this.$recaptchaWidgetEl&&(this.$recaptchaWidgetEl.remove(),this.$recaptchaWidgetEl=null),i&&e.isCurrentUrlAllowed(this.settings.displayRules,null,this.settings.ctry,this.settings.views)&&this.install()}};return n}),sumo.define("content-analytics/content",["jquery","articles","jquery.displayrules"],function(e,t){function i(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function e(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function e(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function e(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function e(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),255]}}],i=0;i<t.length;i++){var s=t[i].re,o=t[i].process,n=s.exec(e);n&&(channels=o(n),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i}}var s=function e(t,i,s,o,n,a){void 0==a&&(a=2),t.moveTo(i,s);for(var r=o-i,l=n-s,c=Math.floor(Math.sqrt(r*r+l*l)/a),u=r/c,m=l/c,h=0;h++<c;)i+=u,s+=m,t[h%2==0?"moveTo":"lineTo"](i,s);t[h%2==0?"moveTo":"lineTo"](o,n)},o=function e(t){var i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i.join(".")},n={isShown:!1,isRecording:!1,currentData:null,reopenApp:!1,currentCampaign:null,elementData:null,load:function t(i){n.$control&&n.$control.addClass("sumome-content-analytics-control-show"),n.containerEl&&e('<div class="sumome-content-analytics-loading" />').html("Loading analytic data...<br />Press ESC to exit").appendTo(n.containerEl),e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:n.sumoProperties.sumoUrl+"/apps/contentanalytics/load",data:{site_id:n.sumoProperties.siteId,path:window.location.pathname+window.location.search,campaign_id:i||null,geoLocation:this.sumoProperties.geoLocation,pageViews:this.sumoProperties.views},success:function t(i){i.success?(e.maskElement(n.$containerEl,function(){}),n.currentData=i.data,n.currentCampaign=i.campaigns,n.redraw(),n.updateControl()):(n.currentData=null,n.currentCampaign=null,n.updateControl()),e(".sumome-content-analytics-loading").remove(),n.$control}})},toggle:function e(){n.isShown?n.hide():n.show()},redraw:function a(){if(!n.currentCampaign)return void n.hide();var r={.0625:"#0001ab",.125:"#0100e0",.1875:"#006fff",.25:"#01acfe",.3125:"#01e0ff",.375:"#01ff01",.4375:"#bdfe00",.5:"#ffff01",.5625:"#ffe001",.625:"#fe8d00",.6875:"#fb5e01",.75:"#f50000",.8125:"#f501c1"};r={.25:"#0000ff",.55:"#00ff00",.85:"#ffff00","1.0":"#ff0000"};var l=n.canvas;if("article"==n.currentCampaign.current.content_type){var c="article",u=e(t.findAll());if(1!=u.length)return n.hide(),void sumo.require(["sumome-lib"],function(e){e.Dialog.alert({title:"Sumo Content Analytics",message:"Unable to find the content area to display the data."})});n.$article=u[0]}else{var c="page";n.$article=e(document)}var m=e(n.$article),h="article"==c?m.offset():{top:0,left:0},d=h.top;if("_footer"in n.$article&&n.$article._footer&&n.$article._footer.is(":visible")&&!n.$article._footer.hasClass("aside"))var p=n.$article._footer.offset().top-d;else var p=m.outerHeight();var f=m.outerWidth(),g=e(window).scrollTop(),v=d-g,b=h.left,y=v<0?Math.abs(v):0;v=Math.max(0,v);var w=f,_=Math.max(0,Math.min(e(window).height()-v,p-y)),x=_/p;n.$containerEl.css({top:v+"px",left:b+"px"}),n.$containerEl.width(w),n.$containerEl.height(_),l.width=w,l.height=_;var k=l.getContext("2d"),S=n.currentData.points,C=S.reduce(function(e,t){return e<t?e:t}),T=S.reduce(function(e,t){return e>t?e:t});k.clearRect(0,0,l.width,l.height);for(var E=k.createLinearGradient(0,-y,0,p-y),$={},I=null,L=0;L<S.length;L++){var A=L/100,O=T>0?S[L]/T:0;null!=I&&O==I||($[A]=O,I=O)}var P=null,B=0,I=null,D={};Object.keys($).sort(function(e,t){return e-t}).forEach(function(e){var t=Math.min($[e],null!=I?I:$[e]),s;null!==I&&I-t>B&&parseFloat(e)>0&&(B=I-t,P=parseFloat(e));try{Object.keys(r).sort(function(e,t){return e-t}).forEach(function(e){if(s=r[e],(e=parseFloat(e))>t)throw D})}catch(e){}s=new i(s),s="rgba("+s.r+","+s.g+","+s.b+",0.5)",$[e]=s,I=t});var U=Object.keys($).sort(function(e,t){return e-t}),R=null;U.forEach(function(e){var t=$[e];t!=R&&(R=t,E.addColorStop(e,t))}),k.fillStyle=E,k.fillRect(0,0,f,p);var N=n.currentData.ticks,z=1/x,j=n.currentCampaign,F=parseFloat(j.current.average_read)/100,M=Math.round(F*z*l.height)-y;M>=0&&M<=_&&(M=Math.max(1,M),M=Math.min(_-3,M),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.lineWidth=2,k.lineCap="round",k.strokeStyle="#ffffff",s(k,0,M,l.width,M,5),k.stroke(),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=8,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="center",k.textBaseline="middle",k.fillText("Average Read",l.width/2,M<=14?M+15:M-15),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="center",k.textBaseline="middle",k.fillText("Average Read",l.width/2,M<=14?M+15:M-15),k.save());var M;for(var H in N){var O=N[H],M=Math.round(parseFloat(H)/100*z*l.height)-y,q=O/T;M<0||M>_||(isNaN(q)&&(q=0),M=Math.max(1,M),M=Math.min(_-3,M),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.moveTo(l.width-25,M),k.lineTo(l.width,M),k.lineWidth=2,k.lineCap="round",k.strokeStyle="yellow",k.stroke(),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.moveTo(0,M),k.lineTo(25,M),k.lineWidth=2,k.lineCap="round",k.strokeStyle="yellow",k.stroke(),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=8,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="right",k.textBaseline="middle",k.fillText(o(O)+" ("+(100*q).toFixed()+"%) readers",l.width-35,Math.min(_-14,Math.max(14,M))),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=8,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="yellow",k.textAlign="left",k.textBaseline="middle",k.fillText(H+"%",35,Math.min(_-14,Math.max(14,M))),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="right",k.textBaseline="middle",k.fillText(o(O)+" ("+(100*q).toFixed()+"%) readers",l.width-35,Math.min(_-14,Math.max(14,M))),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="yellow",k.textAlign="left",k.textBaseline="middle",k.fillText(H+"%",35,Math.min(_-14,Math.max(14,M))),k.save())}e.updateMask(n.$containerEl)},show:function t(i){if(i&&(n.reopenApp=!0),n.isShown)return void n.load(i);n.api.emit("a25489e9-848c-4356-97ff-161b0852c509/widget/show"),n.isShown=!0,n.api.emit("hideControl");var s=e("<div />").addClass("sumome-content-analytics").appendTo(document.body);n.$control=e('<div class="sumome-content-analytics-control sumome-content-analytics-control-show" />'),n.$close=e('<a class="sumome-content-analytics-close">&#x2715;</a>').appendTo(n.$control),n.$title=e('<span class="sumome-content-analytics-title" />').text("Loading...").appendTo(n.$control),n.$clicks=e('<span class="sumome-content-analytics-clicks" />').text("").appendTo(n.$control),n.$controls=e('<div class="sumome-content-analytics-controls" />'),n.$prev=e('<a class="sumome-content-analytics-prev sumome-content-analytics-disabled" />').appendTo(n.$controls).text("Previous Campaign").attr("title","Previous Campaign").click(n.previous),n.$stop=e('<a class="sumome-content-analytics-stop sumome-content-analytics-disabled" />').appendTo(n.$controls).text("STOP").attr("title","Stop Campaign").click(n.stop),n.$record=e('<a class="sumome-content-analytics-record sumome-content-analytics-disabled" />').appendTo(n.$controls).text("RECORD").css("display","none").attr("title","Record New Campaign").click(n.record),n.$next=e('<a class="sumome-content-analytics-next sumome-content-analytics-disabled" />').appendTo(n.$controls).text("Next Campaign").attr("title","Next Campaign").click(n.next),n.$wrapper=e('<div class="sumome-content-analytics-control-wrapper" />'),n.$controls.appendTo(n.$control),n.$control.appendTo(n.$wrapper),n.$wrapper.appendTo(s),n.$close.click(function(e){e.preventDefault(),n.hide()}),n.containerEl=s,n.$containerEl=e("<div />"),n.$canvasEl=e("<canvas />"),n.$containerEl.css({position:"fixed"}),n.$canvasEl.appendTo(n.$containerEl),n.$containerEl.appendTo(s),n.canvas=n.$canvasEl.get(0),n.load(i),e(window).on("scroll.sumome-content-analytics-widget",e.debounce(1,function(){n.redraw()})),e(window).on("resize.sumome-content-analytics-widget",e.debounce(1,function(){n.redraw()})),e(document).on("keyup.sumome-content-analytics-widget",function(e){27==e.which&&n.hide()}),document.documentElement.style.overflow="auto"},hide:function t(){e(window).off(".sumome-content-analytics-widget"),e(document).off(".sumome-content-analytics-widget"),e.unmask(),e(".sumome-content-analytics").remove(),n.api.emit("showControl"),n.reopenApp&&(e(document.body).find(".s.u.m.o.me.sumome-react-modal-container").fadeIn(200),e(document.body).css({overflow:"hidden"}),n.api.on("a25489e9-848c-4356-97ff-161b0852c509/app/started",function(e){n.api.off("a25489e9-848c-4356-97ff-161b0852c509/app/started"),n.api.emit("a25489e9-848c-4356-97ff-161b0852c509/app/route","campaigns")}),n.reopenApp=!1),n.isShown=!1,n.api.emit("a25489e9-848c-4356-97ff-161b0852c509/widget/hide")},previous:function t(){if(!e(this).hasClass("sumome-content-analytics-disabled")){var i=n.currentCampaign;i&&i.previous&&n.load(i.previous)}},next:function t(){if(!e(this).hasClass("sumome-content-analytics-disabled")){var i=n.currentCampaign;i&&i.next&&n.load(i.next)}},stop:function t(){e(this).hasClass("sumome-content-analytics-disabled")||sumo.require(["sumome-lib"],function(t){t.Dialog.confirm({title:"Sumo Content Analytics",message:"Are you sure you want to stop recording user reads?",callback:function t(i){"yes"==i&&e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:n.sumoProperties.sumoUrl+"/apps/contentanalytics/stop",data:{site_id:n.sumoProperties.siteId,path:window.location.pathname+window.location.search},success:function e(t){t.success&&(n.api.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/stop"),n.load())}})}})})},record:function i(){if(!e(this).hasClass("sumome-content-analytics-disabled")){var s="article";1!=t.findAll().length&&(s="page"),e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:n.sumoProperties.sumoUrl+"/apps/contentanalytics/start",data:{site_id:n.sumoProperties.siteId,path:window.location.pathname+window.location.search,content_type:s},success:function e(t){t.success&&(n.show(),n.api.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/start"))}})}},autoRecord:function i(s,o,a){if(null==s&&(s=n.sumoProperties.siteId),null==o&&(o=n.sumoProperties.sumoUrl),!e(this).hasClass("sumome-content-analytics-disabled")){var r="article";1!=t.findAll().length&&(r="page"),e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:o+"/apps/contentanalytics/start/auto",data:{site_id:s,path:window.location.pathname+window.location.search,content_type:r},success:a})}},updateControl:function e(){var t=n.currentCampaign;if(n.$control&&n.$title){if(t&&t.current){var i="";if(t.current.started_at){var s=new Date(t.current.started_at);i=s.toLocaleDateString()+" "+s.toLocaleTimeString()}if(t.current.finished_at){var o=new Date(t.current.finished_at);i+=" - "+o.toLocaleDateString()+" "+o.toLocaleTimeString()}else i+=" - ACTIVE CAMPAIGN";n.$title.text(i),n.$clicks.html('AVERAGE READ <span class="sumome-content-analytics-clicks-count">'+parseFloat(t.current.average_read).toFixed()+"%</span>")}else n.$title.text(""),n.$clicks.text("");n.$prev.toggleClass("sumome-content-analytics-disabled",!(null!=t&&null!=t.previous)),n.$stop.toggleClass("sumome-content-analytics-disabled",0==n.isRecording),n.$record.toggleClass("sumome-content-analytics-disabled",1==n.isRecording),n.isRecording?(n.$record.hide(),n.$stop.show()):(n.$stop.hide(),n.$record.show()),n.$next.toggleClass("sumome-content-analytics-disabled",!(null!=t&&null!=t.next))}},setRecording:function e(t){n.isRecording=t,n.isShown&&n.updateControl()}};return n}),sumo.define("jquery.elementMask",["jquery"],function(e){function t(){i(l)}function i(t){var i=e(window).height(),s=e(window).width();if(t){var l=t.offset();o.height(0),a.height(0),n.height(0),r.height(0),o.css("left",0),o.css("top",0),o.css("width",l.left),o.css("height",e(document).outerHeight()),a.css("left",l.left+t.outerWidth()),a.css("top",0),a.css("width",e(document).outerWidth()-l.left-t.outerWidth()),a.css("height",e(document).outerHeight()),n.css("left",l.left),n.css("top",0),n.css("width",t.outerWidth()),n.css("height",l.top),r.css("left",l.left),r.css("top",l.top+t.outerHeight()),r.css("width",t.outerWidth()),r.css("height",e(document).outerHeight()-l.top-t.outerHeight()),o.show(),a.show(),n.show(),r.show()}}function s(t){o||(o=e('<div class="sumome-element-mask sumome-ignore" />'),e("body").append(o)),a||(a=e('<div class="sumome-element-mask sumome-ignore" />'),e("body").append(a)),n||(n=e('<div class="sumome-element-mask sumome-ignore" />'),e("body").append(n)),r||(r=e('<div class="sumome-element-mask sumome-ignore" />'),e("body").append(r))}var o,n,a,r,l;e.maskElement=function(o,n){s(n),i(o),l=o,e(window).unbind("resize",t),e(window).bind("resize",t)},e.updateMask=function(e){l=e,i(e)},e.unmask=function(){e(window).unbind("resize",t),o&&o.hide(),a&&a.hide(),n&&n.hide(),r&&r.hide()}}),sumo.define("es6!services/content-analytics/index",["jquery","content-analytics/content","articles","jquery.elementMask"],function(e,t,i){return function(s){var o=!1,n=!1,a=0,r=null,l=!1,c=!0,u=!0,m=!1,h="article",d=s.properties;t.sumoProperties=s.properties;var p=function e(t){for(var i=(new Date).getTime();(new Date).getTime()<i+t;);},f=function t(){function s(){var t="article"==h?r.offset():{top:0,left:0},i=t.top
;if("_footer"in a&&a._footer&&a._footer.is(":visible")&&!a._footer.hasClass("aside"))var s=a._footer.offset().top-i;else var s=r.outerHeight();var o=i+s,n=e(window).scrollTop(),c=e(window).height(),u=n+c,m=Math.max(n,i),p=Math.min(o,u),f=p-m,g=f/s,v=Math.min(n+c-i,s),b=Math.max(v-c,0),y=Math.max(0,(v-c)/(s-c)).toFixed(0),w=i>=n&&i<=u,_=o>=n&&o<=u,x=Math.min(100,Math.max(0,Math.round((p-i)/s*100)));if(null==l||x>l){var k={site_id:d.siteId,last:l,read:x,path:window.location.pathname+window.location.search,_:Math.random()},S=e("<img />").css({display:"none"}).attr("src",d.sumoUrl+"/apps/contentanalytics/scroll?"+e.param(k));S.on("error",function(){e(this).remove()}),S.on("load",function(){e(this).remove()}),e(document.body).append(S),l=x}}if(!n){if("article"==h){var o=e(i.findAll());if(1!=o.length)return;var a=o[0]}else var a=e(document);var r=e(a),l=null;e(window).on("scroll.sumome-content-analytics",e.debounce(1e3,s)),c&&(c=!1,"complete"==document.readyState?s():e(window).on("load.sumome-content-analytics",s)),n=!0}},g=function t(){n&&(e(window).off(".sumome-content-analytics"),n=!1)},v=function i(){e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:d.sumoUrl+"/services",data:{contentAnalyticsStatus:!0,site_id:d.siteId,path:window.location.pathname+window.location.search},success:function i(n){var c=n.contentAnalyticsStatus;c.success?(l=!0,o=null!=c.campaign&&null==c.campaign.finished_at,a=c.count,u=c.track_all_users,r=c.campaign,h=null!=c.campaign?c.campaign.content_type:"article"):o=!1,s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:r,haveStatus:l,recording:o,campaignCount:a});var p=!(!d.geoLocation||!d.geoLocation.ctry)&&d.geoLocation.ctry,v=d.views?d.views:1;c.hasContentAnalytics&&c.count<=0&&c.display_rules.length>0&&e.isCurrentUrlAllowed(c.display_rules,null,p,v)?t.autoRecord(d.siteId,d.sumoUrl,function(e){e.success&&(l=!0,o=!0,a=1,r=e.campaign,h=null!=e.campaign?e.campaign.content_type:"article",s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:r,haveStatus:l,recording:o,campaignCount:a}),f())}):m||(g(),o&&(1==u||0==u&&null==d.user)&&f())}})},b=function i(n){n.success?(l=!0,o=null!=n.campaign&&null==n.campaign.finished_at,a=n.count,u=n.track_all_users,r=n.campaign,h=null!=n.campaign?n.campaign.content_type:"article"):o=!1,s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:r,haveStatus:l,recording:o,campaignCount:a});var c=!(!d.geoLocation||!d.geoLocation.ctry)&&d.geoLocation.ctry,p=d.views||1;n.hasContentAnalytics&&n.count<=0&&n.display_rules.length>0&&e.isCurrentUrlAllowed(n.display_rules,null,c,p)?t.autoRecord(d.siteId,d.sumoUrl,function(e){e.success&&(l=!0,o=!0,a=1,r=e.campaign,h=null!=e.campaign?e.campaign.content_type:"article",s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:r,haveStatus:l,recording:o,campaignCount:a}),f())}):m||(g(),o&&(1==u||0==u&&null==d.user)&&f())};return{init:function e(t,i){s.on("a25489e9-848c-4356-97ff-161b0852c509/campaign/checkStatus",function(){s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:r,haveStatus:l,recording:o,campaignCount:a})}),s.on("a25489e9-848c-4356-97ff-161b0852c509/campaign/start",function(){v()}),s.on("a25489e9-848c-4356-97ff-161b0852c509/campaign/stop",function(){v()}),s.on("a25489e9-848c-4356-97ff-161b0852c509/widget/show",function(){m=!0,g()}),s.on("a25489e9-848c-4356-97ff-161b0852c509/widget/hide",function(){m=!1,g(),o&&(1==u||0==u&&null==d.user)&&f()}),b(t.serviceData),i()},destroy:function e(t){t()}}}}),sumo.define("googleanalytics/trackingcode",["jquery","postscribe"],function(e,t){return{initialize:function t(i){this.api.on("674d3d92-3a9f-4620-99f6-ff856d18423d/service/reload",e.proxy(function(){this.load()},this)),this.loadFromServices(i)},loadFromServices:function i(s){if(delete window.__gaSumome,e("script[data-sumome-ga-tracking]").remove(),s&&"success"in s&&s.success&&"tracking_id"in s&&"inject_code"in s&&s.tracking_id&&s.inject_code){var o="<script data-sumome-ga-tracking>\n          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n          })(window,document,'script','//www.google-analytics.com/analytics.js','__gaSumome');\n          __gaSumome('create', '"+s.tracking_id+"', 'auto');\n          __gaSumome('send', 'pageview');\n          <\/script>\n";t.postscribe(e("head"),o)}},load:function i(){e.ajax({type:"POST",dataType:"json",url:this.sumoProperties.sumoUrl+"/services",data:{googleAnalyticsService:!0,site_id:this.sumoProperties.siteId},xhrFields:{withCredentials:!1},crossDomain:!0}).done(e.proxy(function(i){var s=i.googleAnalyticsService;if(delete window.__gaSumome,e("script[data-sumome-ga-tracking]").remove(),s&&"success"in s&&s.success&&"tracking_id"in s&&"inject_code"in s&&s.tracking_id&&s.inject_code){var o="<script data-sumome-ga-tracking>\n            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n            })(window,document,'script','//www.google-analytics.com/analytics.js','__gaSumome');\n            __gaSumome('create', '"+s.tracking_id+"', 'auto');\n            __gaSumome('send', 'pageview');\n            <\/script>\n";t.postscribe(e("head"),o)}},this))}}}),sumo.define("lib/heatmaps",["require"],function(e){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},i=function e(){var i=function e(t){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},s=t.defaultRadius;return i.prototype={_organiseData:function(e,t){var i=e[this._xField],o=e[this._yField],n=this._radi,a=this._data,r=this._max,l=this._min,c=e[this._valueField]||1,u=e.radius||this._cfgRadius||s;return a[i]||(a[i]=[],n[i]=[]),a[i][o]?a[i][o]+=c:(a[i][o]=c,n[i][o]=u),a[i][o]>r?(t?this.setDataMax(a[i][o]):this._max=a[i][o],!1):{x:i,y:o,value:c,radius:u,min:l,max:r}},_unOrganizeData:function(){var e=[],t=this._data,i=this._radi;for(var s in t)for(var o in t[s])e.push({x:s,y:o,radius:i[s][o],value:t[s][o]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var e=arguments[0],t=e.length;t--;)this.addData.call(this,e[t]);else{var i=this._organiseData(arguments[0],!0);i&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]})}return this},setData:function(e){var t=e.data,i=t.length;this._data=[],this._radi=[];for(var s=0;s<i;s++)this._organiseData(t[s],!1);return this._max=e.max,this._min=e.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(e){return this._max=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(e){return this._min=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(e){this._coordinator=e},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},i}(),s=function e(){function t(e){var t=e.container,s=this.shadowCanvas=document.createElement("canvas"),o=this.canvas=e.canvas||document.createElement("canvas"),n=this._renderBoundaries=[1e4,1e4,0,0],a=getComputedStyle(e.container)||{};o.className="sumome-heatmap-canvas",this._width=o.width=s.width=+a.width.replace(/px/,""),this._height=o.height=s.height=+a.height.replace(/px/,""),this.shadowCtx=s.getContext("2d"),this.ctx=o.getContext("2d"),o.style.cssText=s.style.cssText="position:absolute;left:0;top:0;",o.style.width=this._width+"px",o.style.height=this._height+"px",t.style.position="relative",t.appendChild(o),this._palette=i(e),this._templates={},this._setStyles(e)}var i=function(e){var t=e.gradient||e.defaultGradient,i=document.createElement("canvas"),s=i.getContext("2d");i.width=256,i.height=1;var o=s.createLinearGradient(0,0,256,1);for(var n in t)o.addColorStop(n,t[n]);return s.fillStyle=o,s.fillRect(0,0,256,1),s.getImageData(0,0,256,1).data},s=function(e,t){var i=document.createElement("canvas"),s=i.getContext("2d"),o=e,n=e;if(i.width=i.height=2*e,1==t)s.beginPath(),s.arc(o,n,e,0,2*Math.PI,!1),s.fillStyle="rgba(0,0,0,1)",s.fill();else{var a=s.createRadialGradient(o,n,e*t,o,n,e);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),s.fillStyle=a,s.fillRect(0,0,2*e,2*e)}return i},o=function(e){for(var t=[],i=e.min,s=e.max,o=e.radi,e=e.data,n=Object.keys(e),a=n.length;a--;){var r=n[a];if(e.hasOwnProperty(r))for(var l=Object.keys(e[r]),c=l.length;c--;){var u=l[c];if(e[r].hasOwnProperty(u)){var m=e[r][u],h=o[r][u];t.push({x:r,y:u,value:m,radius:h})}}}return{min:i,max:s,data:t}};return t.prototype={renderPartial:function(e){this._drawAlpha(e),this._colorize()},renderAll:function(e){this._clear(),this._drawAlpha(o(e)),this._colorize()},_updateGradient:function(e){this._palette=i(e)},updateConfig:function(e){e.gradient&&this._updateGradient(e),this._setStyles(e)},setDimensions:function(e,t){this._width=e,this._height=t,this.canvas.width=this.shadowCanvas.width=e,this.canvas.height=this.shadowCanvas.height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(e){this._blur=0==e.blur?0:e.blur||e.defaultBlur,e.backgroundColor&&(this.canvas.style.backgroundColor=e.backgroundColor),this._opacity=255*(e.opacity||0),this._maxOpacity=255*(e.maxOpacity||e.defaultMaxOpacity),this._minOpacity=255*(e.minOpacity||e.defaultMinOpacity),this._useGradientOpacity=!!e.useGradientOpacity},_drawAlpha:function(e){for(var t=this._min=e.min,i=this._max=e.max,e=e.data||[],o=e.length,n=1-this._blur;o--;){var a=e[o],r=a.x,l=a.y,c=a.radius,u=Math.min(a.value,i),m=r-c,h=l-c,d=this.shadowCtx,p;this._templates[c]?p=this._templates[c]:this._templates[c]=p=s(c,n),d.globalAlpha=(u-t)/(i-t),d.drawImage(p,m,h),m<this._renderBoundaries[0]&&(this._renderBoundaries[0]=m),h<this._renderBoundaries[1]&&(this._renderBoundaries[1]=h),m+2*c>this._renderBoundaries[2]&&(this._renderBoundaries[2]=m+2*c),h+2*c>this._renderBoundaries[3]&&(this._renderBoundaries[3]=h+2*c)}},_colorize:function(){var e=this._renderBoundaries[0],t=this._renderBoundaries[1],i=this._renderBoundaries[2]-e,s=this._renderBoundaries[3]-t,o=this._width,n=this._height,a=this._opacity,r=this._maxOpacity,l=this._minOpacity,c=this._useGradientOpacity;e<0&&(e=0),t<0&&(t=0),e+i>o&&(i=o-e),t+s>n&&(s=n-t);for(var u=this.shadowCtx.getImageData(e,t,i,s),m=u.data,h=m.length,d=this._palette,p=3;p<h;p+=4){var f=m[p],g=4*f;if(g){var v;v=a>0?a:f<r?f<l?l:f:r,m[p-3]=d[g],m[p-2]=d[g+1],m[p-1]=d[g+2],m[p]=c?d[g+3]:v}}u.data=m,this.ctx.putImageData(u,e,t),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(e){var t,i=this.shadowCtx,s=i.getImageData(e.x,e.y,1,1),o=s.data[3],n=this._max,a=this._min;return t=Math.abs(n-a)*(o/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),o=function e(){var i=!1;return"canvas2d"===t.defaultRenderer&&(i=s),i}(),n={merge:function(){for(var e={},t=arguments.length,i=0;i<t;i++){var s=arguments[i];for(var o in s)e[o]=s[o]}return e}},a=function e(){function s(){var e=this._config=n.merge(t,arguments[0]||{});if(this._coordinator=new a,e.plugin){var s=e.plugin;if(!t.plugins[s])throw new Error("Plugin '"+s+"' not found. Maybe it was not registered.");var l=t.plugins[s];this._renderer=new l.renderer(e),this._store=new l.store(e)}else this._renderer=new o(e),this._store=new i(e);r(this)}var a=function e(){function t(){this.cStore={}}return t.prototype={on:function(e,t,i){var s=this.cStore;s[e]||(s[e]=[]),s[e].push(function(e){return t.call(i,e)})},emit:function(e,t){var i=this.cStore;if(i[e])for(var s=i[e].length,o=0;o<s;o++){var n=i[e][o];n(t)}}},t}(),r=function(e){var t=e._renderer,i=e._coordinator,s=e._store;i.on("renderpartial",t.renderPartial,t),i.on("renderall",t.renderAll,t),i.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),s.setCoordinator(i)};return s.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(e){return this._config=n.merge(this._config,e),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(e){return this._store.getValueAt?this._store.getValueAt(e):this._renderer.getValueAt?this._renderer.getValueAt(e):null}},s}();return{create:function(e){return new a(e)},register:function(e,i){t.plugins[e]=i}}}),sumo.define("jquery.drags",["jquery"],function(e){e.fn.drags=function(t){if(t=e.extend({handle:"",cursor:"move"},t),""===t.handle)var i=this;else var i=this.find(t.handle);return i.css("cursor",t.cursor).on("mousedown.drags",function(i){if(e(this).trigger("dragstart"),""===t.handle)var s=e(this).addClass("draggable");else var s=e(this).addClass("active-handle").parent().addClass("draggable");var o=s.css("z-index"),n=s.outerHeight(),a=s.outerWidth(),r=s.offset().top+n-i.pageY,l=s.offset().left+a-i.pageX;s.css("z-index",10000001).parents().on("mousemove.drags",function(t){var i=t.pageY+r-n,s=t.pageX+l-a;e(".draggable").trigger("dragmove",{top:i,left:s}),e(".draggable").offset({top:i,left:s}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",o)})}),i.preventDefault()}).on("mouseup.drags",function(){if(""===t.handle)var i=e(this).removeClass("draggable");else var i=e(this).removeClass("active-handle").parent().removeClass("draggable");i.parents().unbind("mousemove.drags"),e(this).trigger("dragend")})}}),sumo.define("jquery.resizes",["jquery"],function(e){e.fn.resizes=function(t){if(t=e.extend({handle:"",cursor:"se-resize",body:"",min_width:200,min_height:100,onResized:null},t),""===t.handle)var i=this;else var i=this.find(t.handle),s=this.find(t.body);return i.css("cursor",t.cursor).on("mousedown",function(i){if(""===t.handle)var o=e(this);else var o=e(this).parent();var n=o.css("z-index"),a=o.outerHeight(),r=o.outerWidth(),l=i.pageY,c=i.pageX,u=s.outerWidth(),m=s.outerHeight();o.css("z-index",10000001).parents().on("mousemove.jqueryResize",function(e){var i=!1;r+e.pageX-c>=t.min_width&&(i=!0,o.width(r+e.pageX-c)),a+e.pageY-l>=t.min_height&&(i=!0,o.height(a+e.pageY-l),s.height(m+e.pageY-l)),i&&(t.onResized?t.onResized():s.children().trigger("resize"))}),e(document).on("mouseup",function(){o.parents().off(".jqueryResize")}),i.preventDefault()})}}),sumo.define("heatmaps/heatmaps",["jquery","lib/heatmaps","jquery.displayrules","jquery.drags","jquery.resizes"],function(e,t){var i=function e(t){var i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i.join(".")},s=function e(t,i){return Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y))<i.r},o=function e(t,i){return t.x>i.x1&&t.x<i.x2&&t.y>i.y1&&t.y<i.y2},n=function e(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))},a=function t(i,s){l.containerEl.css("left","100%");var o=document.elementFromPoint(i,s);return l.containerEl.css("left",""),e(o).getSelector()[0]},r=function e(t,i,s){Array.isArray(i)||(i=[i]);var o=s?-1:1;return t.sort(function(e,t){var s=e[i[0]],n=t[i[0]],a=s<n?-1*o:s>n?1*o:0;if(0==a&&i[1]){s=e[i[1]];var n=t[i[1]];a=s<n?-1*o:s>n?1*o:0}return a})},l={isShown:!1,isRecording:!1,currentData:null,reopenApp:!1,currentCampaign:null,elementData:null,lastPagePos:null,countsEnabled:!0,elementListShowing:!1,elementListHovered:!1,controlsHovered:!1,noAnimationTimer:null,selectedElements:{},activeClickLabelSelector:null,theme:{backgroundColor:"rgba(3, 3, 16, .3)",gradient:{0:"#03030f",.125:"#1f1159",.25:"#952a66",.375:"#b73b50",.5:"#d6693f",.625:"#e8a736",.75:"#efd455",.875:"#fbfbc4"}},load:function t(i){l.$control&&l.$control.addClass("sumome-heatmaps-control-show"),l.containerEl&&e('<div class="sumome-heatmaps-loading" />').html("Loading heat map data...<br />Press ESC to exit").appendTo(l.containerEl),e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:l.api.properties.sumoUrl+"/apps/heatmaps/load",data:{site_id:l.api.properties.siteId,path:window.location.pathname+window.location.search,campaign_id:i||null,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},success:function t(i){i.success?(l.currentData=i.data,l.theme=i.theme,l.currentCampaign=i.campaigns,l.$elementListWrapper&&l.$elementListWrapper.css("height",""),l.refresh(),l.updateControl()):(l.currentData=null,l.currentCampaign=null,l.updateControl()),e(".sumome-heatmaps-loading").remove(),l.$control&&setTimeout(function(){e(".sumome-heatmaps-control").removeClass("sumome-heatmaps-control-show")},1e4)}})},refresh:function e(){l.findElements(l.currentData)},findElements:function t(i){var s=Number.NaN,n=Number.NaN,a=[],c={};if(i)for(var u=0;u<i.length;u++){var m,h=i[u].selector;if(!(["html","body"].indexOf(h)>=0)){try{m=e(h)}catch(e){continue}if(m.length)if(m.is(":visible")){if(!m.hasClass("sumome-heatmap-canvas")&&(c[h]?(c[h].count+=parseInt(i[u].value),c[h].clicks=c[h].count):(c[h]={element:m[0],selector:h,clicks:parseInt(i[u].value),count:parseInt(i[u].value),left:m.offset().left,top:m.offset().top,width:m.outerWidth(),height:m.outerHeight(),visible:!0},c[h].rectangle={x1:m.offset().left,x2:m.offset().left+m.outerWidth(),y1:m.offset().top,y2:m.offset().top+m.outerHeight()}),null!==m)){var d=l.findPosForElement(m,i[u].x,i[u].y);if(d){var p=parseInt(i[u].value,10);s=isNaN(s)?p:Math.min(p,s),n=isNaN(n)?p:Math.max(n,p);var f={x:Math.round(d.left),y:Math.round(d.top),value:p};a.push(f)}}}else c[h]={element:null,selector:h,clicks:parseInt(i[u].value),count:parseInt(i[u].value),top:99998,visible:!1};else c[h]={element:null,selector:h,clicks:parseInt(i[u].value),count:parseInt(i[u].value),top:99999,visible:!1}}}l.elementData={min:0,max:n,data:a,elements:[]};for(var h in c)l.elementData.elements.push(c[h]);c=l.elementData.elements;for(var u=0;u<c.length;u++)if(c[u].visible)for(var g=0;g<c.length;g++){var d={x:c[g].left+c[g].width/2,y:c[g].top+c[g].height/2},v=c[u].width-c[g].width>=0&&c[u].height-c[g].height>=0;u!=g&&c[g].visible&&v&&o(d,c[u].rectangle)&&(c[u].count+=c[g].clicks)}r(c,"count",!0);for(var u=0;u<c.length;u++)c[u].rank=u+1;l.redraw(),l.renderElementsList()},redraw:function t(){if(l.elementData&&l.map){for(var i=e(window).scrollTop(),s=e(window).scrollLeft(),o=e(window).height(),n={min:l.elementData.min,max:l.elementData.max,data:[]},a=0;a<l.elementData.data.length;a++){var r=l.elementData.data[a].x-s,c=l.elementData.data[a].y-i;c<0||c>o||n.data.push({x:r,y:c,value:l.elementData.data[a].value})}l.map.setData(n),l.map.configure(l.theme)}},toggle:function e(){l.isShown?l.hide():l.show()},hide:function t(){e(window).off(".sumome-heatmaps-widget"),e(document).off(".sumome-heatmaps-widget"),l.containerEl.remove(),l.containerEl=null,l.map=null,l.isShown=!1,l.countsEnabled=!0,l.elementListShowing=!1,l.elementListHovered=!1,l.controlsHovered=!1,l.selectedElements={},l.api.emit("showControl"),l.reopenApp?(e(document.body).find(".sumome-heatmaps").remove(),e(document.body).find(".s.u.m.o.me.sumome-react-modal-container").fadeIn(),e(document.body).css({overflow:"hidden"}),e(document.documentElement).css({overflow:"hidden"}),l.api.on("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started",function(e){l.api.off("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started"),l.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/app/route","campaigns")}),l.reopenApp=!1):(e(document.body).css({overflow:l.originalBodyOverflow}),e(document.documentElement).css({overflow:l.originalDocumentOverflow}))},show:function i(s){if(e(document.body).find(".s.u.m.o.me.sumome-react-modal-container").fadeOut(),l.originalBodyOverflow=document.body.style.overflow,l.originalDocumentOverflow=document.documentElement.style.overflow,e(document.body).css({overflow:"visible"}),e(document.documentElement).css({overflow:"visible"}),s&&(l.reopenApp=!0),l.isShown)return void l.load(s);l.isShown=!0,l.api.emit("hideControl");var o=e("<div />").addClass("sumome-heatmaps").appendTo(document.body);l.$control=e('<div class="sumome-heatmaps-control sumome-heatmaps-control-show" />'),l.$close=e('<a class="sumome-heatmaps-close">&#x2715;</a>').appendTo(l.$control),l.$title=e('<span class="sumome-heatmaps-title" />').text("Loading...").appendTo(l.$control),l.$clicks=e('<span class="sumome-heatmaps-clicks" />').text(" ").appendTo(l.$control),l.$prev=e('<a class="sumome-heatmaps-prev sumome-heatmaps-disabled" />').appendTo(l.$control).text("Previous Campaign").attr("title","Previous Campaign").click(l.previous),l.$stop=e('<a class="sumome-heatmaps-stop sumome-heatmaps-disabled" />').appendTo(l.$control).text("STOP").attr("title","Stop Campaign").click(l.stop),l.$record=e('<a class="sumome-heatmaps-record sumome-heatmaps-disabled" />').appendTo(l.$control).text("RECORD").css("display","none").attr("title","Record New Campaign").click(l.record),l.$next=e('<a class="sumome-heatmaps-next sumome-heatmaps-disabled" />').appendTo(l.$control).text("Next Campaign").attr("title","Next Campaign").click(l.next),l.$counts=e('<a class="sumome-heatmaps-counts sumome-heatmaps-disabled sumome-heatmaps-counts-on" />').appendTo(l.$control).text("HIDE COUNTS").attr("title","Toggle Click Counts").click(l.toggleCounts),l.$control.append(e("<br />")),l.$listToggle=e('<a class="sumome-heatmaps-list-toggle sumome-heatmaps-disabled" />').appendTo(l.$control).attr("title","Toggle Element List").click(l.toggleElementList),l.$listToggleTitle=e('<span class="sumome-heatmaps-list-toggle-title" />').appendTo(l.$listToggle).text("SHOW ELEMENT LIST"),l.$wrapper=e('<div class="sumome-heatmaps-control-wrapper" />'),l.$control.appendTo(l.$wrapper),l.$thermometer=e('<div class="sumome-heatmaps-thermometer" />'),l.$thermCount=e('<span class="sumome-heatmaps-thermometer-count" />').appendTo(l.$thermometer),l.$thermStem=e('<span class="sumome-heatmaps-thermometer-stem" />').appendTo(l.$thermometer),l.$thermometer.appendTo(o),l.$elementListWrapper=e('<div class="sumome-heatmaps-element-list-wrapper" />'),l.$elementListTitle=e('<div class="sumome-heatmaps-element-list-title" />').text("CLICKED ELEMENT LIST").appendTo(l.$elementListWrapper),l.$elementListClose=e('<a class="sumome-heatmaps-element-list-close">&#x2715;</a>').appendTo(l.$elementListWrapper),l.$elementListBody=e('<div class="sumome-heatmaps-element-list-body" />').appendTo(l.$elementListWrapper),l.$elementListTable=e('<table class="sumome-heatmaps-element-list-table"><thead><tr><th data-sort="rank">#</th><th data-sort="selector">element name</th><th data-sort="count">clicks</th></tr></thead></table>').appendTo(l.$elementListBody),l.$elementListItems=e('<tbody class="sumome-heatmaps-element-list-items" />').appendTo(l.$elementListTable),l.$elementListCorner=e('<a class="sumome-heatmaps-element-list-corner"></a>').appendTo(l.$elementListWrapper),l.$elementListWrapper.appendTo(l.$wrapper),l.$elementListWrapper.drags({handle:".sumome-heatmaps-element-list-title"}),l.$elementListWrapper.resizes({handle:l.$elementListCorner,cursor:"nwse-resize",min_width:250,min_height:85,onResized:e.proxy(function(){var t=l.$elementListTable.height()+25+2,i=e(window).height()-parseInt(l.$elementListWrapper.css("top").replace("px"));t>i&&(t=i);var s=e(window).width()-parseInt(l.$elementListWrapper.css("left").replace("px"));l.$elementListWrapper.css({"max-height":t,"max-width":s})},this)}),l.$elementListTitle.dblclick(function(t){var i=l.$elementListTable.height()+25+2,s=e(window).height();l.$elementListWrapper.css({top:"0px",left:"0px",width:"1px",height:i,"max-height":s})}),l.$elementListClose.click(function(e){l.toggleElementList(e,!0)}),l.$elementListWrapper.on("mouseenter",function(){l.elementListHovered=!0}),l.$elementListWrapper.on("mouseleave",function(){l.elementListHovered=!1}),l.$control.on("mouseenter",function(){l.controlsHovered=!0}),l.$control.on("mouseleave",function(){l.controlsHovered=!1}),l.$clicked=e('<div class="sumome-heatmaps-clicked sumome-heatmaps-clicked-animate" />'),l.$clickedLabel=e('<span class="sumome-heatmaps-clicked-label" />').appendTo(l.$clicked).text(".selector"),l.$clickedSelected=e('<div class="sumome-heatmaps-clicked-selected" />').appendTo(o),l.$clicked.click(l.selectActiveElClickEvent),l.$thermometer.click(l.selectActiveElClickEvent),l.$elementListTable.find("th").click(function(t){var i=0;e(this).hasClass("sumome-heatmaps-element-list-tab-sort-down")&&(i=1),e(this).hasClass("sumome-heatmaps-element-list-tab-sort-up")&&(i=-1),e(this).parent().find("th").removeClass("sumome-heatmaps-element-list-tab-sort-up").removeClass("sumome-heatmaps-element-list-tab-sort-down");var s=e(this).data("sort");if(s){var o=!1;i>0&&(o=!0),"count"!=s&&"rank"!=s||0!=i||(o=!0),e(this).addClass(o?"sumome-heatmaps-element-list-tab-sort-up":"sumome-heatmaps-element-list-tab-sort-down"),r(l.elementData.elements,s,o),l.renderElementsList()}}),l.$clicked.appendTo(o),l.$wrapper.appendTo(o),l.$close.click(function(e){e.preventDefault(),l.hide()}),l.containerEl=o;var n={container:o.get(0)};e.extend(n,l.theme);var a=t.create(n);o.css({position:"fixed"}),l.map=a,l.load(s),o.on("mousemove",e.debounce(150,function(e){l.refreshClickedLabel(e)})),o.on("mousemove",e.debounce(1,function(e){l.refreshThermometer(e)})),e(window).on("resize.sumome-heatmaps-widget",e.debounce(300,function(){var e=0,t=0;l.containerEl&&(e=l.containerEl.width(),t=l.containerEl.height()),e&&t&&l.map._renderer.setDimensions(e,t),l.refresh(),l.refreshClickedLabel(),l.refreshSelectedLabels()})),e(window).on("scroll.sumome-heatmaps-widget",e.debounce(1,function(){l.redraw(),l.refreshClickedLabel(),l.refreshSelectedLabels()})),e(document).on("keyup.sumome-heatmaps-widget",function(e){27==e.which&&l.hide()})},renderElementsList:function t(){var i=55+30*l.elementData.elements.length+2,s;l.isShown||l.show(),l.$elementListWrapper&&l.$elementListWrapper[0]&&l.$elementListWrapper[0].hasAttribute("style")&&l.$elementListWrapper.attr("style").replace("max-height:","").indexOf("height:")>-1&&l.$elementListWrapper.height()<=i||l.$elementListWrapper.css("height",i),l.$elementListItems.empty(),l.elementData.elements.forEach(function(t){function i(i,o){var n=e(t.selector),a=n.offset().top,r=n.height(),c=a+r,u=e(window).height(),m;m=r<u?a-(u/2-r/2):a;var h=250,d=e(window).scrollTop(),p=e(window).height()+d;d<=a&&p>=a&&d<=c&&p>=c&&(h=0),h&&e("html, body").stop().animate({scrollTop:m},h),clearTimeout(s),s=setTimeout(function(){l.showClickedWrapper(t),o&&o()},h)}var o=t.selector in l.selectedElements,n=e('<tr class="sumome-heatmaps-element-list-item'+(o?" sumome-heatmaps-element-list-item-selected":"")+'" selector="'+t.selector+'"><td>'+t.rank+'</td><td class="sumome-heatmaps-element-list-item-selector">'+t.selector+"</td><td>"+t.count+"</td></tr>"),a=500,r;t.visible?(n.on("click",function(s){clearTimeout(r);var o=Object?Object.keys(l.selectedElements).length:0,n=t.selector in l.selectedElements&&1==o;if(!(s.shiftKey||s.ctrlKey||s.metaKey||n)){l.$clickedSelected.empty();var a="sumome-heatmaps-element-list-item-selected";e("."+a).removeClass(a),l.selectedElements={}}if(t.selector in l.selectedElements&&l.selectedElements[t.selector])return e(this).removeClass("sumome-heatmaps-element-list-item-selected"),e("#"+l.selectedElements[t.selector].id).remove(),void delete l.selectedElements[t.selector];e(this).addClass("sumome-heatmaps-element-list-item-selected"),i(s,function(){l.setSelectedElEvent(t.selector)})}),n.on("mouseenter",function(){clearTimeout(r),r=setTimeout(i,500)}),n.on("mouseleave",function(){clearTimeout(r)})):(n.addClass("sumome-heatmaps-element-list-item-invisible"),n.attr("title","Element is not visible"),n.find(".sumome-heatmaps-element-list-item-selector").text(t.selector+" [not visible]")),l.$elementListItems.append(n)}),l.$elementListWrapper.attr("style").indexOf("left: calc(50%")>=0&&l.$elementListWrapper.css("left","calc(50% - "+l.$elementListWrapper.width()/2+"px)")},findPosForElement:function e(t,i,s){var o=t.offset(),n=t.outerWidth(),a=t.outerHeight();return o.top+=a*s,o.left+=n*i,o},toggleCounts:function t(i){e(this).hasClass("sumome-heatmaps-disabled")||(l.countsEnabled?(l.$counts.removeClass("sumome-heatmaps-counts-on"),l.$counts.text("VIEW COUNTS"),l.countsEnabled=!1,l.hideClickedWrapper(),l.$thermometer.css("opacity","0")):(l.$counts.addClass("sumome-heatmaps-counts-on"),l.$counts.text("HIDE COUNTS"),l.countsEnabled=!0))},toggleElementList:function t(i,s){e(this).hasClass("sumome-heatmaps-disabled")||(l.elementListShowing||s?(l.$listToggle.removeClass("sumome-heatmaps-list-toggle-on"),l.$listToggleTitle.text("SHOW ELEMENT LIST"),l.$elementListWrapper.removeClass("sumome-heatmaps-element-list-wrapper-showing"),l.elementListShowing=!1):(l.$elementListWrapper.css("max-width",parseInt(e(window).width()/2)),l.$elementListWrapper.css({left:"calc(50% - "+l.$elementListWrapper.width()/2+"px)",top:"","max-height":""}),l.$listToggle.addClass("sumome-heatmaps-list-toggle-on"),l.$listToggleTitle.text("HIDE ELEMENT LIST"),l.$elementListWrapper.addClass("sumome-heatmaps-element-list-wrapper-showing"),l.elementListShowing=!0))},previous:function t(){if(!e(this).hasClass("sumome-heatmaps-disabled")){var i=l.currentCampaign;i&&i.previous&&l.load(i.previous)}},next:function t(){if(!e(this).hasClass("sumome-heatmaps-disabled")){var i=l.currentCampaign;i&&i.next&&l.load(i.next)}},stop:function t(){e(this).hasClass("sumome-heatmaps-disabled")||e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:l.api.properties.sumoUrl+"/apps/heatmaps/stop",data:{site_id:l.api.properties.siteId,path:window.location.pathname+window.location.search},success:function e(t){t.success&&(l.load(),l.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop"))}})},record:function t(){e(this).hasClass("sumome-heatmaps-disabled")||e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:l.api.properties.sumoUrl+"/apps/heatmaps/start",data:{site_id:l.api.properties.siteId,path:window.location.pathname+window.location.search},success:function e(t){t.success&&(l.load(),
l.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start"))}})},autoRecord:function t(i,s,o){null==i&&(i=l.api.properties.siteId),null==s&&(s=l.api.properties.sumoUrl),e(this).hasClass("sumome-heatmaps-disabled")||e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:s+"/apps/heatmaps/start/auto",data:{site_id:i,path:window.location.pathname+window.location.search},success:o})},updateControl:function e(){var t=l.currentCampaign;if(l.$control&&l.$title){if(t&&t.current){var s="";if(t.current.started_at){var o=new Date(t.current.started_at);s=o.toLocaleDateString()+" "+o.toLocaleTimeString()}if(t.current.finished_at){var n=new Date(t.current.finished_at);s+=" - "+n.toLocaleDateString()+" "+n.toLocaleTimeString()}else s+=" - ACTIVE CAMPAIGN";l.$title.text(s),l.$clicks.html('<span class="sumome-heatmaps-clicks-count">'+i(t.current.total_clicks)+"</span> CLICK"+(1==t.current.total_clicks?"":"S")+" RECORDED")}else l.$title.text(""),l.$clicks.text("");l.$prev.toggleClass("sumome-heatmaps-disabled",!(null!=t&&null!=t.previous)),l.$stop.toggleClass("sumome-heatmaps-disabled",0==l.isRecording),l.$record.toggleClass("sumome-heatmaps-disabled",1==l.isRecording),l.isRecording?(l.$record.hide(),l.$stop.show()):(l.$stop.hide(),l.$record.show()),l.$next.toggleClass("sumome-heatmaps-disabled",!(null!=t&&null!=t.next)),l.$counts.removeClass("sumome-heatmaps-disabled");var a=l.elementData&&"elements"in l.elementData&&l.elementData.elements.length>0;l.$listToggle.toggleClass("sumome-heatmaps-disabled",!a),a||l.toggleElementList(null,!0),l.selectedElements={},l.$clickedSelected.empty()}},setRecording:function e(t){l.isRecording=t,l.isShown&&l.updateControl()},refreshClickedLabel:function t(i){var s=e(window).scrollTop(),n=e(window).scrollLeft(),r=e(window).height(),c=null,u=null,m=!1;if(i?(c={x:i.clientX,y:i.clientY},l.lastPagePos=c,m=!0):c=l.lastPagePos,(u={x:c.x+n,y:c.y+s})&&l.countsEnabled&&l.elementData&&!l.elementListHovered&&!l.controlsHovered&&l.containerEl){for(var h=!1,d=l.elementData.elements,p=[],f=0,g=0;g<d.length;g++)d[g].visible&&o(u,d[g].rectangle)&&p.push(d[g]);if(p.length>0){for(var v=0,g=0;g<p.length;g++){if(a(c.x,c.y)==p[g].selector){v=g;break}}var b=p[v];p.pop(v),p.unshift(b),!m&&l.$clicked.hasClass("sumome-heatmaps-clicked-animate")&&(l.$clicked.removeClass("sumome-heatmaps-clicked-animate"),window.clearTimeout(l.noAnimationTimer),l.noAnimationTimer=setTimeout(function(){l.$clicked.addClass("sumome-heatmaps-clicked-animate")},250)),l.showClickedWrapper(p[0])}else l.hideClickedWrapper()}else l.elementListHovered||l.controlsHovered||l.hideClickedWrapper()},refreshSelectedLabels:function t(i){if(l.selectedElements){var s=e(window).scrollTop(),o=e(window).scrollLeft();for(selector in l.selectedElements){var n=l.selectedElements[selector],a=e("#"+n.id);if(a.length>0){var r=e(n.selector);a.css({top:r.offset().top-s-2,left:r.offset().left-o-2,width:r.outerWidth()+4,height:r.outerHeight()+4})}}}},showClickedWrapper:function t(s){var o=e(window).scrollTop(),n=e(window).scrollLeft(),a=e(window).height(),r=l.currentCampaign,c="current"in r&&r.current?r.current.total_clicks:null,u=(100*s.count/c).toFixed(0),m=s.left-n-2,h=s.top-o-2,d=s.width+4,p=s.height+4,f=a-(h+p);l.$clicked.css("opacity","1"),l.$clicked.css("left",m).css("top",h).css("width",d).css("height",p);var g=i(s.count)+(1==s.count?" click":" clicks");if(c&&(g=g+" ("+u+"%)"),l.$clickedLabel.html('<span class="sumome-heatmaps-clicked-label-name">'+s.selector+'</span><span class="sumome-heatmaps-clicked-label-stat">'+g+"</span>"),l.activeClickLabelSelector=s.selector,h>20||f>20){l.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-mid"),l.$clickedLabel.css("top","");-1*h+a-18>p?l.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-top"):l.$clickedLabel.addClass("sumome-heatmaps-clicked-label-top")}else l.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-top"),l.$clickedLabel.addClass("sumome-heatmaps-clicked-label-mid"),l.$clickedLabel.css("top",-1*h+5)},hideClickedWrapper:function e(){l.$clicked.css("opacity","0"),l.activeClickLabelSelector=null},refreshThermometer:function t(o){var a=e(window).scrollTop(),r=e(window).scrollLeft(),c=e(window).width(),u={x:o.clientX,y:o.clientY},m=!1,h=0;if(l.elementData&&l.countsEnabled&&!l.elementListHovered&&!l.controlsHovered){for(var d=0;d<l.elementData.data.length;d++){var p={x:l.elementData.data[d].x-r,y:l.elementData.data[d].y-a,r:40};if(s(u,p)){m=!0;var f=l.elementData.data[d].value,g=n(u,p).toFixed(2),v=(1-g/45).toFixed(2);g<5&&(v=1),h+=Math.round(f*v)}}if(m){var b=u.y-21,y=u.x-0;l.$thermometer.css("opacity","1"),l.$thermometer.css("left",y).css("top",b),h<=0&&(h=1),l.$thermCount.text(h>1?i(h)+" clicks":"1 click"),y>c-200?(l.$thermometer.addClass("sumome-heatmaps-thermometer-left"),l.$thermometer.css("left","initial").css("right",c-y)):(l.$thermometer.removeClass("sumome-heatmaps-thermometer-left"),l.$thermometer.css("right",""))}else l.$thermometer.css("opacity","0")}else l.$thermometer.css("opacity","0")},setSelectedElEvent:function e(t){var i="sumome-heatmaps-clicked-"+(new Date).getUTCMilliseconds();l.$clicked.clone().removeClass("sumome-heatmaps-clicked-animate").addClass("sumome-heatmaps-clicked-selected").attr("id",i).appendTo(l.$clickedSelected),l.selectedElements[t]={id:i,selector:t}},selectActiveElClickEvent:function t(i){var s=l.activeClickLabelSelector;if(s){var o=Object?Object.keys(l.selectedElements).length:0,n=s in l.selectedElements&&1==o;if(!(i.shiftKey||i.ctrlKey||i.metaKey||n)){l.$clickedSelected.empty();var a="sumome-heatmaps-element-list-item-selected";e("."+a).removeClass(a),l.selectedElements={}}if(s in l.selectedElements&&l.selectedElements[s])return e(".sumome-heatmaps-element-list-item[selector='"+s+"']").removeClass("sumome-heatmaps-element-list-item-selected"),e("#"+l.selectedElements[s].id).remove(),void delete l.selectedElements[s];e(".sumome-heatmaps-element-list-item[selector='"+s+"']").addClass("sumome-heatmaps-element-list-item-selected"),l.setSelectedElEvent(l.activeClickLabelSelector)}}};return l}),sumo.define("jquery.similar",["jquery"],function(e){String.prototype.levenshtein=function(e){var t=new Array,i=e,s=this,o=i.length,n=this.length,a,r,l=function(e,t,i){var s=e;return t<s&&(s=t),i<s&&(s=i),s};if(0!=o&&0!=n){for(var a=0;a<=o;a++)t[a]=new Array;for(a=0;a<=o;a++)t[a][0]=a;for(r=0;r<=n;r++)t[0][r]=r;for(a=1;a<=o;a++){var c=i.charAt(a-1);for(r=1;r<=n;r++){var u=s.charAt(r-1);t[a][r]=c==u?t[a-1][r-1]:1+l(t[a-1][r-1],t[a][r-1],t[a-1][r])}}return t[o][n]}},e.fn.textExcept=function(t){if(!this.get(0)||-1!=e.inArray(this.get(0).nodeName.toLowerCase(),["script"]))return"";try{return e(this).contents().filter(function(){return 1!=e(this).is(t)}).map(function(){return 1==this.nodeType&&-1==e.inArray(this.nodeName.toLowerCase(),["script"])?e(this).textExcept(t):3==this.nodeType?e.trim(this.data):void 0}).get().join("")}catch(e){}return""},e.expr[":"].similar=e.expr.createPseudo(function(t){return function(i){var s=e(i).textExcept(".sumome-leads-edit").replace(/[^0-9a-zA-Z\s.,]/g,"").substr(0,128);return s&&s.levenshtein(t.substr(0,128))<5}})}),sumo.define("es6!services/heatmaps/index",["jquery","heatmaps/heatmaps","selectorator","jquery.similar"],function(e,t){return function(i){var s=!1,o=!1,n=0,a=[],r=Date.parse(new Date),l=function e(t){for(var i=(new Date).getTime();(new Date).getTime()<i+t;);},c=function t(){if(a.length){var s=window.location.pathname+window.location.search,o=encodeURIComponent(JSON.stringify(a)),n=e("<img />").css({display:"none"}).attr("src",i.properties.sumoUrl+"/apps/heatmaps/click?clicks="+o+"&site_id="+i.properties.siteId+"&path="+s);n.on("error",function(){e(this).remove()}),n.on("load",function(){e(this).remove()}),e(document.body).append(n),a=[],r=Date.parse(new Date)}},u=function t(i){if(1==i.which){var s,o,n;if(document.elementFromPoint)o=document.elementFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint)s=document.caretPositionFromPoint(i.clientX,i.clientY),o=s.offsetNode,n=s.offset;else{if(!document.caretRangeFromPoint)return;s=document.caretRangeFromPoint(i.clientX,i.clientY),o=s.startContainer,n=s.startOffset}if(e(o).parents("svg").length>=1&&(o=e(o).parents("svg")[0]),!(e(o).closest(".sumome-control").length>0||e(o).closest(".sumome-heatmaps").length>0)&&(n=e(o).offset())&&"left"in n&&"top"in n){n.left=i.pageX-n.left,n.top=i.pageY-n.top;var u=.05,m=n.left/e(o).outerWidth(),h=n.top/e(o).outerHeight();m=(.05*Math.round(m/.05)).toFixed(2),h=(.05*Math.round(h/.05)).toFixed(2);var d={left:m,top:h},p=e(o).getSelector()[0];if(p&&!isNaN(d.left)&&!isNaN(d.top)&&isFinite(d.left)&&isFinite(d.top)){var f={selector:p,x:d.left,y:d.top,_:Math.random()};a.push(f);var g=e(i.target).is("a")&&e(i.target).attr("href")&&0!==e(i.target).attr("href").indexOf("#")&&0!==e(i.target).attr("href").toLowerCase().indexOf("javascript"),v=e(i.target).parents("a").length>0&&e(i.target).parents("a").attr("href")&&0!==e(i.target).parents("a").attr("href").indexOf("#")&&0!==e(i.target).parents("a").attr("href").indexOf("javascript"),b=!(!g||!e(i.target).hasClass("no-delay"))||!(!v||!e(i.target).parents("a").hasClass("no-delay")),y=Date.parse(new Date)-r;!g&&!v||b?(y>=1e4||a.length>=5)&&c():(c(),l(500))}}}},m=function t(){o||(e(window).unload(function(){c()}),e(document).on("mousedown.sumome-heatmaps",u))},h=function t(){o&&(e(document).off("mousedown.sumome-heatmaps"),o=!1)},d=function o(){e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:i.properties.sumoUrl+"/apps/heatmaps/status",data:{site_id:i.properties.siteId,user_id:i.properties.user,path:window.location.pathname+window.location.search},success:function o(a){var r=!0;a.success?(s=a.isRecording,n=a.count,r=a.track_all_users):s=!1,i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:n});var l=!(!i.properties.geoLocation||!i.properties.geoLocation.ctry)&&i.properties.geoLocation.ctry,c=i.properties.views?i.properties.views:1;a.hasHeatmaps&&a.count<=0&&a.display_rules.length>0&&e.isCurrentUrlAllowed(a.display_rules,null,l,c)?t.autoRecord(i.properties.siteId,i.properties.sumoUrl,function(e){e.success&&(s=!0,n=1,i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:n}),m())}):s&&(1==r||0==r&&null==i.properties.user)?m():h()}})},p=function o(a){var r=!0;a.success?(s=a.isRecording,n=a.count,r=a.track_all_users):s=!1,i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:n});var l=!(!i.properties.geoLocation||!i.properties.geoLocation.ctry)&&i.properties.geoLocation.ctry,c=i.properties.views?i.properties.views:1;a.hasHeatmaps&&a.count<=0&&a.display_rules.length>0&&e.isCurrentUrlAllowed(a.display_rules,null,l,c)?t.autoRecord(i.properties.siteId,i.properties.sumoUrl,function(e){e.success&&(s=!0,n=1,i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:n}),m())}):s&&(1==r||0==r&&null==i.properties.user)?m():h()};return{init:function e(t,o){i.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/checkStatus",function(){i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:n})}),i.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start",function(){d()}),i.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop",function(){d()}),p(t.serviceData),o()},destroy:function e(t){t()}}}}),sumo.define("plugins/text!image-sharer/templates/sharer_popup.html",[],function(){return'<div class="sumome-image-sharer-popup-form">\n  <div class="sumome-form">\n    <div class="sumome-row" id="sumome-image-sharer">\n      <div class="sumome-image-sharer-preloader">\n        <img src="{{preloader}}" />\n      </div>\n    </div>\n  </div>\n</div>\n'}),function(){var i;i=function(e){var t,i;return t=!1,e(function(){var s;return s=(document.body||document.documentElement).style,t=void 0!==s.animation||void 0!==s.WebkitAnimation||void 0!==s.MozAnimation||void 0!==s.MsAnimation||void 0!==s.OAnimation,e(window).bind("resize.vex",function(e){if(!e||"resize"!=e.type||e.target==window)return i.resize()}),e(window).bind("keyup.vex",function(e){if(27===e.keyCode)return i.closeByEscape()})}),i={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"sumome-vex",content:"sumome-vex-content",overlay:"sumome-vex-overlay",close:"sumome-vex-close",closing:"sumome-vex-closing",open:"sumome-vex-open"},defaultOptions:{content:"",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",openClassName:"",closeCSS:{},allowBackgroundScrolling:!1},open:function(t){return t=e.extend({},i.defaultOptions,t),t.id=i.globalID,i.globalID+=1,t.$vex=e("<div>").addClass(i.baseClassNames.vex).addClass(t.className).css(t.css).data({vex:t}),t.openClassName&&t.$vex.addClass(t.openClassName),t.allowBackgroundScrolling||i.setupHTMLClassName(t.$vex),t.$vexOverlay=e("<div>").addClass(i.baseClassNames.overlay).addClass(t.overlayClassName).css(t.overlayCSS).data({vex:t}),t.overlayClosesOnClick&&t.$vexOverlay.bind("click.vex",function(t){if(t.target===this)return i.close(e(this).data().vex.id)}),t.$vex.append(t.$vexOverlay),t.$vexContent=e("<div>").addClass(i.baseClassNames.content).addClass(t.contentClassName).css(t.contentCSS).append(t.content).data({vex:t}),t.$vexContent.find("link").bind("load.vex",function(e){return i.resize()}),t.$vexContent.bind("resize.vex",function(e){return i.resize()}),t.$vex.append(t.$vexContent),t.customCloseButton?t.showCloseButton&&(t.$closeButton=t.$vexContent.find("."+t.closeClassName).eq(0).data({vex:t}).bind("click.vex",function(){return i.close(e(this).data().vex.id)})):t.showCloseButton&&(t.$closeButton=e("<div>").addClass(i.baseClassNames.close).addClass(t.closeClassName).css(t.closeCSS).data({vex:t}).bind("click.vex",function(){return i.close(e(this).data().vex.id)}),t.$vexContent.append(t.$closeButton)),e(t.appendLocation).append(t.$vex),t.afterOpen&&t.afterOpen(t.$vexContent,t),setTimeout(function(){return t.$vexContent.trigger("vexOpen",t)},0),t.$vexContent},getAllVexes:function(){return e("."+i.baseClassNames.vex+':not(".'+i.baseClassNames.closing+'") .'+i.baseClassNames.content)},getVexByID:function(t){return i.getAllVexes().filter(function(){return e(this).data().vex.id===t})},close:function(e){var t;if(!e){if(t=i.getAllVexes().last(),!t.length)return!1;e=t.data().vex.id}return i.closeByID(e)},closeAll:function(){var t;return t=i.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),!(null==t||!t.length)&&(e.each(t.reverse(),function(e,t){return i.closeByID(t)}),!0)},closeByID:function(s){var o,n,a,r,l;if(n=i.getVexByID(s),n.length)return o=n.data().vex.$vex,l=e.extend({},n.data().vex),a=function(){if(l.beforeClose)return l.beforeClose(n,l)},r=function(){if(n.trigger("vexClose",l),o.remove(),l.afterClose)return l.afterClose(n,l)},t?(a(),o.unbind(i.animationEndEvent).bind(i.animationEndEvent,function(){return r()}).addClass(i.baseClassNames.closing)):(a(),r()),!0},resizeByID:function(t){var s,o,n,a,r;if(o=i.getVexByID(t),o.length)return s=o.data().vex.$vex,r=e.extend({},o.data().vex),o.trigger("vexResize",r),!0},resize:function(){var t,s,o;return o=i.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),!(null==o||!o.length)&&(s=Math.max.apply(Math,o),t=i.getVexByID(s),i.resizeByID(s))},closeByEscape:function(){var t,s,o;return o=i.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),!(null==o||!o.length)&&(s=Math.max.apply(Math,o),t=i.getVexByID(s),!0===t.data().vex.escapeButtonCloses&&i.closeByID(s))},setupHTMLClassName:function(t){return t.bind("vexOpen.vex",function(){return e("html").addClass(i.baseClassNames.open)}).bind("vexClose.vex",function(){if(!i.getAllVexes().length)return e("html").removeClass(i.baseClassNames.open)})},hideLoading:function(){return e(".vex-loading-spinner").remove()},showLoading:function(){return i.hideLoading(),e("body").append('<div class="vex-loading-spinner '+i.defaultOptions.className+'"></div>')}}},"function"==typeof sumo.define&&sumo.define.amd?sumo.define("vex",["jquery"],i):"object"==typeof e?t.exports=i(require("jquery")):window.vex=i(jQuery)}.call(this),sumo.define("jquery.timer",["jquery"],function(e){"use strict";if(null===e)throw"jQuery is not defined";var t=function(t){var i={timerCallback:function(){},startCallback:function(){},pauseCallback:function(){},resumeCallback:function(){},stopCallback:function(){},finishCallback:function(){},interval:1e3,timeout:!1,useSetTimeout:!0};t.interval=parseInt(t.interval,10),t.interval=isNaN(t.interval)?i.interval:t.interval,t.timeout=parseInt(t.timeout,10),t.timeout=isNaN(t.timeout)?i.timeout:t.timeout,this._options=e.extend(i,t),this._timerFunction=this._options.useSetTimeout?"Timeout":"Interval",this._timerID=null,this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._status="stopped"};t.prototype={_activate:function(){var e=this;this._startTime=(new Date).getTime(),this._timerID=window["set"+this._timerFunction](function(){e._passedTime=(new Date).getTime()-e._startTime,e._options.timeout&&e._passedTime>=e._options.timeout?e._finish():e._options.timerCallback()},this._options.interval)},_finish:function(){window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._timerID=null,this._options.finishCallback(),this._status="finished"},start:function(){0===this._startTime&&(this._activate(),this._options.startCallback(),this._status="running")},pause:function(){0!==this._startTime&&null!==this._timerID&&(window["clear"+this._timerFunction](this._timerID),this._passedTime=(new Date).getTime()-this._startTime,this._pausedInterval=this._passedTime%this._options.interval,this._timerID=null,this._options.pauseCallback(),this._status="paused")},resume:function(e){if(e=void 0!==e&&e,-1!==this._pausedInterval){if(e){var t=this;setTimeout(function(){t._options.timerCallback(),t._options.useSetTimeout||t._activate()},this._options.interval-this._pausedInterval)}else this._activate();this._options.resumeCallback(),this._status="running"}},stop:function(){0!==this._startTime&&null!==this._timerID&&(this._finish(),this._options.stopCallback(),this._status="stopped")},kill:function(){null!==this._timerID&&(window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._timerID=null,this._status="stopped")},status:function(){return this._status}},e.timer=function(i,s,o,n){if(void 0===i)return e.timer["#LIST#"];if("string"!=typeof i||!i.match(/^[a-zA-Z][a-zA-Z_0-9]*$/))throw"Invalid timer name (it must start with a letter and cannot contain other characters than letters, numbers and underscore";if(void 0===s)return e.timer[i];if(null===s){if(e.timer[i]){e.timer[i].kill(),delete e.timer[i];var a=e.timer["#LIST#"].indexOf(i);a>-1&&e.timer["#LIST#"].splice(a,1)}return!0}if("function"!=typeof s)throw"Please provide a callback function for setTimer/setInterval function";if(o=parseInt(o,10),isNaN(o)||o<=0)throw"Please provide an interval for timer (in seconds)";return n=n||{},n.timerCallback=s,n.interval=o,e.timer[i]=new t(n),e.timer["#LIST#"].push(i),e.timer[i]},e.timer["#LIST#"]=[]}),sumo.define("jquery.naturalwidth",["jquery"],function(e){for(var t=["Width","Height"],i;i=t.pop();)!function(t,i){e.fn[t]=t in new Image?function(){return this[0][t]}:function(){var e=this[0],t,s;return"img"===e.tagName.toLowerCase()&&(t=new Image,t.src=e.src,s=t[i]),s}}("natural"+i,i.toLowerCase())}),sumo.define("jquery.ui.position",["jquery"],function(e){function t(e,t,i){return[parseInt(e[0],10)*(h.test(e[0])?t/100:1),parseInt(e[1],10)*(h.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,n=Math.max,a=Math.abs,r=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,m=/^\w+/,h=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=s.children()[0];return e("body").append(s),t=n.offsetWidth,s.css("overflow","scroll"),i=n.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),o=t-i},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),s=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,n="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return d.apply(this,arguments);o=e.extend({},o);var h,p,f,g,v,b,y=e(o.of),w=e.position.getWithinInfo(o.within),_=e.position.getScrollInfo(w),x=(o.collision||"flip").split(" "),k={};return b=s(y),y[0].preventDefault&&(o.at="left top"),p=b.width,f=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e=(o[this]||"").split(" "),t,i;1===e.length&&(e=l.test(e[0])?e.concat(["center"]):c.test(e[0])?["center"].concat(e):["center","center"]),e[0]=l.test(e[0])?e[0]:"center",e[1]=c.test(e[1])?e[1]:"center",t=u.exec(e[0]),i=u.exec(e[1]),k[this]=[t?t[0]:0,i?i[0]:0],o[this]=[m.exec(e[0])[0],m.exec(e[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===o.at[0]?v.left+=p:"center"===o.at[0]&&(v.left+=p/2),"bottom"===o.at[1]?v.top+=f:"center"===o.at[1]&&(v.top+=f/2),h=t(k.at,p,f),v.left+=h[0],v.top+=h[1],this.each(function(){var s,l,c=e(this),u=c.outerWidth(),m=c.outerHeight(),d=i(this,"marginLeft"),b=i(this,"marginTop"),S=u+d+i(this,"marginRight")+_.width,C=m+b+i(this,"marginBottom")+_.height,T=e.extend({},v),E=t(k.my,c.outerWidth(),c.outerHeight());"right"===o.my[0]?T.left-=u:"center"===o.my[0]&&(T.left-=u/2),"bottom"===o.my[1]?T.top-=m:"center"===o.my[1]&&(T.top-=m/2),T.left+=E[0],T.top+=E[1],e.support.offsetFractions||(T.left=r(T.left),T.top=r(T.top)),s={marginLeft:d,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[x[t]]&&e.ui.position[x[t]][i](T,{targetWidth:p,targetHeight:f,elemWidth:u,elemHeight:m,collisionPosition:s,collisionWidth:S,collisionHeight:C,offset:[h[0]+E[0],h[1]+E[1]],my:o.my,at:o.at,within:w,elem:c})}),o.using&&(l=function(e){var t=g.left-T.left,i=t+p-u,s=g.top-T.top,r=s+f-m,l={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:c,left:T.left,top:T.top,width:u,height:m},horizontal:i<0?"left":t>0?"right":"center",vertical:r<0?"top":s>0?"bottom":"middle"};p<u&&a(t+i)<p&&(l.horizontal="center"),f<m&&a(s+r)<f&&(l.vertical="middle"),n(a(t),a(i))>n(a(s),a(r))?l.important="horizontal":l.important="vertical",o.using.call(this,e,l)}),c.offset(e.extend(T,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i=t.within,s=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=e.left-t.collisionPosition.marginLeft,r=s-a,l=a+t.collisionWidth-o-s,c;t.collisionWidth>o?r>0&&l<=0?(c=e.left+r+t.collisionWidth-o-s,e.left+=r-c):e.left=l>0&&r<=0?s:r>l?s+o-t.collisionWidth:s:r>0?e.left+=r:l>0?e.left-=l:e.left=n(e.left-a,e.left)},top:function(e,t){var i=t.within,s=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,r=s-a,l=a+t.collisionHeight-o-s,c;t.collisionHeight>o?r>0&&l<=0?(c=e.top+r+t.collisionHeight-o-s,e.top+=r-c):e.top=l>0&&r<=0?s:r>l?s+o-t.collisionHeight:s:r>0?e.top+=r:l>0?e.top-=l:e.top=n(e.top-a,e.top)}},flip:{left:function(e,t){var i=t.within,s=i.offset.left+i.scrollLeft,o=i.width,n=i.isWindow?i.scrollLeft:i.offset.left,r=e.left-t.collisionPosition.marginLeft,l=r-n,c=r+t.collisionWidth-o-n,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,m="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0],d,p;l<0?((d=e.left+u+m+h+t.collisionWidth-o-s)<0||d<a(l))&&(e.left+=u+m+h):c>0&&((p=e.left-t.collisionPosition.marginLeft+u+m+h-n)>0||a(p)<c)&&(e.left+=u+m+h)},top:function(e,t){var i=t.within,s=i.offset.top+i.scrollTop,o=i.height,n=i.isWindow?i.scrollTop:i.offset.top,r=e.top-t.collisionPosition.marginTop,l=r-n,c=r+t.collisionHeight-o-n,u="top"===t.my[1],m=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,d=-2*t.offset[1],p,f;l<0?(f=e.top+m+h+d+t.collisionHeight-o-s,e.top+m+h+d>l&&(f<0||f<a(l))&&(e.top+=m+h+d)):c>0&&(p=e.top-t.collisionPosition.marginTop+m+h+d-n,e.top+m+h+d>c&&(p>0||a(p)<c)&&(e.top+=m+h+d))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,o,n,a=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(n in s)t.style[n]=s[n];t.appendChild(r),i=a||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",o=e(r).offset().left,e.support.offsetFractions=o>10&&o<11,t.innerHTML="",i.removeChild(t)}()}),sumo.define("jquery.nearest",["jquery","jquery.drags","jquery.resizes","jquery.ui.position"],function(e){function t(t,s,o){t||(t="div");var n=e(s.container),a=n.offset()||{left:0,top:0},r=[n.width()||0,n.height()||0],l={x:[a.left,a.left+r[0]],y:[a.top,a.top+r[1]],w:[0,r[0]],h:[0,r[1]]},c,u,m;for(c in l)l.hasOwnProperty(c)&&(m=i.exec(s[c]))&&(u=l[c],s[c]=(u[1]-u[0])*m[1]/100+u[0]);!1===s.sameX&&!1===s.checkHoriz&&(s.sameX=!s.checkHoriz),!1===s.sameY&&!1===s.checkVert&&(s.sameY=!s.checkVert);var h=n.find(t),d=[],p=!!s.furthest,f=!s.sameX,g=!s.sameY,v=!!s.onlyX,b=!!s.onlyY,y=p?0:1/0,w=parseFloat(s.x)||0,_=parseFloat(s.y)||0,x=parseFloat(w+s.w)||w,k=parseFloat(_+s.h)||_,S=parseFloat(s.tolerance)||0,C=!!e.fn.each2,T=Math.min,E=Math.max;!s.includeSelf&&o&&(h=h.not(o)),S<0&&(S=0),h[C?"each2":"each"](function(t,i){var s=C?i:e(this),o=s.offset(),n=o.left,a=o.top,r=s.outerWidth(),l=s.outerHeight(),c=n+r,u=a+l,m=E(n,w),h=T(c,x),$=E(a,_),I=T(u,k),L=h>=m,A=I>=$,O,P,B,D;(f&&g||!f&&!g&&L&&A||f&&A||g&&L||f&&v||g&&b)&&(O=L?0:m-h,P=A?0:$-I,B=v||b?v?O:P:L||A?E(O,P):Math.sqrt(O*O+P*P),(D=p?B>=y-S:B<=y+S)&&(y=p?E(y,B):T(y,B),d.push({node:this,dist:B})))});var $=d.length,I=[],L,A,O,P;if($)for(p?(L=y-S,A=y):(L=y,A=y+S),O=0;O<$;O++)P=d[O],P.dist>=L&&P.dist<=A&&I.push(P.node);return I}var i=/^([\d.]+)%$/;e.each(["nearest","furthest","touching"],function(i,s){var o={x:0,y:0,w:0,h:0,tolerance:1,container:document,furthest:"furthest"==s,includeSelf:!1,sameX:"touching"===s,sameY:"touching"===s,onlyX:!1,onlyY:!1};e[s]=function(i,s,n){if(!i||void 0===i.x||void 0===i.y)return e([]);var a=e.extend({},o,i,n||{});return e(t(s,a))},e.fn[s]=function(i,s){if(!this.length)return this.pushStack([]);var n;if(i&&e.isPlainObject(i))return n=e.extend({},o,i,s||{}),this.pushStack(t(this,n));var a=this.offset(),r={x:a.left,y:a.top,w:this.outerWidth(),h:this.outerHeight()};return n=e.extend({},o,r,s||{}),this.pushStack(t(i,n,this))}})}),sumo.define("es6!services/image-sharer/index",["jquery","URI","color","articles","plugins/text!image-sharer/templates/sharer_popup.html","vex","twitter-text","jquery.timer","jquery.naturalwidth","jquery.nearest","jquery.displayrules"],function(e,t,i,s,o,n,a,r){e.expr[":"].invisible=e.expr.createPseudo(function(t){return function(t){if("hidden"===e(t).css("visibility")||0===e(t).css("opacity"))return!0;var i=e(t).parent();return!!i&&i.is(":invisible")}});var l=function e(t,i){return!(i.x>t.x+t.width||i.x+i.width<t.x||i.y>t.y+t.height||i.y+i.height<t.y)},c={currentImage:null,buttonEl:null,win:null,currentImageUrl:null,currentImageData:null,useUrlShortener:!0,shortener:"sumoly",short_domain:null,useAltText:!0,twitterUsername:null,color:null,position:null,contentOnly:!1,ignoreLinks:!0,ignoreImgLinks:!1,relShareOnly:!1,ctry:!1,shortUrls:{},scope:function t(){if(c.contentOnly){var i=s.findAll();return e(i)}return e(document)},cleanup:function t(){c.scope().off(".image-sharer"),e(window).off(".image-sharer")},init:function t(i){o=o.replace("{{preloader}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/preloader.gif"),e(window).on("scroll",c.debounce(function(){c.scroll()},1)),i.success&&(c.useAltText=i.use_alt_text,c.useUrlShortener=i.use_url_shortener,c.shortener=i.shortener,c.shortDomain=i.short_domain,c.contentOnly=i.content_only,c.ignoreLinks=i.ignore_links,c.ignoreImgLinks=i.ignore_img_links,c.relShareOnly=i.rel_share_only,c.twitterUsername=i.twitter_username,c.color=i.color,c.utm=i.utm,c.utm_source=i.utm_source,c.utm_medium=i.utm_medium,c.utm_name=i.utm_name,c.utm_custom_key=i.utm_custom_key,c.utm_custom_val=i.utm_custom_val,c.vertical=i.vertical,c.vertical_offset=parseInt(i.vertical_offset),c.vertical_offset_type=i.vertical_offset.replace(/[0-9]/g,""),c.horizontal_offset=parseInt(i.horizontal_offset),c.horizontal_offset_type=i.horizontal_offset.replace(/[0-9]/g,""),c.hasImageSharer=i.hasImageSharer,c.position=i.position,c.display_rules=i.display_rules,c.services=i.services,c.ctry=!(!c.sumoProperties.geoLocation||!c.sumoProperties.geoLocation.ctry)&&c.sumoProperties.geoLocation.ctry,c.views=!(!c.sumoProperties.views||!c.sumoProperties.views)&&c.sumoProperties.views,c.reflink="https://sumo.com/?src=sm-is-"+c.sumoProperties.siteId+"&utm_source=sumo-powered-by&utm_medium=image-sharer&utm_campaign="+c.sumoProperties.siteId,c.setup()),c.api.on("55c989d5-855d-4538-b67b-3cdb46acd968/service/settings",function(e){c.hideSharer(),c.cleanup(),c.useAltText=e.use_alt_text,c.contentOnly=e.content_only,c.ignoreLinks=e.ignore_links,c.ignoreImgLinks=e.ignore_img_links,c.relShareOnly=e.rel_share_only,c.useUrlShortener=e.use_url_shortener,c.shortener=e.shortener,c.shortDomain=e.short_domain,c.twitterUsername=e.twitter_username,c.color=e.color,c.utm=e.utm,c.utm_source=e.utm_source,c.utm_medium=e.utm_medium,c.utm_name=e.utm_name,c.utm_custom_key=e.utm_custom_key,c.utm_custom_val=e.utm_custom_val,c.hasImageSharer=e.hasImageSharer,c.position!==e.position&&(c.position=e.position,c.positionSharer()),c.display_rules=e.display_rules,c.services=e.services,c.setup()})},setup:function t(){if(c.buttonEl=e('<div class="sumome-image-sharer"></div>'),c.services.slice(0).forEach(e.proxy(function(t){var s="sumome-image-sharer-"+t;"yummly"===t&&(s+=" sumome-image-sharer-src-only");var o=e('<a href="javascript:void(0);" class="'+s+'"><div></div></a>');if(c.vertical&&o.addClass("sumome-image-sharer-vertical"),c.color){var n={backgroundColor:c.color,borderColor:i.shadeColor(c.color,-5)};o.css(n).hover(e.proxy(function(){e(this).css({backgroundColor:i.shadeColor(c.color,5),borderColor:c.color})}),e.proxy(function(){e(this).css(n)}));var a={};"black"===i.whiteOrBlack(c.color)&&(a.backgroundImage='url("'+this.sumoProperties.baseUrl+"images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/"+t+'-black-60.png")'),o.find("div").css(a).hover(e.proxy(function(){e(this).css(a)}))}c.buttonEl.append(o)},c)),c.vertical?(c.buttonEl.css("width",40),
c.buttonEl.css("height",40*c.services.length)):c.buttonEl.css("width",40*c.services.length),c.buttonEl.on("click","a.sumome-image-sharer-twitter",c.openTwitter),c.buttonEl.on("click","a.sumome-image-sharer-facebook",c.openFacebook),c.buttonEl.on("click","a.sumome-image-sharer-pinterest",c.openPinterest),c.buttonEl.on("click","a.sumome-image-sharer-yummly",c.openYummly),e("body").append(c.buttonEl),e.isCurrentUrlAllowed(c.display_rules,null,c.ctry,c.views)){var s=c.scope();s.on("mouseenter.image-sharer","img",c.debounce(c.mouseenter,250)),s.on("mouseleave.image-sharer","img",c.debounce(c.mouseleave,250)),e(window).on("touchstart.image-sharer",c.debounce(c.touch,200)),e(window).on("resize.image-sharer",c.throttle(c.positionSharer,150))}},debounce:function e(t,i){var s;return function(){var e=this,o=arguments;clearTimeout(s),(s=setTimeout(function(){s=null,t.apply(e,o)},i))||t.apply(e,o)}},throttle:function e(t,i){var s,o,n,a=null,r=0,l=function e(){r=(new Date).getTime(),a=null,n=t.apply(s,o),a||(s=o=null)};return function(){var e=(new Date).getTime();r||(r=e);var c=i-(e-r);return s=this,o=arguments,c<=0||c>i?(clearTimeout(a),a=null,r=e,n=t.apply(s,o),a||(s=o=null)):a||(a=setTimeout(l,c)),n}},loadImageProperties:function i(s){var o=c.currentImage.attr("src");c.useAltText?c.currentImageAlt=c.currentImage.attr("alt")||e(document).find("title").text()||"":c.currentImageAlt=e(document).find("title").text()||"";try{if(0===o.indexOf("data:image")){if(c.currentImageUrl=o,c.currentImageData=o,"yummly"===s)throw new Error}else c.currentImageUrl=new t(o).absoluteTo(window.location.toString()).toString(),c.currentImageData=c.getImageData(c.currentImage);return!0}catch(e){var n=c.currentImage.attr("srcset"),a=[];if(!n)return!1;if(n=n.split(","),n&&n.length&&(n.forEach(function(e){(e=e.trim().split(" "))&&2===e.length&&a.push({src:e[0],weight:parseInt(e[1])})}),a.sort(function(e,t){return t.weight-e.weight})),!a.length)return!1;try{return c.currentImageUrl=new t(a[0].src).absoluteTo(window.location.toString()).toString(),c.currentImageData=c.getImageData(c.currentImage),!0}catch(e){return!1}}},openFacebook:function t(i){i.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-click"}),c.loadImageProperties("facebook")&&(c.$modal=n.open({content:o,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),c.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.kill()}),c.$modal.on("vexResize",e.proxy(function(t,i){var s=Math.max((e(window).height()-i.$vexContent.outerHeight())/2,0);i.$vex.css({"padding-top":s+"px"})},this)),c.$modal.on("vexOpen",e.proxy(function(e,t){c.$modal.resize(),c.loadFacebookMarkup()},this)))},generateShare:function t(i){var s=window.location.href;if(s=c.checkAndAddUTMParams(s,"facebook"),c.useUrlShortener){var o=c.shortener+":"+s;o in c.shortUrls?c.generateShareFromUrl(i,c.shortUrls[o]):e.ajax({type:"POST",dataType:"json",url:c.sumoProperties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:c.sumoProperties.siteId,href:s},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(c.shortUrls[o]=e.url,s=e.url),c.generateShareFromUrl(i,s)})}else c.generateShareFromUrl(i,s)},generateShareFromUrl:function e(t,i){t=(t+" "+i).trim(),c.$modal.find("textarea").val(t),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),c.$modal.find(".sumome-image-sharer-fb-message").text(t)},loadFacebookMarkup:function t(i){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/load",data:{site_id:c.sumoProperties.siteId},statusCode:{401:function e(){i||c.loadFacebookMarkup()}},success:function t(i){i=i.replace("{{sumome-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),i=i.replace("{{facebook-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/facebook-icon-128.png"),e("#sumome-image-sharer").html(i);var s=e("#sumome-image-sharer .sumome-connect");s.length>0?(c.goSmall(),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),s.click(c.authenticateFacebook)):(c.goLarge(),c.$modal.find(".sumome-image-sharer-fb-image").css("background-image","url("+c.currentImageUrl+")"),c.generateShare(c.currentImageAlt),c.$modal.find("select").change(function(){var t=e(this).find("option").filter(":selected"),i=t.text(),s=t.attr("value"),o=t.data("access-token");c.$modal.find(".sumome-image-sharer-fb-user img").attr("src","https://graph.facebook.com/v2.8/"+s+"/picture?access_token="+o),c.$modal.find(".sumome-image-sharer-fb-user a").text(i)}),c.$modal.find("textarea").on("keyup",function(){c.$modal.find(".sumome-image-sharer-fb-message").text(e(this).val())}),c.$modal.find("button").click(c.submitFacebook),c.$modal.find(".sumome-image-sharer-fb-message").focus(),c.$modal.resize())}})},checkFacebookWindowClosed:function e(){c.isAuthWindowClosed()?c.loadFacebookMarkup():setTimeout(c.checkFacebookWindowClosed,500)},authenticateFacebook:function e(){c.isAuthWindowClosed()?(c.win=window.open(c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/login","image-sharer-auth","width=640,height=400"),c.win.focus(),c.checkFacebookWindowClosed()):(c.win.location=c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/login",c.win.resizeTo(640,400),c.win.focus(),c.checkFacebookWindowClosed())},submitFacebook:function t(){var i=c.$modal.find("textarea").val().trim(),s=c.currentImageUrl,o=c.$modal.find("option").filter(":selected"),n=o.text(),a=o.attr("value"),r=o.data("access-token");c.$modal.find("select, textarea, button").prop("disabled",!0),e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/post",data:{status:i,image_url:s,image_data:c.currentImageData,targetId:a,targetToken:r},statusCode:{401:function e(){c.loadFacebookMarkup()},500:function e(){c.close()}},success:function t(i){i.success?(c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-share"}),c.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){c.close()}),c.$modal.resize(),e.timer("closeImageSharer",c.close,3e3).start()):(c.goSmall(),c.showError(i.error),e("#sumome-image-sharer").find("button").click(function(e){c.close()}),c.$modal.resize())}})},openTwitter:function t(i){i.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-click"}),c.loadImageProperties("twitter")&&(c.$modal=n.open({content:o,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),c.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.stop()}),c.$modal.on("vexResize",e.proxy(function(t,i){var s=Math.max((e(window).height()-i.$vexContent.outerHeight())/2,0);i.$vex.css({"padding-top":s+"px"})},this)),c.$modal.on("vexOpen",e.proxy(function(e,t){c.$modal.resize(),c.loadTwitterMarkup()},this)))},generateTweet:function t(i){var s=window.location.href;if(s=c.checkAndAddUTMParams(s,"twitter"),c.useUrlShortener){var o=c.shortener+":"+s;o in c.shortUrls?c.generateTweetFromUrl(i,c.shortUrls[o]):e.ajax({type:"POST",dataType:"json",url:c.sumoProperties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:c.sumoProperties.siteId,href:s},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(c.shortUrls[o]=e.url,s=e.url),c.generateTweetFromUrl(i,s)})}else c.generateTweetFromUrl(i,s)},generateTweetFromUrl:function e(t,i){var s=(i.substr(0,6),23),o=c.twitterUsername,n=256-s;o&&("@"!==o.substr(0,1)&&(o="@"+o),n-=5+o.length),t=t.trim(),t=t.replace(/\r\n|\n|\r/g," "),t.length+1>n&&(t=t.substr(0,n-2)+"…"),t=(t+" "+i+(o?" via "+o:"")).trim(),c.$modal.find("textarea").val(t),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),c.$modal.find(".sumome-image-sharer-tw-message").text(t),c.updateTwitterCount()},updateTwitterCount:function e(){var t=c.$modal.find("textarea").val().trim(),i=c.charactersLeft(t);c.$modal.find(".sumome-image-sharer-tw-count").html(i+" chars remaining"),i<0?c.$modal.find(".sumome-image-sharer-tw-count").css({color:"red"}):c.$modal.find(".sumome-image-sharer-tw-count").css({color:""})},loadTwitterMarkup:function t(i){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/load",data:{site_id:c.sumoProperties.siteId},statusCode:{401:function e(){i||c.loadTwitterMarkup()}},success:function t(i){i=i.replace("{{sumome-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),i=i.replace("{{twitter-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/twitter-icon-128.png"),e("#sumome-image-sharer").html(i);var s=e("#sumome-image-sharer .sumome-connect");s.length>0?(c.goSmall(),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),s.click(c.authenticateTwitter)):(c.goLarge(),c.$modal.find(".sumome-image-sharer-tw-image").css("background-image","url("+c.currentImageUrl+")"),c.generateTweet(c.currentImageAlt),c.$modal.find("textarea").on("keyup",function(){c.$modal.find(".sumome-image-sharer-tw-message").text(e(this).val()),c.updateTwitterCount()}),c.$modal.find("button").click(c.submitTwitter),c.$modal.find(".sumome-image-sharer-tw-message").focus(),c.$modal.resize())}})},checkTwitterWindowClosed:function e(){c.isAuthWindowClosed()?c.loadTwitterMarkup():setTimeout(c.checkTwitterWindowClosed,500)},authenticateTwitter:function e(){c.isAuthWindowClosed()?(c.win=window.open(c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/login","image-sharer-auth","width=740,height=400"),c.win.focus(),c.checkTwitterWindowClosed()):(c.win.location=c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/login",c.win.resizeTo(740,400),c.win.focus(),c.checkTwitterWindowClosed())},submitTwitter:function t(){var i=c.$modal.find("textarea").val().trim(),s=c.currentImageUrl;c.$modal.find("textarea, button").prop("disabled",!0);var i=c.$modal.find("textarea").val().trim();c.charactersLeft(i)>=0?e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/post",data:{status:i,image_url:s,image_data:c.currentImageData},statusCode:{401:function e(){c.loadTwitterMarkup()}},success:function t(i){i.success?(c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-share"}),c.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){c.close()}),c.$modal.resize(),e.timer("closeImageSharer",c.close,3e3).start()):(c.goSmall(),c.showError(i.error),e("#sumome-image-sharer").find("button").click(function(e){c.close()}),c.$modal.resize())}}):c.$modal.find("textarea, button").prop("disabled",!1)},openPinterest:function e(t){if(t.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"pinterest-click"}),c.loadImageProperties("pinterest")){var i=window.location.toString();i=c.checkAndAddUTMParams(i,"pinterest"),c.closeAuthWindow(),c.win=window.open(c.generatePinterestUrl(i),"image-sharer-pinterest","width=640,height=320")}},generatePinterestUrl:function t(i){var s={url:i,media:c.currentImageUrl,description:c.currentImageAlt};return"http://pinterest.com/pin/create/button/?"+e.param(s)},openYummly:function e(t){if(t.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"yummly-click"}),c.loadImageProperties("yummly")){var i=window.location.toString();i=c.checkAndAddUTMParams(i,"yummly"),c.closeAuthWindow(),c.win=window.open(c.generateYummlyUrl(i),"image-sharer-yummly","width=600,height=500")}},generateYummlyUrl:function t(i){var s={url:i,title:c.currentImageAlt,image:c.currentImageUrl};return"http://www.yummly.com/urb/verify?"+e.param(s)},goSmall:function e(){c.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-large").addClass("sumome-image-sharer-popup-small"),this.resize()},goLarge:function e(){c.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-small").addClass("sumome-image-sharer-popup-large"),this.resize()},resize:function e(){var t=c.$modal.closest(".sumome-image-sharer-popup"),i="small",s=t.innerWidth();i=s>=1440?"xxlarge":s>=1080?"xlarge":s>=768?"large":s>=480?"medium":"small";var o="sumome-res-"+i;t.removeClass("sumome-res-small sumome-res-medium sumome-res-large sumome-res-xlarge sumome-res-xxlarge").addClass(o)},showError:function t(i){e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Golly Gee Wilikers</h3><h5>'+i+'</h5><hr><button class="sumome-button sumome-alert sumome-radius sumome-expand">Close</button></div>')},close:function e(){c.closeAuthWindow(),n.close()},openAuthWindow:function e(){c.isAuthWindowClosed()&&(c.win=window.open("about:blank","image-sharer-auth","width=1,height=1"))},isAuthWindowClosed:function e(){return!c.win||c.win.closed},closeAuthWindow:function e(){c.isAuthWindowClosed()||(c.win.close(),c.win=null)},mouseenter:function t(i){var s=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(e.isCurrentUrlAllowed(c.display_rules,null,c.ctry,c.views)){var o=e.timer("hideImageSharer");o&&o.kill(),c.currentImage=null;var n=e(i.target),a=n.naturalWidth(),r=n.naturalHeight(),s=n.width(),l=n.height();if(a<150||r<150)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(n.parent().is("div[id^=grs_]"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(n.is(".ob-widget *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(n.is(".s.u.m.o.me *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(n.attr("rel")&&0===n.attr("rel").toLowerCase().indexOf("noshare"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(n.attr("rel")&&0===n.attr("rel").toLowerCase().indexOf("share"));else{var u=n.parent(),m=/[^\/\\]+(?:jpg|gif|png)/gi;if(c.ignoreLinks&&u&&"A"===u.get(0).tagName.toUpperCase()&&u.attr("href")&&u.attr("href")!==n.attr("src")&&null===u.attr("href").match(m))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.ignoreImgLinks&&u&&"A"===u.get(0).tagName.toUpperCase()&&u.attr("href")&&u.attr("href")!==n.attr("src")&&null!==u.attr("href").match(m))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(n.parents("form").length>0)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(n.is(":hidden")||n.is(":invisible"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.relShareOnly)return void c.buttonEl.stop(!0,!0).fadeOut(500)}c.currentImage=e(i.target),c.positionSharer(),c.isOverFixedHeader()||c.buttonEl.stop(!0,!0).fadeIn(500)}},visibleArea:function t(i){for(var s={height:i.offsetHeight,width:i.offsetWidth,isRelative:!1},o={y:i.offsetTop||0,x:i.offsetLeft||0,node:i.offsetParent},n,a,r,l,c;!e(i).is("body")&&null!==(i=i.parentNode);){try{n=window.getComputedStyle(i)}catch(e){}if(n&&"relative"===n.position&&(s.isRelative=!0),n&&"hidden"===n.overflow)return a=i.offsetHeight-Math.max(e("body").offset().top,o.y),r=i.offsetWidth-Math.max(e("body").offset().left,o.x),i!==o.node&&(a+=i.offsetTop||0,r+=i.offsetLeft||0),a<s.height&&(s.height=a<0?0:a),r<s.width&&(s.width=r<0?0:r),s;i===o.node&&(o.y=o.y+(i.offsetTop||0),o.x=o.x+(i.offsetLeft||0),o.node=i.offsetParent)}return s},positionSharer:function i(){if(null!==c.currentImage&&!e(".sumome-image-sharer-popup-content").is(":visible")){var s=c.currentImage.offset(),o=c.currentImage.offsetParent().offset(),n=c.visibleArea(c.currentImage[0]),a=n.hasHiddenOverflow,r=["absolute"].indexOf(c.currentImage.css("position"))>=0;if(r){if(n.isRelative)var l=["absolute","fixed","relative"];else var l=["absolute","fixed"];var u=c.currentImage.parents().filter(function(){return!e(this).is("body,html")&&l.indexOf(e(this).css("position"))>=0});r=u&&u.length}var m=null,h=null,d=null,p=null;if(r){var f=Math.max(e("body").offset().top+(isNaN(parseFloat(e("body").css("padding-top")))?0:parseFloat(e("body").css("padding-top"))),s.top-(s.top-o.top)),g=Math.max(e("body").offset().left+(isNaN(parseFloat(e("body").css("padding-left")))?0:parseFloat(e("body").css("padding-left"))),s.left-(s.left-o.left)),m=parseFloat(isNaN(parseFloat(c.currentImage.css("padding-top")))?0:parseFloat(c.currentImage.css("padding-top")))+parseFloat(isNaN(parseFloat(c.currentImage.css("border-top")))?0:c.currentImage.css("border-top")),h=parseFloat(isNaN(parseFloat(c.currentImage.css("padding-left")))?0:parseFloat(c.currentImage.css("padding-left")))+parseFloat(isNaN(parseFloat(c.currentImage.css("border-left")))?0:c.currentImage.css("border-left"));d=s.top-f+m<0?0:s.top-f+m,p=s.left-g+h<0?0:s.left-g+h}else if("fixed"===c.currentImage.css("position"))var f=c.currentImage.position().top,g=c.currentImage.position().left;else var f=Math.max(e("body").offset().top+(isNaN(parseFloat(e("body").css("padding-top")))?0:parseFloat(e("body").css("padding-top"))),s.top),g=Math.max(e("body").offset().left+(isNaN(parseFloat(e("body").css("padding-left")))?0:parseFloat(e("body").css("padding-left"))),s.left);if(null===m)var m=parseFloat(isNaN(c.currentImage.css("padding-top"))?0:c.currentImage.css("padding-top"))+isNaN(parseFloat(c.currentImage.css("border-top")))?0:parseFloat(c.currentImage.css("border-top")),h=parseFloat(isNaN(c.currentImage.css("padding-left"))?0:c.currentImage.css("padding-left"))+isNaN(parseFloat(c.currentImage.css("border-left")))?0:parseFloat(c.currentImage.css("border-left"));var v=parseFloat(isNaN(c.currentImage.css("padding-left"))?0:c.currentImage.css("padding-bottom"))+isNaN(parseFloat(c.currentImage.css("border-bottom")))?0:parseFloat(c.currentImage.css("border-bottom")),b=parseFloat(isNaN(c.currentImage.css("padding-left"))?0:c.currentImage.css("padding-right"))+isNaN(parseFloat(c.currentImage.css("border-right")))?0:parseFloat(c.currentImage.css("border-right")),y=n.height-(null!==d?f-s.top+d:m)-v,w=n.width-(null!==p?g-s.left+p:h)-b,_=null!==d?d:m,x=null!==p?p:h,k={},S="px"===c.vertical_offset_type?c.vertical_offset:y*(c.vertical_offset/100),C="px"===c.horizontal_offset_type?c.horizontal_offset:w*(c.horizontal_offset/100),T=c.currentImage.attr("src"),E=!0;try{0===T.indexOf("data:image")?E=!1:(c.currentImageUrl=new t(T).absoluteTo(window.location.toString()).toString(),c.currentImageData=c.getImageData(c.currentImage))}catch(e){E=!1}if(!E){var $=c.currentImage.attr("srcset");$&&($=$.split(","))&&$.length&&$.forEach(function(e){E||(e=e.trim().split(" "))&&2===e.length&&(E=!0)})}var I=c.buttonEl.find(".sumome-image-sharer-src-only");I.toggle(E);var L="2px 0",A="2px 0 2px 2px",O="2px 2px 2px 0",P="3px 0 0 3px",B="0 3px 3px 0";c.vertical&&(L="0 2px",A="2px 2px 0 2px",O="0 2px 2px 2px",P="3px 3px 0 0",B="0 0 3px 3px"),c.buttonEl.find("> a").css({borderRadius:"0px",borderWidth:L});var D=c.buttonEl.find("> a"+(E?"":":not(.sumome-image-sharer-src-only)"));D.first().css({borderRadius:P,borderWidth:A}),D.last().css({borderRadius:B,borderWidth:O});var U=c.services.length;!E&&I&&I.length&&(U-=I.length);var R=c.vertical?40*U:40,N=c.vertical?40:40*U;c.vertical?(c.buttonEl.css("width",40),c.buttonEl.css("height",40*U)):c.buttonEl.css("width",40*U),"c"!==c.position&&(S+=10,C+=10),k="tl"===c.position?{top:f+S,left:g+C}:"tr"===c.position?{top:f+S,left:g+w-N-C}:"bl"===c.position?{top:f+y-R-S,left:g+C}:"br"===c.position?{top:f+y-R-S,left:g+w-N-C}:{top:f+y/2-R/2+S,left:g+w/2-N/2+C},k.top+=_,k.left+=x,k.position="fixed"===c.currentImage.css("position")?"fixed":"absolute",c.buttonEl.css(k)}},getImageData:function t(i){var s=e(i).naturalWidth(),o=e(i).naturalHeight(),n=e(i).attr("src"),a=document.createElement("canvas"),r=1280,l=800;if(n&&n.toLowerCase().indexOf(".gif")>-1)return null;if(a){var c=Math.min(1280/s,800/o);c<1&&(s*=c,o*=c),a.width=s,a.height=o;var u=a.getContext("2d");if(u){u.drawImage(i.get(0),0,0,s,o);try{return a.toDataURL()}catch(e){}}}return null},charactersLeft:function e(t){return 280-a.txt.getTweetLength(t)},touch:function t(i){var s=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(e.isCurrentUrlAllowed(c.display_rules,null,c.ctry,c.views)){var o=e.timer("hideImageSharer");o&&o.kill();var n=i.pageX||i.originalEvent.touches[0].pageX,a=i.pageY||i.originalEvent.touches[0].pageY,r=e.nearest({x:n,y:a},"img");if(c.currentImage=null,!r)return void c.buttonEl.stop(!0,!0).fadeOut(500);var l=r.naturalWidth(),u=r.naturalHeight(),s=r.width(),m=r.height();if(l<150||u<150)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(r.parent().is("div[id^=grs_]"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(r.is(".ob-widget *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(r.is(".s.u.m.o.me *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(r.attr("rel")&&0===r.attr("rel").toLowerCase().indexOf("noshare"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(r.attr("rel")&&0===r.attr("rel").toLowerCase().indexOf("share"));else{var h=r.parent(),d=/[^\/\\]+(?:jpg|gif|png)/gi;if(c.ignoreLinks&&h&&"A"===h.get(0).tagName.toUpperCase()&&h.attr("href")&&h.attr("href")!==r.attr("src")&&null===h.attr("href").match(d))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.ignoreImgLinks&&h&&"A"===h.get(0).tagName.toUpperCase()&&h.attr("href")&&h.attr("href")!==r.attr("src")&&null!==h.attr("href").match(d))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(r.parents("form").length>0)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(r.is(":hidden")||r.is(":invisible"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.relShareOnly)return void c.buttonEl.stop(!0,!0).fadeOut(500)}c.currentImage=r,c.positionSharer(),c.isOverFixedHeader()||(c.buttonEl.stop(!0,!0).fadeIn(500),e.timer("hideImageSharer",c.hideSharer,5e3).start())}},mouseleave:function t(i){if(null!==c.currentImage){var s=e(i.toElement||i.relatedTarget);s.hasClass(".sumome-image-sharer")||s.closest(".sumome-image-sharer").length>0||c.hideSharer()}},hideSharer:function t(){var i=e.timer("hideImageSharer");i&&i.kill(),c.currentImage=null,c.buttonEl.stop(!0,!0).fadeOut(500)},scroll:function e(){c.isOverFixedHeader()&&c.hideSharer()},isOverFixedHeader:function t(){if(!c.buttonEl)return!1;var i="1"===c.buttonEl.css("opacity"),s="fixed"===e("header").css("position");if(i&&s){var o=8,n={x:parseInt(c.buttonEl.css("left").replace("px",""))-e(window).scrollLeft()-8,y:parseInt(c.buttonEl.css("top").replace("px",""))-e(window).scrollTop()-8,width:c.buttonEl.width()+16,height:c.buttonEl.height()+16},a={x:e("header").position().left,y:e("header").position().top,width:e("header").width(),height:e("header").height()};return!!l(n,a)}return!1},checkAndAddUTMParams:function e(i,s){if(c.hasImageSharer&&i&&"utm"in c&&c.utm){var o=t(i);"utm_source"in c&&c.utm_source&&(o.removeQuery("utm_source"),o.addQuery("utm_source",c.utm_source.replace("{service}",s))),"utm_medium"in c&&c.utm_medium&&(o.removeQuery("utm_medium"),o.addQuery("utm_medium",c.utm_medium.replace("{service}",s))),"utm_name"in c&&c.utm_name&&(o.removeQuery("utm_campaign"),o.addQuery("utm_campaign",c.utm_name.replace("{service}",s))),"utm_custom_key"in c&&c.utm_custom_key&&"utm_custom_val"in c&&c.utm_custom_val&&(o.removeQuery(c.utm_custom_key),o.addQuery(c.utm_custom_key,c.utm_custom_val.replace("{service}",s))),i=o.toString()}return i}};return c}),sumo.define("plugins/text!share/templates/share.html",[],function(){return""}),sumo.define("jquery.print-preview",["jquery"],function(e){e.fn.printPreview=function(){return e.printPreview.loadPrintPreview(),this};var t,i,s,o,n=function(){for(var e,t=3,i=document.createElement("div"),s=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",s[0];);return t>4?t:e}();e.printPreview={loadPrintPreview:function(){s=e('<div id="sumome-share-print-modal"></div>'),o=e('<div id="sumome-share-print-modal-controls"><a href="#" class="sumome-share-print-modal-controls-print" title="Print page">Print page</a><a href="#" class="sumome-share-print-modal-controls-close" title="Close print preview">Close</a>').hide();var t=e('<iframe id="sumome-share-print-modal-content" scrolling="no" border="0" frameborder="0" name="print-frame" />');s.hide().append(o).append(t).appendTo("body");var i=t[0].contentWindow.document;i.open(),i.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>'+document.title+"</title></head><body></body></html>"),i.close();var n=e("head link[media*=print], head link[media=all]").clone(),a=e("body > *:not(#sumome-share-print-modal):not(script)").clone();n.each(function(){e(this).attr("media","all")}),e("head",i).append(n),e("body",i).append(a),e("a",i).bind("click.printPreview",function(e){e.preventDefault()}),e("head").append('<style type="text/css">@media print {/* -- Print Preview --*/#sumome-share-print-modal-mask,#sumome-share-print-modal {display: none !important;}}</style>'),e.printPreview.loadMask(),e("body").css({overflowY:"hidden",height:"100%"}),e("img",i).load(function(){t.height(e("body",t.contents())[0].scrollHeight)}),starting_position=e(window).height()+e(window).scrollTop();var r={top:starting_position,height:"100%",overflowY:"auto",zIndex:1e4,display:"block"};s.css(r).animate({top:e(window).scrollTop()},400,"linear",function(){o.fadeIn("slow").focus()}),t.height(e("body",t.contents())[0].scrollHeight),e("a",o).bind("click",function(t){t.preventDefault(),e(this).hasClass("sumome-share-print-modal-controls-print")?window.print():e.printPreview.distroyPrintPreview()})},distroyPrintPreview:function(){o.fadeOut(100),s.animate({top:e(window).scrollTop()-e(window).height(),opacity:1},400,"linear",function(){s.remove(),e("body").css({overflowY:"auto",height:"auto"})}),t.fadeOut("slow",function(){t.remove()}),e(document).unbind("keydown.printPreview.mask"),t.unbind("click.printPreview.mask"),e(window).unbind("resize.printPreview.mask")},loadMask:function(){i=e.printPreview.sizeUpMask(),t=e('<div id="sumome-share-print-modal-mask" />').appendTo(e("body")),t.css({position:"absolute",top:0,left:0,width:i[0],height:i[1],display:"none",opacity:0,zIndex:9999,backgroundColor:"#000"}),t.css({display:"block"}).fadeTo("400",.75),e(window).bind("resize..printPreview.mask",function(){e.printPreview.updateMaskSize()}),t.bind("click.printPreview.mask",function(t){e.printPreview.distroyPrintPreview()}),e(document).bind("keydown.printPreview.mask",function(t){27==t.keyCode&&e.printPreview.distroyPrintPreview()})},sizeUpMask:function(){if(n){var t=e(document).height(),i=e(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t-i<20?i:t]}return[e(document).width(),e(document).height()]},updateMaskSize:function(){var i=e.printPreview.sizeUpMask();t.css({width:i[0],height:i[1]})}}}),sumo.define("jquery.share",["jquery","jquery.print-preview"],function(e){e.shareServices={amazonuniversalregistry:{name:"Amazon Universal Registry",url:"https://www.amazon.com/registry/add?t={TEXT}&u={URL}",width:1e3,height:640,background:"#F7AD29",color:"#fff"},amazonuswishlist:{name:"Amazon Wishlist",url:"https://www.amazon.com/wishlist/add?t={TEXT}&u={URL}",width:1e3,height:640,background:"#FC9A18",color:"#fff"},aollifestream:{name:"AOL Lifestream",url:"http://lifestream.aol.com/share/?url={URL}&title={TEXT}&description={DESC}",width:580,height:440,background:"#8DB822",color:"#fff"},aolmail:{name:"AOL Mail",url:"https://mail.aol.com/webmail-std/en-us/composemessage?to=&subject={TEXT}&body={URL}",width:600,height:500,background:"#262626",color:"#fff"},arto:{name:"Arto",url:"http://www.arto.com/section/linkshare/default.aspx?lu={URL}&ln={TEXT}",width:1e3,height:770,background:"#8DB822",color:"#fff"},bitly:{name:"Bitly",url:"https://bitly.com/a/bitmarklet?u={URL}",width:1160,height:500,background:"#EE6023",color:"#fff"},bloggerpost:{name:"Blogger",url:"https://www.blogger.com/blog-this.g?t&u={URL}&n={TEXT}",width:750,height:700,background:"#F79638",color:"#fff"},boxnet:{name:"Box",url:"https://www.box.com/api/1.0/import?import_as=link&url={URL}&name={TEXT}",width:500,height:500,background:"#2F88B1",color:"#fff"},buffer:{name:"Buffer",url:"http://bufferapp.com/add?text={TEXT}&url={URL}",width:890,height:532,background:"#242424",color:"#fff",fetch:"https://api.bufferapp.com/1/links/shares.json?url={URL}",parse:function(e){return parseInt(e.shares)},priority:89},delicious:{name:"Delicious",url:"http://del.icio.us/post?url={URL}&title={TEXT}&notes={DESC}",width:550,height:588,background:"#3399ff",color:"#fff",priority:85},digg:{name:"Digg",url:"http://digg.com/submit?url={URL}&title={TEXT}",width:1080,height:670,background:"#0093CC",color:"#fff",priority:86},diigo:{name:"Diigo",url:"https://www.diigo.com/post?url={URL}&title={TEXT}&description={DESC}",width:625,height:660,background:"#4DA2E4",color:"#fff"},diigolet:{name:"Diigolet",width:600,height:500,background:"#4DA2E4",color:"#fff",javascript:function(){s=document.createElement("script"),s.type="text/javascript",s.src="https://www.diigo.com/javascripts/webtoolbar/diigolet_b_h_b.js",document.body.appendChild(s)}},email:{name:"Email",url:"mailto:?subject={TEXT}&body={DESC}%20{URL}{PROMO}",width:600,height:500,background:"#aaa",color:"#fff",priority:99},evernote:{name:"Evernote",url:"http://www.evernote.com/clip.action?url={URL}&title={TEXT}",width:960,height:533,background:"#6fb536",color:"#fff",priority:85},facebook:{name:"Facebook",url:"http://www.facebook.com/sharer.php?u={URL}",width:600,height:600,background:"#3b5998",color:"#fff",fetch:"//graph.facebook.com/?id={URL}",parse:function(e){return parseInt(e.share.share_count)},priority:100},facebooklike:{name:"Facebook Like",url:"https://sumo.com/apps/share/facebook-like?href={URL}",width:600,height:300,background:"#5a739d",color:"#fff",fetch:"//api.facebook.com/method/links.getStats?urls={URL}&format=json",parse:function(e){return parseInt(e[0].like_count)},priority:95},facebooksend:{name:"Facebook Send",url:"https://www.facebook.com/dialog/send?app_id=859406404089021&link={URL}&redirect_uri=https%3a%2f%2fsumo.com%2fapps%2fshare%2fthanks&display=popup",width:600,height:500,background:"#3b5998",color:"#fff"},fancy:{name:"Fancy",width:600,height:500,background:"#494E57",color:"#fff",javascript:function(){thefancy_username="";var e="thefancy_tagger_bookmarklet_helper_js",t=document.getElementById(e),i=!0;if(t){var s=window;try{s.thefancy_bookmarklet?(s.thefancy_bookmarklet.tagger.cleanListeners(),t.parentNode.removeChild(t)):i=!1}catch(e){i=!1}}i&&(_my_script=document.createElement("SCRIPT"),_my_script.type="text/javascript",_my_script.id=e,_my_script.src=location.protocol+"//fancy.com/bookmarklet/fancy_tagger.js?x="+Math.random(),document.getElementsByTagName("head")[0].appendChild(_my_script))}},flipboard:{name:"Flipboard",url:"https://share.flipboard.com/bookmarklet/popout?v=2&title={TEXT}&url={URL}",width:600,height:500,background:"#CC0713",color:"#fff"},friendfeed:{name:"FriendFeed",
url:"http://www.friendfeed.com/share?url={URL}&title={TEXT}",width:800,height:550,background:"#87a9d9",color:"#fff"},googlebookmarks:{name:"Google Bookmarks",url:"https://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk={URL}&title={TEXT}&annotation={DESC}",width:600,height:500,background:"#4A8CF6",color:"#fff"},googlemail:{name:"Gmail",url:"https://mail.google.com/mail/u/0/?view=cm&fs=1&to&su={TEXT}&body={URL}&ui=2&tf=1",width:600,height:500,background:"#E04C40",color:"#fff"},googleplus:{name:"Google+",url:"https://plus.google.com/share?url={URL}",width:512,height:432,background:"#dd4b39",color:"#fff",method:"googleplus",fetch:"https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ",parse:function(e){return parseInt(e.result.metadata.globalCounts.count)},priority:96},hootsuite:{name:"Hootsuite",url:"https://hootsuite.com/hootlet/load?address={URL}&title={TEXT}",width:750,height:650,background:"#000",color:"#fff"},houzz:{name:"Houzz",width:600,height:500,background:"#7AC143",color:"#fff",javascript:function(){function e(e,t,i){var s=e.indexOf("?"),o=e.indexOf("#");return s==e.length-1&&(e=e.substring(0,s),s=-1),(o>0?e.substring(0,o):e)+(s>0?"&"+t+"="+i:"?"+t+"="+i)+(o>0?e.substring(o):"")}var t=document.createElement("link");t.rel="stylesheet",t.href=e("//www.houzz.com/res/2125/css/style?f=clipper","cb",Math.floor(1e6*Math.random())),document.getElementsByTagName("head")[0].appendChild(t);var i=document.createElement("script");i.type="text/javascript",i.src=e("//www.houzz.com/js/script?f=clipper&v=2125&s=101&l=en-US&d=1&m=1","cb",Math.floor(1e6*Math.random())),document.body.appendChild(i)}},instapaper:{name:"Instapaper",url:"http://www.instapaper.com/hello2?url={URL}&title={TEXT}&description={DESC}",width:475,height:200,background:"#464646",color:"#000"},kaboodle:{name:"Kaboodle",width:600,height:500,background:"#B9212A",color:"#fff",javascript:function(){var e="0.3",t=document,i;try{i=t.standardCreateElement("script")}catch(e){}"object"!=typeof i&&(i=t.createElement("script"));try{i.type="text/javascript",i.src="http://www.kaboodle.com/zg/g.js",i.id="c_grab_js",t.getElementsByTagName("head")[0].appendChild(i)}catch(e){window.location="http://www.kaboodle.com/za/selectpage?p_pop=false&pa=url&u="+window.location}}},kik:{name:"Kik",url:"http://share-api.kik.com/share.do?url={URL}&title={TEXT}",width:600,height:550,background:"#8CC04F",color:"#fff"},lineapp:{name:"Line",url:"http://line.me/R/msg/text/?{TEXT}%20-%20{URL}",width:600,height:500,background:"#01C312",color:"#fff"},linkedin:{name:"LinkedIn",url:"http://www.linkedin.com/shareArticle?mini=true&url={URL}&title={TEXT}&summary={DESC}",width:615,height:495,background:"#007bb6",color:"#fff",method:"linkedin",fetch:"https://www.linkedin.com/countserv/count/share?format=jsonp&url={URL}",parse:function(e){return parseInt(e.count)},priority:91},meneame:{name:"Menéame",url:"https://www.meneame.net/submit.php?url={URL}",width:600,height:500,background:"#FC6320",color:"#fff"},microsoftonenote:{name:"Microsoft OneNote",url:"https://www.onenote.com/clipper/save?sourceUrl={URL}&title={TEXT}&notes={DESC}",width:800,height:660,background:"#80397B",color:"#fff"},misterwong:{name:"Mister Wong",url:"http://www.mister-wong.com/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwongcn:{name:"Mister Wong CN",url:"http://www.mister-wong.cn/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwonges:{name:"Mister Wong ES",url:"http://www.mister-wong.es/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwongfr:{name:"Mister Wong FR",url:"http://www.mister-wong.fr/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwongru:{name:"Mister Wong RU",url:"http://www.mister-wong.RU/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},newsvine:{name:"Newsvine",url:"http://www.newsvine.com/_tools/seed&save?u={URL}&h={TEXT}",width:500,height:700,background:"#11660C",color:"#fff"},odnoklassniki:{name:"Odnoklassniki",url:"http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl={URL}",width:540,height:395,background:"#F38230",color:"#fff"},outlook:{name:"Outlook",url:"https://mail.live.com/secure/start?action=compose&to=&subject={TEXT}&body={URL}",width:600,height:500,background:"#1172C6",color:"#fff"},pinboardin:{name:"Pinboard",url:"https://pinboard.in/add?next=same&url={URL}&description={DESC}&title={TEXT}",width:600,height:500,background:"#214CF4",color:"#fff"},pinterest:{name:"Pinterest",url:"http://pinterest.com/pin/create/button/?url={URL}&description={TEXT}&media={IMAGE}",width:765,height:320,background:"#cb2027",color:"#fff",fetch:"//widgets.pinterest.com/v1/urls/count.json?callback=?&source=6&url={URL}",parse:function(e){return parseInt(e.count)},javascript:function(e,t,i,s,n,a,r){!function(i,s,n,a,r,l,c){var u="",m={k:"PIN_"+(new Date).getTime(),me:/\/\/assets\.pinterest\.com\/js\/pinmarklet\.js/,grid:e+"/apps/share/pinterest-grid",maxWait:5e3,quality:30,xv:"data-pinterest-extension-installed",log:"https://log.pinterest.com/",hazPinningNow:"data-pinterest-pinmarklet-rendered",pattern:{instagram:{page:/^https?:\/\/(.*?\.|)instagram\.com\//,url:/^https?:\/\/(.*?\.|)instagram\.com\/p\//},amazon:{media:/^https?:\/\/(.*?\.|)images-amazon\.com\/images\//,page:/^https?:\/\/(.*?\.|)amazon\.com\//},pinterest:{page:/^https?:\/\/(.*?\.|)pinterest\.com\//},facebook:{page:/^https?:\/\/([a-zA-Z0-9]*\.|)facebook\.com\//},craigslist:{page:/^https?:\/\/(.*?\.|)craigslist\.org\//},itunes:{page:/^https?:\/\/itunes\.apple\.com\//},youtube:{iframe:/^https?:\/\/www\.youtube\.com\/embed/,media:/^https?:\/\/(.*?\.|)ytimg\.com\/(vi|li)\//,page:/^https?:\/\/(.*?\.|)youtube\.com\//},flickr:{media:/^https?:\/\/(.*?)\.staticflickr\.com\//,page:/^https?:\/\/www\.flickr\.com\//},"500px":{media:/^https?:\/\/(.*?)\.500px\.org\//},vimeo:{iframe:/^https?:\/\/player\.vimeo\.com\/video\//,media:/^https?:\/\/i\.vimeocdn\.com\/video\//,page:/^https?:\/\/vimeo\.com\//},google:{page:/^https?:\/\/www\.google\.com\/search(.*&tbm=isch.*)/},twitter:{page:/^https?:\/\/twitter\.com\//},wikipedia:{page:/^https?:\/\/(.*?\.|)wikipedia\.org\//}},validConfigParam:["debug","noCancel","noHeader","pinMethod","render","share","quiet","quality","pinbox","via","xuid","edu","guid"],validImageFileType:{gif:1,jpg:1,jpeg:1,png:1,webp:1},invalidImageFileType:{svg:1},imgLimitMin:119,imgLimitFloor:79,imgLimitHorz:3,thumbCellSize:236,thumbCellMargin:14,tag:{link:["rel","href"],meta:["name","content","property","http-equiv","content-language"],a:["data-pin-href","data-pin-id"],iframe:["src"],img:["src","title","alt","naturalHeight","naturalWidth","nopin","data-pin-nopin","data-pin-id","data-pin-media","data-pin-url","data-pin-description","usemap"]},cdn:{"https:":"https://s-passets.pinimg.com","http:":"http://passets.pinterest.com"},msg:t,hashList:[/efa3a2deb839/,/20c46b653b00/,/9e2089d8b8f2/,/820a6e7baa0f/,/293aa4f9b3d0/,/1529ad2b2cc8/,/8de5d416e5d2/,/8c2d5961f7af/,/540b2374abf1/,/415215dcadbf/,/dbafdf055617/,/871de03c9980/,/85ae87da6618/,/1d1d5ffa1d50/,/1847807c0ea1/,/08fb2eb6424d/,/a32353817e45/,/71c1f4783e6d/,/79f57d83d54a/,/eefa602a72ed/,/32aa39d04eb4/,/25f7c9982cea/]},h=window[m.k]={w:window,d:document,a:m,s:{},f:function(){return{callback:[],sha:function(e){function t(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}function i(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>24-i%32&255);return t}function s(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function o(e,t){return e<<t|e>>>32-t}function n(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var i=Array(80),n=1732584193,l=-271733879,c=-1732584194,u=271733878,m=-1009589776,h=0;h<e.length;h+=16){for(var d=n,p=l,f=c,g=u,v=m,b=0;b<80;b++){i[b]=b<16?e[h+b]:o(i[b-3]^i[b-8]^i[b-14]^i[b-16],1);var y=s(s(o(n,5),a(b,l,c,u)),s(s(m,i[b]),r(b)));m=u,u=c,c=o(l,30),l=n,n=y}n=s(n,d),l=s(l,p),c=s(c,f),u=s(u,g),m=s(m,v)}return Array(n,l,c,u,m)}function a(e,t,i,s){return e<20?t&i|~t&s:e<40?t^i^s:e<60?t&i|t&s|i&s:t^i^s}function r(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function l(e){return i(n(t(e),8*e.length))}function c(e){for(var t,i="0123456789abcdef",s="",o=0;o<e.length;o++)t=e.charCodeAt(o),s=s+i.charAt(t>>>4&15)+i.charAt(15&t);return s}return c(l(e))},get:function(e,t){var i=null;return i=void 0!==e[t]?e[t]:e.getAttribute(t)},set:function(e,t,i){"string"==typeof e[t]?e[t]=i:e.setAttribute(t,i)},getEl:function(e){var t=null;return t=e.target?3===e.target.nodeType?e.target.parentNode:e.target:e.srcElement},parse:function(e,t){var i,s,o,n,a,r;if(r={},i=e.split("#")[0].split("?"),i[1])for(s=i[1].split("&"),n=0,a=s.length;n<a;n+=1)o=s[n].split("="),2===o.length&&t[o[0]]&&(r[o[0]]=o[1]);return r},make:function(e){var t,i,s,o=!1;for(t in e)if(e[t].hasOwnProperty){o=h.d.createElement(t);for(i in e[t])if(e[t][i]&&e[t][i].hasOwnProperty)if("string"==typeof e[t][i])h.f.set(o,i,e[t][i]);else if("style"===i)for(s in e[t][i])o.style.setProperty?o.style.setProperty(s,e[t][i][s],"important"):o.style[s]=e[t][i][s];break}return o},kill:function(e){"string"==typeof e&&(e=h.d.getElementById(e)),e&&e.parentNode&&e.parentNode.removeChild(e)},call:function(e,t){var i,s,o="?";h.v.nextCallback||(h.v.nextCallback=0),i=h.v.nextCallback,h.v.nextCallback=h.v.nextCallback+1,s=h.a.k+".f.callback["+i+"]",h.f.callback[i]=function(e){t(e,i),h.f.kill(s),h.v.callbackLoadingCount=h.v.callbackLoadingCount-1},e.match(/\?/)&&(o="&"),h.d.b.appendChild(h.f.make({SCRIPT:{id:s,type:"text/javascript",charset:"utf-8",src:e+o+"callback="+s}})),h.v.callbackLoadingCount=h.v.callbackLoadingCount+1},listen:function(e,t,i,s){void 0!==h.w.sumomeSharePinterestEvent&&(void 0!==e.removeEventListener&&e.removeEventListener(t,h.w.sumomeSharePinterestEvent,!1),void 0!==e.detachEvent&&e.detachEvent("on"+t,h.w.sumomeSharePinterestEvent)),s?void 0!==e.removeEventListener?e.removeEventListener(t,i,!1):void 0!==e.detachEvent&&e.detachEvent("on"+t,i):void 0!==h.w.addEventListener?e.addEventListener(t,i,!1):void 0!==h.w.attachEvent&&e.attachEvent("on"+t,i),h.w.sumomeSharePinterestEvent=i},debug:function(e){},getConfig:function(){var e=h.d.getElementsByTagName("SCRIPT"),t=e.length,i=0,s=0,o=h.a.validConfigParam.length,n=null,a="",r=function(e){h.w.setTimeout(function(){h.f.kill(e)},10)};for(i=0;i<t;i+=1)if(e[i].src.match(h.a.me)){for(s=0;s<o;s+=1)a=h.a.validConfigParam[s],(n=e[i].getAttribute(a))&&(h.v.config[a]=n);r(e[i]);break}},getSelection:function(){return(""+(h.w.getSelection?h.w.getSelection():h.d.getSelection?h.d.getSelection():h.d.selection.createRange().text)).replace(/(^\s+|\s+$)/g,"")},getDim:function(e){var t,i;return t=0,i=0,"number"==typeof e.naturalHeight?t=e.naturalHeight:"number"==typeof e.height&&(t=e.height),"number"==typeof e.naturalWidth?i=e.naturalWidth:"number"==typeof e.width&&(i=e.width),{h:t,w:i}},check:{fileType:function(e){var t,i;return t=!0,e.src&&(i=e.src.split("#")[0].split("?")[0].split(".").pop(),h.a.invalidImageFileType[i]&&(t=!1)),t},visibility:function(e){var t,i,s;for(i=e.parentNode,t=!0;i&&"HTML"!==i.tagName;){if(i.currentStyle?("none"===i.currentStyle.display||"hidden"===i.currentStyle.visibility)&&(t=!1):h.w.getComputedStyle&&("none"===h.w.getComputedStyle(e).getPropertyValue("display")||"hidden"===h.w.getComputedStyle(e).getPropertyValue("visibility"))&&(t=!1),!1===t){s=e.src+": is invisible";break}i=i.parentNode}return t},noPin:function(e){var t,i;return t=!0,h.f.get(e,"data-pin-nopin")&&(t=!1,i=e.src+": data-pin-nopin=true"),h.f.get(e,"nopin")&&(t=!1,i=e.src+": nopin=nopin"),t},size:function(e){var t,i,s;return t=!1,s=h.f.getDim(e),s.h>h.a.imgLimitFloor&&s.w>h.a.imgLimitFloor?s.h>h.a.imgLimitMin||s.w>h.a.imgLimitMin?s.w<s.h*h.a.imgLimitHorz?t=!0:i=e.src+" too wide":i=e.src+" one dimension <= "+h.a.imgLimitMin:i=e.src+" one dimension <= "+h.a.imgLimitFloor,t},dupe:function(e){var t=e;"object"==typeof e&&(t=e.src);var i=!0;return h.v.src[t]?i=!1:h.v.src[t]=!0,i},source:function(e,t){var i,s,o;return i=!1,o="string"==typeof e?e:e.src||e.href,o&&o.match(/^http/)&&(o.match(/File:/)||(t?(s=o.split("#")[0].split("?")[0].split(".").pop(),h.a.validImageFileType[s]&&(i=!0)):i=!0)),i},domain:function(e){var t,i,s,o,n;if(n=e,"object"==typeof e&&(n=e.src),o=n.split("/")[2],s=!0,void 0===h.v.srcDomain[o]){for(var i=h.f.sha(o),t=0,a=h.a.hashList.length;t<a;t+=1)if(i.match(h.a.hashList[t])){s=!1;break}h.v.srcDomain[o]={bad:s}}else s=h.v.srcDomain[o].bad;return s}},tag:{img:function(e){var t,i;t=!0;for(i in h.f.check)if(!h.f.check[i](e)){t=!1;break}return t},iframe:function(e){var t,i;if(e.src.match(h.a.pattern.instagram.url)&&(i=e.src.split("embed"),i[1]&&(t="https://api.instagram.com/oembed?url="+encodeURIComponent(i[0]),h.f.call(t,h.f.handlers.instagram))),e.src.match(h.a.pattern.youtube.iframe)){var i=e.src.split("#")[0].split("?")[0].split("/")[4];i&&(t={media:"http://i.ytimg.com/vi/"+i+"/hqdefault.jpg",set:{description:h.d.title,url:"http://www.youtube.com/watch?v="+i,isVideo:!0,attrib:"youtube"}},h.f.loadImg(t))}e.src.match(h.a.pattern.vimeo.iframe)&&(i=function(e){e.thumbnail_url&&(t={media:e.thumbnail_url.split("_")[0]+".jpg",set:{url:"https://vimeo.com/"+e.video_id,description:e.title,isVideo:!0,attrib:"vimeo"}},h.f.loadImg(t))},t="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e.src),h.f.call(t,i))},a:function(e){var t,i,s,o;(i=h.f.get(e,"data-pin-href"))&&(s=h.f.parse(i,{url:!0,media:!0,description:!0}),s.media&&(t={media:decodeURIComponent(s.media),set:{pinItButton:!0,url:decodeURIComponent(s.url)||void 0,description:decodeURIComponent(s.description)||void 0}},o=h.f.get(e,"data-pin-id"),o&&(t.set.dataPinId=o),h.f.loadImg(t),h.v.hazLoggedPinItButton||(h.v.hazLoggedPinItButton=!0)))},link:function(e){var t,i;t=e.rel,i=e.href,t&&i&&(t=t.toLowerCase(),"canonical"===t&&(h.v.canonicalUrl||(h.v.canonicalUrl=i)),("icon"===t||"shortcut-icon"===t||"apple-touch-icon"===t)&&(h.v.config.favicon=i))},meta:function(e){var t,i,s,o,n,a;t=h.f.get(e,"content"),i=h.f.get(e,"description"),s=h.f.get(e,"property"),n=h.f.get(e,"http-equiv"),a=h.f.get(e,"content-language"),o=h.f.get(e,"name"),n&&a&&h.f.setLang(a),t&&(o&&"pinterest"===o&&("nopin"===t.toLowerCase()&&(h.v.data.close=i||h.v.msg.noPinMeta),"nohover"===t.toLowerCase()&&(h.v.noHoverMeta=!0),"pinterest-rich-pin"===o&&t.toLowerCase()),s&&("og:image"===s&&(h.v.meta.og.media=t),"og:url"===s&&(h.v.meta.og.url=t),"og:description"===s&&(h.v.meta.og.description=t),"og:title"===s&&(h.v.meta.og.title=t),"pin:media"===s&&(h.v.meta.pinterest.media=t),"pin:url"===s&&(h.v.meta.pinterest.url=t),"pin:description"===s&&(h.v.meta.pinterest.description=t),"pin:id"===s&&(h.v.meta.pinterest.id=t)))}},loadImg:function(e){var t,i;h.v.imgLoadingCount=h.v.imgLoadingCount+1,t=h.d.createElement("IMG"),t.onerror=function(){h.w.clearTimeout(i),h.v.imgLoadingCount=h.v.imgLoadingCount-1},t.onload=function(){var t,s,o,n,a,r;if(h.w.clearTimeout(i),o={},h.v.imgLoadingCount=h.v.imgLoadingCount-1,o.loaded=!0,r=h.f.getDim(this),o.height=r.h,o.width=r.w,o.media=this.src,e.set)if("string"==typeof e.set)o[e.set]=!0,h.v.hazSet[e.set]=!0;else for(t in e.set)o[t]=e.set[t],h.v.hazSet[t]=!0;for(e.url&&h.v.canonicalUrl&&(e.url!==h.v.canonicalUrl?(n=h.v.canonicalUrl.split("/")[2],a=e.url.split("/")[2],n===a?(o.url=e.url,o.linkOffPage=!0):(o.url=e.url,o.via=h.v.canonicalUrl,o.linkOffDomain=!0)):o.isVideo&&(o.isCanonical=!0),h.f.kill(this)),e.description&&(o.description=e.description),h.v.found.unshift(o),t=1,s=h.v.found.length;t<s;t+=1)if(h.v.found[t].media===this.src){o.metaOg?(o.description&&(h.v.found[t].description=o.description),o.url&&(h.v.found[t].url=o.url),h.v.found[t].isCanonical=!0,h.v.found.shift()):h.v.found.splice(t,1);break}},i=h.w.setTimeout(function(){t=null,h.v.imgLoadingCount=h.v.imgLoadingCount-1},h.a.maxWait),t.src=e.media},handlers:{instagram:function(e){e&&e.thumbnail_url&&e.title&&e.html&&(o={media:e.thumbnail_url,set:{url:e.html.split('<a href="')[1].split('"')[0],description:e.title}},h.f.loadImg(o))}},srcSet:function(e){var t=h.f.get(e,"srcset"),i,s,o,n,a="",r=0;if(t&&(i=t.split(","),i.length)){for(s=0;s<i.length;s+=1)n=i[s].replace(/^\s+|\s+$/g,"").replace(/\s\s+/g," ").split(" "),n[1]&&(n[1]=n[1].replace(/[^0-9.]/g,"")-0,r<n[1]&&(r=n[1],a=n[0]));a&&(o=a.split("#")[0].split("?")[0].split(".").pop(),h.a.validImageFileType[o]&&!e.getAttribute("data-pin-media")&&e.setAttribute("data-pin-media",a))}},modifiers:{page:[function(){var e,t,i,o=s||h.d.URL;o.match(h.a.pattern.vimeo.page)&&(t=h.d.getElementsByTagName("VIDEO")[0])&&(i=t.parentNode.parentNode.getAttribute("data-thumb"))&&(e={media:i,set:{sourceBump:!0,url:o,description:h.d.title}},h.f.loadImg(e))},function(){var e,t,i,o,n=s||h.d.URL;if(n.match(h.a.pattern.instagram.page))if(n.match(h.a.pattern.instagram.url))o="https://api.instagram.com/oembed?url="+encodeURIComponent(n),h.f.call(o,h.f.handlers.instagram);else for(e=h.d.getElementsByTagName("A"),t=0,i=e.length;t<i;t+=1)e[t].href&&e[t].href.match(h.a.pattern.instagram.url)&&(o="https://api.instagram.com/oembed?url="+encodeURIComponent(e[t].href.split("#")[0].split("?")[0]),h.f.call(o,h.f.handlers.instagram))},function(){var e,t,i,o,n,a,r;if((s||h.d.URL).match(h.a.pattern.amazon.page)){var t=h.d.getElementsByTagName("A");for(i=0,o=t.length;i<o;i+=1)if(t[i].href&&t[i].href.match("pinterest.com%2Fpin%2Fcreate%2Fbutton%3F")){if(e=t[i].href.split("&token=")[0].split("pinterest.com%2Fpin%2Fcreate%2Fbutton%3F"),e[1])try{(n=decodeURIComponent(e[1]))&&(r=h.f.parse("?"+n,{url:!0,media:!0,description:!0}),r.media&&r.url&&r.description&&(r.url=r.url.split("ref%3D")[0],r.description=r.description.split("http")[0],a={media:decodeURIComponent(r.media),set:{sourceBump:!0,url:decodeURIComponent(r.url),description:decodeURIComponent(r.description)}},h.f.loadImg(a)))}catch(e){}break}}},function(){var e,t,i,o,n,a,r,l,c,u=s||h.d.URL;if(c=function(e){var t={};t.media="https://i.ytimg.com/vi/"+e.id+"/hqdefault.jpg",t.url="http://www.youtube.com/watch?v="+e.id,t.set={isVideo:!0,attrib:"youtube",url:t.url,description:h.d.title},e.sourceBump&&(t.set.sourceBump=!0),e.sourceOrder&&(t.set.sourceOrder=e.sourceOrder),h.f.loadImg(t)},u.match(h.a.pattern.youtube.page))for(t=u.split("#")[0].split("?v="),t[1]&&c({id:t[1].split("&")[0],sourceBump:!0}),t=h.d.getElementsByClassName("_mfw"),i=0,o=t.length;i<o;i+=1)if((n=t[i].currentStyle||h.w.getComputedStyle(t[i],!1))&&n.backgroundImage&&"none"!==n.backgroundImage&&(e=n.backgroundImage.split("&")[0].split("="),e[1])){for(a=e[1].split(","),r=a.length-1,l=-1;r>l;r-=1)c({id:a[r],sourceOrder:r});break}},function(){var e,t,i,o,n,a,r,l,c,u;if((s||h.d.URL).match(h.a.pattern.google.page)&&(h.v.doNotSort=!0,e=h.d.getElementById("ires")))for(t=e.getElementsByTagName("A"),i=0,o=t.length;i<o;i+=1)if(r="",media="",t[i].href&&(a=t[i].href.split("imgrefurl="),a[1]&&(r=a[1].split("&")[0]),a=t[i].href.split("imgurl="),a[1]&&(media=a[1].split("&")[0])),r&&media&&(n=t[i].getElementsByTagName("IMG"),n[0]&&(h.f.set(n[0],"data-pin-url",decodeURIComponent(r)),h.f.set(n[0],"data-pin-media",decodeURIComponent(media)))),l=t[i].parentNode.getElementsByTagName("DIV"),l[2]&&(c=l[2].textContent))try{"object"==typeof(u=JSON.parse(c))&&(u.s||u.pt)&&h.f.set(n[0],"data-pin-description",u.s||u.pt)}catch(e){}},function(){(s||h.d.URL).match(h.a.pattern.pinterest.page)&&!0===window.isMainPinterestSite&&(h.v.data.close=h.v.msg.noPinningFromPinterest)},function(){(s||h.d.URL).match(h.a.pattern.facebook.page)&&(h.v.data.close=h.v.msg.noPinDomain.replace(/%noPinDomain%/,"Facebook"))},function(){(s||h.d.URL).match(h.a.pattern.craigslist.page)&&(h.v.data.close=h.v.msg.noPinDomain.replace(/%noPinDomain%/,"Craigslist"))}],img:[function(e,t){if((s||h.d.URL).match(h.a.pattern.itunes.page)){e.description=h.d.title.split(" on the App Store")[0];var i=h.d.getElementById("title");if(i){var o=i.getElementsByTagName("H1"),n=i.getElementsByTagName("H2");if(o[0]&&n[0]){var a=o[0].innerHTML,r=n[0].innerHTML;a&&r&&(r=r.charAt(0).toLowerCase()+r.substr(1),e.description=a+" "+r)}}}},function(e,t){var i,o;(s||h.d.URL).match(h.a.pattern.twitter.page)&&(i=t.parentNode.parentNode)&&"A"===i.tagName&&h.f.get(i,"data-resolved-url-large")&&(e.media=h.f.get(i,"data-resolved-url-large"),e.url=i.href,(o=i.parentNode.parentNode.parentNode.getElementsByClassName("tweet-text")[0])&&"P"===o.tagName&&(e.description=o.innerText))},function(e,t){var i;return i=!1,e.media.match(h.a.pattern.flickr.media)&&(e.getsAttribution=!0,e.attrib="flickr",e.url=h.v.canonicalUrl,i=!0),i},function(e,t){var i,s,o;return i=!1,e.media.match(h.a.pattern["500px"].media)&&(e.getsAttribution=!0,s=e.media.split("#")[0].split("?")[0].split("/"),o=s.pop(),o.match(/.jpg/)&&(e.media=s.join("/")+"/2048.jpg",e.set={getsAttribution:!0,attrib:"fivehundredpx",url:h.v.canonicalUrl},h.f.loadImg(e),i=!0)),i},function(e,t){var i,s;return i=!1,e.media.match(h.a.pattern.youtube.media)&&(s=e.media.split("/")[4],e.media="https://i.ytimg.com/vi/"+s+"/hqdefault.jpg",e.url=h.v.canonicalUrl,e.url.match(h.a.pattern.youtube.page)&&(e.url="https://www.youtube.com/watch?v="+s),e.set={isVideo:!0,attrib:"youtube",url:e.url},h.f.loadImg(e),i=!0),i},function(e,t){var i,s;return i=!1,e.url||(e.url=h.v.canonicalUrl),s=e["data-pin-url"],s&&(delete e["data-pin-url"],e.dataPinUrl=s,e.url=s),s=e["data-pin-id"],s&&(delete e["data-pin-id"],e.dataPinId=s),s=e["data-pin-description"],s&&(delete e["data-pin-description"],e.dataPinDescription=s),s=e["data-pin-media"],s&&(delete e["data-pin-media"],h.f.check.source(s)&&(e.media=s,e.set={dataPinMedia:!0,url:e.url},e.dataPinUrl&&(e.set.dataPinUrl=e.dataPinUrl),e.dataPinDescription&&(e.set.dataPinDescription=e.dataPinDescription),e.dataPinId&&(e.set.dataPinId=e.dataPinId),h.f.loadImg(e),i=!0)),i},function(e,t){var i,o,n=s||h.d.URL;return i=!1,o=t.parentNode,"A"===o.tagName&&o.href&&h.f.check.source(o,!0)&&!n.match(h.a.pattern.wikipedia.page)&&(e.url||(e.url=h.v.canonicalUrl),e.media=o.href,e.set={linkedImg:!0,url:e.url},h.f.loadImg(e),i=!0),i}],meta:[function(){var e,t;return e=!1,h.v.meta.pinterest&&h.v.meta.pinterest.media&&h.f.check.source(h.v.meta.pinterest.media)&&(t={media:h.v.meta.pinterest.media,set:{metaPinterest:!0,url:h.v.meta.pinterest.url||h.v.canonicalUrl,description:h.v.meta.pinterest.description||h.d.title||void 0}},h.v.meta.pinterest.id&&(t.set.dataPinId=h.v.meta.pinterest.id),h.f.loadImg(t),e=!0),e},function(){var e,t;return h.v.meta.og&&h.v.meta.og.media&&h.f.check.source(h.v.meta.og.media)&&(t={media:h.v.meta.og.media,set:{metaOg:!0,url:h.v.meta.og.url||h.v.canonicalUrl,description:h.v.meta.og.description||h.v.meta.og.title||h.d.title||void 0}},h.f.loadImg(t),e=!0),e=!1}]},runMods:function(e,t,i){if(h.f.modifiers[e])for(var s=0;s<h.f.modifiers[e].length&&!h.f.modifiers[e][s](t,i);s+=1);},getTags:function(){var e,t,i,s,o,n,a,r,l,c;for(e in h.a.tag)if(t=h.d.getElementsByTagName(e),i=t.length)for(s=h.a.tag[e],o=0;o<i;o+=1){for("img"===e&&h.f.srcSet(t[o]),n=null,a=0;a<s.length;a+=1)(r=h.f.get(t[o],s[a]))&&(n||(n={}),n[s[a]]=r);n&&"function"==typeof h.f.tag[e]&&h.f.tag[e](t[o])&&"img"===e&&(n.sourceOrder=h.v.sourceOrder,h.v.sourceOrder=h.v.sourceOrder+1,n.src&&(n.media=n.src,delete n.src),h.f.runMods(e,n,t[o]),n.description||(l=n.media.split("/").pop(),c=l.split(".")[0],(n.title===l||n.title===c)&&(n.title=null),(n.alt===l||n.alt===c)&&(n.alt=null),n.description=n.title||n.alt||h.v.meta.pinterest.description||h.v.meta.og.description||h.v.meta.og.title||h.v.title||void 0),h.v.found.push(n))}},arrange:function(){var e,t,i,s,o,n;for(e=0,t=h.v.found.length;e<t;e+=1)n=0,i=h.v.found[e],i.dataPinDescription&&(i.description=i.dataPinDescription),!i.description&&(i.description=u),i.description=i.description.substring(0,497),497===i.description.length&&(i.description=i.description+"..."),"number"==typeof i.naturalHeight&&i.naturalHeight&&(i.height=i.naturalHeight,delete i.naturalHeight),"number"==typeof i.naturalWidth&&i.naturalWidth&&(i.width=i.naturalWidth,delete i.naturalWidth),s=parseInt(i.height),o=parseInt(i.width),o>s&&(o=s),s>3*o&&(s=3*o),n=s*o,i.isCanonical&&(n*=3),(i.dataPinId||i.pinItButton||i.dataPinMedia||i.dataPinUrl||i.metaPinterest)&&(n*=3),i.isVideo&&(n*=3),i.sourceBump&&(n*=3),o<h.a.thumbCellSize&&(n/=2,h.v.hazSet.sourceBump&&(n/=10)),i.metaOg&&t>1&&o<h.a.thumbCellSize&&(n/=100),i.sourceOrder&&(n-=100*i.sourceOrder),i.order=n;if(h.v.found.length&&!h.v.doNotSort){var a=function(e,t){return t.order-e.order};for(h.v.found.sort(a),n=h.v.found[0].order,e=1,t=h.v.found.length;e<t;e+=1)if(h.v.found[e].order<n/h.v.config.quality){h.v.found[e].halt=!0;break}}},log:function(e){},done:function(){var e,t;if(h.v.data.close)h.v.config.quiet||h.w.alert(h.v.data.close);else{for(h.f.arrange(),h.v.data.thumb=h.v.found,e=0,t=h.v.data.thumb.length;e<t;e+=1)h.v.data.thumb[e].src=h.v.data.thumb[e].media,h.v.data.thumb[e].isVideo&&(h.v.data.thumb[e].multimedia=!0);if(h.v.config.share)return h.d.b.setAttribute(h.v.config.share,JSON.stringify(h.v.data)),void(h.v.data.thumb.length||h.v.config.quiet||h.w.alert(h.v.msg.noPinnablesFound));if(h.w[h.v.config.render]&&"function"==typeof h.w[h.v.config.render])return void h.w[h.v.config.render](h.v.data);h.v.defaultBodyOverflow="","function"==typeof h.w.getComputedStyle&&"function"===h.w.getComputedStyle(h.d.b).getPropertyValue&&(h.v.defaultBodyOverflow=h.w.getComputedStyle(h.d.b).getPropertyValue("overflow")),"visible"===h.v.defaultBodyOverflow&&(h.v.defaultBodyOverflow=""),h.d.b.style.overflow="hidden",h.v.data.config=h.v.config,h.v.data.hazExtension=!0;var s=JSON.stringify(h.v.data);h.s.dark=h.f.make({IFRAME:{id:h.a.k+"_grid",src:h.a.grid,frameBorder:"0",style:{display:"block",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",bottom:"0",right:"0",margin:"0",clip:"auto","z-index":"9223372036854775807"}}});var o=function(){h.d.b.style.overflow=h.v.defaultBodyOverflow,h.d.b.removeAttribute(h.a.hazPinningNow),h.f.kill(h.s.dark)},n=(new Date).getTime();h.s.dark.onload=function(){var e=(new Date).getTime()-n;h.v.receiver=h.s.dark.contentWindow,h.v.receiver.postMessage(s,h.s.dark.src),h.f.listen(h.w,"message",function(e){h.w.clearTimeout(h.v.renderFailed),"x"===e.data&&o();try{var t=JSON.parse(e.data);if("object"==typeof t&&void 0!==t.type&&void 0!==t.url&&void 0!==t.name&&void 0!==t.specs&&"sumomeShareCallback"==t.type){var s=h.w.open(t.url,t.name,t.specs);if(i)var n=0,a="object"!=typeof s||null===s,r=setInterval(function(){(a||s.closed||n++>120)&&(a&&alert("Please disable your popup blocker"),clearInterval(r),i())},500)}}catch(e){}}),this.focus()},h.f.set(h.d.b,h.a.hazPinningNow,"true"),h.d.b.appendChild(h.s.dark),h.v.renderFailed=h.w.setTimeout(function(){h.w.alert(h.v.msg.noPinnablesFound),o()},h.a.maxWait)}},setLang:function(e){e&&("object"==typeof h.a.msg[e]?(h.v.msg=h.a.msg[e],h.v.data.msg=h.v.msg):(e=e.split("-")[0],"object"==typeof h.a.msg[e]?(h.v.msg=h.a.msg[e],h.v.data.msg=h.v.msg):(h.v.msg=h.a.msg.en,h.v.data.msg=h.v.msg)))},getLang:function(){var e;(e=h.d.getElementsByTagName("HTML")[0].getAttribute("lang")||"en")&&(e=e.toLowerCase(),h.f.setLang(e))},init:function(){for(var e,t=s||h.d.URL,i=h.d.getElementsByTagName("TITLE"),o=0;o<i.length;o++)u||(u=i[o].textContent);h.d.b=h.d.getElementsByTagName("BODY")[0],h.d.b&&(h.w.getComputedStyle||(h.w.getComputedStyle=function(){return!1}),h.f.get(h.d.b,h.a.hazPinningNow)||(h.d.d=h.d.documentElement,h.d.h=h.d.getElementsByTagName("HEAD")[0],h.v={sourceOrder:0,canonicalUrl:t,src:{},config:{pinMethod:"bookmarklet",quality:h.a.quality,favicon:h.w.location.protocol+"//"+t.split("/")[2]+"/favicon.ico",xv:h.d.b.getAttribute(h.a.xv)},hazSet:{},meta:{og:{},pinterest:{}},imgLoadingCount:0,callbackLoadingCount:0,srcDomain:{},extensionVer:h.f.get(h.d.b,"data-pinterest-extension-installed")||void 0,msg:h.a.msg.en,css:"",data:{blacklistedSource:{},thumb:[]},found:[]},h.f.getLang(),h.f.getConfig(),h.v.data.url=t,h.v.config.pinbox&&(h.v.data.pinbox=h.v.config.pinbox),h.f.check.domain(t)?(h.f.runMods("page"),h.f.getTags(),h.f.runMods("meta"),h.v.safety=h.w.setTimeout(function(){h.v.check&&h.w.clearTimeout(h.v.check),h.f.done()},h.a.maxWait),(e=function(){h.v.imgLoadingCount>0||h.v.callbackLoadingCount>0?h.v.check=h.w.setTimeout(e,100):(h.v.safety&&h.w.clearTimeout(h.v.safety),h.f.done())})()):(h.v.data.close=h.v.msg.noPinDomain,h.f.done())))}}}()};h.f.init()}(r,i,null,null,!0)},priority:97},plurk:{name:"Plurk",url:"http://www.plurk.com/m?content={URL}&qualifier=shares",width:600,height:500,background:"#CF682E",color:"#fff"},pocket:{name:"Pocket",url:"https://getpocket.com/save?url={URL}&title={TEXT}",width:520,height:315,background:"#EE4056",color:"#fff"},printfriendly:{name:"PrintFriendly.com",background:"#9ec36e",foreground:"#fff",javascript:function(){if(window.priFri)window.print();else{var e="";pfstyle="nbk",pfBkVersion="1",e=window.location.href.match(/https/)?"https://pf-cdn.printfriendly.com/ssl/main.js":"http://cdn.printfriendly.com/printfriendly.js",_pnicer_script=document.createElement("SCRIPT"),_pnicer_script.type="text/javascript",_pnicer_script.src=e+"?x="+Math.random(),document.getElementsByTagName("head")[0].appendChild(_pnicer_script)}}},printerfriendly:{name:"Printer Friendly",background:"#999",foreground:"#fff",javascript:function(){e(document).printPreview()}},reddit:{name:"Reddit",url:"http://reddit.com/submit?url={URL}&title={TEXT}",width:860,height:500,background:"#ff5700",color:"#fff",method:"json",fetch:"//buttons.reddit.com/button_info.json?url={URL}",parse:function(e){return"data"in e&&"children"in e.data&&e.data.children.length>0?parseInt(e.data.children[0].data.score):0},priority:92},slashdot:{name:"Slashdot",width:600,height:500,background:"#1A5C59",color:"#fff",javascript:function(){var e=document.body;e&&!document.xmlVersion&&(z=document.createElement("script"),z.src="https://images.slashdot.org/slashdot-submission.ssl.js",e.appendChild(z))}},sms:{name:"SMS",url:"sms:?body={TEXT}%0A%0D{URL}",width:600,height:500,background:"#0076ff",color:"#fff",priority:93},soupio:{name:"Soup",url:"",width:450,height:400,background:"#C80813",color:"#fff",javascript:function(){var e=["body","frameset","head"],t=document.location.protocol+"//www.soup.io/",i="soup_bookmarklet_"+Math.floor(1e5*Math.random());window.open(t+"bookmarklet-loading.html",i,"toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=400");try{var s=document.createElement("script");s.setAttribute("src",t+"bookmarklet/js/"+i+"/5");for(var o=0;0<e.length;0){var n=document.getElementsByTagName(e[0])[0];if(n){n.appendChild(s);break}}}catch(n){}}},sumome:{name:"SumoMe",url:"",width:600,height:500,background:"#0f52ba",color:"#fff"},tapiture:{name:"Tapiture",url:"http://tapiture.com/widget/tap?url={IMAGE}&title={TEXT}&page_url={URL}&type=image&description=&alt={DESC}&img_title=&img_width=&img_height=",width:600,height:500,background:"#325892",color:"#fff"},techmeme:{name:"Techmeme",filterText:function(e){return function(e,t){var i,s;if(i=e.split(""),i.length>t){for(s=i.length-1;s>-1;--s)if(s>t)i.length=s;else if(" "===i[s]){i.length=s;break}i.push("...")}return i.join("")}(e,117)},url:"https://twitter.com/intent/tweet?url={URL}&text=tip+@techmeme:+{TEXT}",width:600,height:445,background:"#1E4B62",color:"#fff"},tinyurl:{name:"TinyURL",url:"http://tinyurl.com/create.php?url={URL}",width:800,height:660,background:"#009",color:"#fff"},tumblr:{name:"Tumblr",url:"http://www.tumblr.com/share?v=3&u={URL}&t={TEXT}",width:450,height:450,background:"#2c4762",color:"#fff",priority:88},twitter:{name:"Twitter",filterText:function(e){return function(e,t){var i,s;if(i=e.split(""),i.length>t){
for(s=i.length-1;s>-1;--s)if(s>t)i.length=s;else if(" "===i[s]){i.length=s;break}i.push("…")}return i.join("")}(e,117)},url:"https://twitter.com/intent/tweet?url={URL}&text={TEXT}&via={VIA}&related={RELATED}",width:600,height:445,background:"#00aced",color:"#fff",params:{via:{label:"Twitter @username",desc:"Twitter screen name to append to tweets with the via attribute. Do not include @ symbol."},related:{label:"Suggested accounts",desc:"Comma separated list of Twitter accounts to suggest following. Do not include @ symbol or spaces."}},priority:98},typepadpost:{name:"Typepad",url:"http://www.typepad.com/services/quickpost/post?v=2&qp_show=ac&qp_title={TEXT}&qp_href={URL}&qp_text={DESC}",width:585,height:735,background:"#7A9B5D",color:"#fff"},viadeo:{name:"Viadeo",url:"http://www.viadeo.com/shareit/share/?url={URL}",width:600,height:600,background:"#E46123",color:"#fff"},vk:{name:"VKontakte",url:"http://vk.com/share.php?url={URL}&title={TEXT}",width:660,height:500,background:"#4D76A1",color:"#fff"},wanelo:{name:"Wanelo",width:600,height:500,background:"#518653",color:"#fff",javascript:function(){function e(){window.waneloBookmarklet()}if(window.waneloBookmarklet)e();else{var t=encodeURIComponent(location.href),i=Math.floor(1e3*Math.random()),s=document.createElement("script");s.setAttribute("src","//wanelo.com/bookmarklet/3/setup?*="+i+"&url="+t),s.onload=e,s.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(s)}}},weheartit:{name:"We Heart It",url:"http://weheartit.com/heart-it/new_entry?encoding=utf-8&popup=1&hearting_method=heart_it_button&image_url={IMAGE}&source_url={URL}",width:700,height:500,background:"#FD6B9C",color:"#fff"},whatsapp:{name:"WhatsApp",url:"whatsapp://send?text={TEXT}%20{URL}",width:600,height:500,background:"#1d9e11",color:"#fff",priority:94},wordpressblog:{name:"Wordpress Blog",url:"https://sumo.com/apps/share/wordpress?u={URL}&t={TEXT}&s={DESC}&i={IMAGE}",width:600,height:350,background:"#000",color:"#fff"},wykop:{name:"Wykop",url:"http://www.wykop.pl/dodaj/link/?url={URL}&title={TEXT}&desc={DESC}",width:600,height:500,background:"#4684AD",color:"#fff"},xing:{name:"XING",url:"https://www.xing.com/spi/shares/new?url={URL}",width:600,height:600,background:"#006567",color:"#fff"},yahoomail:{name:"Yahoo! Mail",url:"http://compose.mail.yahoo.com/?subject={TEXT}&body={URL}",width:1160,height:690,background:"#2E147B",color:"#fff"},yammer:{name:"Yammer",url:"https://www.yammer.com/messages/new?login=true&trk_event=yammer_share&status={TEXT} {URL}",width:600,height:350,background:"#1074C3",color:"#fff"},ychackernews:{name:"YC Hacker News",url:"https://news.ycombinator.com/submitlink?u={URL}&t={TEXT}",width:600,height:335,background:"#FC6620",color:"#fff"},yummly:{name:"Yummly",url:"http://www.yummly.com/urb/verify?url={URL}&title={TEXT}&image={IMAGE}",width:600,height:500,background:"#e0601f",color:"#fff",fetch:"//www.yummly.com/services/yum-count?url={URL}",parse:function(e){if("count"in e)return parseInt(e.count);if("error"in e)throw new Error(e.error);return 0},priority:87}},e.shareSortedKeys=Object.keys(e.shareServices);var t=function(t,i){var s="priority"in e.shareServices[t]?e.shareServices[t].priority:0,o="priority"in e.shareServices[i]?e.shareServices[i].priority:0,n=o-s;return 0==n?t<i?-1:1:n};return e.shareSortedKeys.sort(t),e.shareShortUrls={},e.share=function(t,i,s){var o=i.url||window.location.href.split("#")[0],n=i.text||e('meta[property="og:title"]').eq(0).attr("content")||e("title").eq(0).text()||document.title,s=s||null,a=e('meta[property="og:image"]').eq(0).attr("content")||e('link[rel="image_src"]').eq(0).attr("href")||"",r=i.noSumoBranding;if("twitter"===t&&e('meta[name="twitter:image"]').length&&(a=e('meta[name="twitter:image"]').eq(0).attr("content")),""==a){var l=0,c=null;e("img").each(function(){var t=e(this).width(),i=e(this).height(),s=1;if(t&&i){s=t>=i?i/t:t/i;var o=t*i*s;o>l&&(l=o,c=e(this))}}),null!=c&&(a=c.get(0).src||"")}var t=t.toLowerCase();if(t in e.shareServices)if("javascript"in e.shareServices[t])if("shortenUrl"in i&&"shortener"in i&&i.shortenUrl&&"pinterest"!=t){var u=i.shortener+":"+o;u in e.shareShortUrls?(o=e.shareShortUrls[u],e.shareServices[t].javascript(o,n,null,a,function(){s&&s(t,o)})):e.ajax({type:"POST",dataType:"json",url:i.sumoUrl+"/apps/share/shorten",data:{site_id:i.siteId,href:o},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(r){"success"in r&&r.success&&(e.shareShortUrls[u]=r.url,o=r.url,e.extend(i,r)),e.shareServices[t].javascript(o,n,null,a,function(){s&&s(t,o)})})}else if("pinterest"===t){var m=(document.getElementsByTagName("HTML")[0].getAttribute("lang")||"en").toLowerCase(),h={};e.ajax({type:"POST",dataType:"json",url:i.sumoUrl+"/apps/share/pinterest/messages",data:{site_id:i.siteId,language:m},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(r){void 0!==r.success&&r.success&&void 0!==r.messages?h[m]=r.messages:h[m]={noPinDomain:"Sorry, pinning is not allowed from this domain. Please contact the site operator if you have any questions.",noPinMeta:"Sorry, pinning is not allowed from this page. Please contact the site operator if you have any questions.",noPinnablesFound:"Sorry, couldn't find any pinnable things on this page.",noPinningFromPinterest:"Oops! That button doesn't work on Pinterest. Try using the red Pin It button at the top of any Pin.",choosePin:"Choose a Pin to save"},e.shareServices[t].javascript(i.sumoUrl,h,o,n,null,a,function(){s&&s(t,o)})})}else e.shareServices[t].javascript(o,n,null,a,function(){s&&s(t,o)});else{var d=e.shareServices[t].url,p=e.shareServices[t].width,f=e.shareServices[t].height,g="sumomeShare-"+4294967296*Math.random();if(d){var v=["pinterest","reddit","yummly"];if("shortenUrl"in i&&"shortener"in i&&i.shortenUrl&&v.indexOf(t)<0){var u=i.shortener+":"+o;u in e.shareShortUrls?(o=e.shareShortUrls[u],e.shareWindow(t,i,d,n,o,a,r,g,s)):("http"==d.toLowerCase().substring(0,4)&&window.open("facebook"==t?"":i.sumoUrl+"/apps/share/loading",g,"height="+f+",width="+p+",location=0,menubar=0,status=0,titlebar=0,toolbar=0"),e.ajax({type:"POST",dataType:"json",url:i.sumoUrl+"/apps/share/shorten",data:{site_id:i.siteId,href:o},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(l){"success"in l&&l.success&&(e.shareShortUrls[u]=l.url,o=l.url,e.extend(i,l)),e.shareWindow(t,i,d,n,o,a,r,g,s)}))}else e.shareWindow(t,i,d,n,o,a,r,g,s)}}},e.shareWindow=function(t,i,s,o,n,a,r,l,c){if("filterText"in e.shareServices[t]&&(o=e.shareServices[t].filterText(o)),s=s.replace(/{URL}/g,encodeURIComponent(n)),s=s.replace("{TEXT}",encodeURIComponent(o)),s=s.replace("{DESC}",""),s=s.replace("{IMAGE}",encodeURIComponent(a)),s=s.replace("{PROMO}",r?"":"%0A%0A%0AShared%20by%20Sumo%20%28%20http%3A%2F%2Fsumo.com%2F%20%29"),"params"in e.shareServices[t])for(var u in e.shareServices[t].params)if(u in i&&i[u])s=s.replace("{"+u.toUpperCase()+"}",encodeURIComponent(i[u]));else if("twitter"!==t||"via"!==u&&"related"!==u||!e('meta[name="twitter:site"]').length&&!e('meta[name="twitter:creator"]').length)s=s.replace("&"+u+"={"+u.toUpperCase()+"}","");else{var m=e('meta[name="twitter:site"]').eq(0).attr("content")||"",h=e('meta[name="twitter:creator"]').eq(0).attr("content")||"",d=m&&h&&m!==h,p;"@"===m.substr(0,1)&&(m=m.substr(1)),"@"===h.substr(0,1)&&(h=h.substr(1)),p="via"===u?d?m+" @"+h:m||h:d?m+","+h:h||m,s=s.replace("{"+u.toUpperCase()+"}",encodeURIComponent(p))}if("sms:?"==s.toLowerCase().substring(0,5)&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&(s=s.replace(/sms:(\+?([0-9]*))?\?/,"sms:$1&")),"http"!=s.toLowerCase().substring(0,4)){var f=document.createElement("a");if(f.href=s,document.body.appendChild(f),"FastClick"in window&&window.FastClick)window.location.href=s;else if(f.click)f.click();else if(document.createEvent){var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window),f.dispatchEvent(g)}document.body.removeChild(f),c&&c(t,n)}else{var v=e.shareServices[t].width,b=e.shareServices[t].height,y=window.open(s,l,"height="+b+",width="+v+",location=0,menubar=0,status=0,titlebar=0,toolbar=0");if(c)var w=0,_=setInterval(function(){(y.closed||w++>120)&&(clearInterval(_),c(t,n))},500)}},e.shareFetch=function(t,i,s){var s=s||null,i=i||window.location.href.split("#")[0];"function"==typeof i&&(s=i,i=window.location.href.split("#")[0]);var t=t.toLowerCase();if(t in e.shareServices&&"fetch"in e.shareServices[t]&&"parse"in e.shareServices[t])try{var o="jsonp";if("method"in e.shareServices[t]&&(o=e.shareServices[t].method),"json"==o)e.ajax({type:"GET",url:e.shareServices[t].fetch.replace("{URL}",encodeURIComponent(i)),jsonp:"jsonp",dataType:"jsonp",cache:!1,success:function(o){try{var n=e.shareServices[t].parse(o);null!==s&&s(null,i,n)}catch(e){null!==s&&s(e)}},error:function(e){null!==s&&s(e)}});else{if("jsonproxy"==o)return s(null,i,0);if("jsonp"==o)e.ajax({type:"GET",url:e.shareServices[t].fetch.replace("{URL}",encodeURIComponent(i)),contentType:"application/json",dataType:"jsonp",cache:!1,success:function(o){try{var n=e.shareServices[t].parse(o);null!==s&&s(null,i,n)}catch(e){null!==s&&s(e)}},error:function(e){null!==s&&s(e)}});else if("googleplus"==o)e.ajax({type:"POST",url:e.shareServices[t].fetch.replace("{URL}",encodeURIComponent(i)),contentType:"application/json",cache:!1,data:JSON.stringify({method:"pos.plusones.get",id:"p",params:{nolog:!0,id:i,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),success:function(o){try{var n=e.shareServices[t].parse(o);null!==s&&s(null,i,n)}catch(e){null!==s&&s(e)}},error:function(e){null!==s&&s(e)}});else if("linkedin"==o){for(var n="linkedinjsonpcallback",a=0;a<6;a++)n+=String.fromCharCode(Math.floor(26*Math.random())+97);e.ajax({type:"GET",url:e.shareServices[t].fetch.replace("{URL}",encodeURIComponent(i)),contentType:"application/json",dataType:"jsonp",jsonpCallback:n,cache:!1,success:function(o){try{var n=e.shareServices[t].parse(o);null!==s&&s(null,i,n)}catch(e){null!==s&&s(e)}},error:function(e){null!==s&&s(e)}})}}}catch(e){null!==s&&s(e)}else null!==s&&s(new Error("Invalid service"))},{services:e.shareServices,sortedKeys:e.shareSortedKeys}}),sumo.define("insQ",[],function(){return function(){"use strict";function e(e,t){var s,o="insQ_"+a++,n=function(e){e.animationName!==o&&e[l]!==o||i(e.target)||t(e.target)};s=document.createElement("style"),s.innerHTML="@"+c+"keyframes "+o+" {  from {  outline: 1px solid transparent  } to {  outline: 0px solid transparent }  }\n"+e+" { animation-duration: 0.001s; animation-name: "+o+"; "+c+"animation-duration: 0.001s; "+c+"animation-name: "+o+";  } ",document.head.appendChild(s);var r=setTimeout(function(){document.addEventListener("animationstart",n,!1),document.addEventListener("MSAnimationStart",n,!1),document.addEventListener("webkitAnimationStart",n,!1)},d.timeout);return{destroy:function(){clearTimeout(r),s&&(document.head.removeChild(s),s=null),document.removeEventListener("animationstart",n),document.removeEventListener("MSAnimationStart",n),document.removeEventListener("webkitAnimationStart",n)}}}function t(e){e.QinsQ=!0}function i(e){return d.strictlyNew&&!0===e.QinsQ}function s(e){var t=e.parentNode;return t?i(t)?e:s(t):e}function o(e){for(t(e),e=e.firstChild;e;e=e.nextSibling)void 0!==e&&1===e.nodeType&&o(e)}function n(n,a){var r=[],l=function(){var e;return function(){clearTimeout(e),e=setTimeout(function(){r.forEach(o),a(r),r=[]},10)}}();return e(n,function(e){if(!i(e)){t(e);var o=s(e);r.indexOf(o)<0&&r.push(o),l()}})}var a=100,r=!1,l="animationName",c="",u="Webkit Moz O ms Khtml".split(" "),m="",h=document.createElement("div"),d={strictlyNew:!0,timeout:20};if(h.style.animationName&&(r=!0),!1===r)for(var p=0;p<u.length;p++)if(void 0!==h.style[u[p]+"AnimationName"]){m=u[p],l=m+"AnimationName",c="-"+m.toLowerCase()+"-",r=!0;break}var f=function(t){return!(!r||!t.match(/[^{}]/))&&(d.strictlyNew&&o(document.body),{every:function(i){return e(t,i)},summary:function(e){return n(t,e)}})};return f.config=function(e){for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t])},f}()}),sumo.define("jquery.styleBuffer",["jquery","insQ","jquery.style","debounce"],function(e,t){e.expr[":"].notonpage=e.expr.createPseudo(function(t){return function(t){if("hidden"==e(t).css("visibility")||0==e(t).css("opacity")||"none"==e(t).css("display")||e(t).offset().top>=e(window).height()||e(t).offset().right<=0||e(t).offset().left>=e(window).width()||e(t).offset().left<=-e(t).width()||e(t).offset().bottom<=0)return!0;var i=e(t).parent();return!!i&&i.is(":notonpage")}}),e.fn.removeStyleBuffer=function(t,i){var s=this;return s.each(function(){var s=e(this).data(t+"-buffer-"+i),o=e(this).data(t+"-buffer-"+i+"-priority");e(this).style(t+"-"+i,void 0==s?"":s,void 0==o?"":o)}),e.each(e.fn.styleBuffer._groups,function(e,t){t.elements=t.elements.not(s)}),this},e.fn.styleBufferPage=function(t){var t=t||e("*"),i=e("[data-sumome-stylebuffer-page]"),s=i.length*e(window).height();return i.length>0?($fixed=t.not(i).not("body, html").filter(function(){if(e(this).is("[data-sumome-stylebuffer-page-fixed], #sumome-modal-mask, .sumome-control, .sumome-dialog-popup, .sumome-dialog-popup-overlay, .sumome-blockui, .sumome-block-overlay, .sumome-sp-container"))return!1;var t=e(this).css("position");if("fixed"===t)return!0;if("absolute"!==t)return!1;var i=e(this).parents().filter(function(t,i){return!e(i).is("body,html")&&["relative","fixed","absolute"].indexOf(e(i).css("position"))>=0});if(!i||!i.length)return!0;if(e(this).parents("[data-sumome-stylebuffer-page]").length>0)return!1;if(!e(this).parent().is("body,html"))return!1;var o=e(this).position().top;return o<=s&&o>-2e3}),$fixed.each(function(){e(this).attr("data-sumome-stylebuffer-page-fixed",!0);for(var t=["","-webkit","-ms","-moz","-o"],i=0;i<t.length;i++){var s=t[i];e(this).data("sumome-stylebuffer-original"+s+"-transform",e(this).style(s+(s?"-":"")+"transform")),e(this).data("sumome-stylebuffer-original"+s+"-transform-priority",e(this).style().getPropertyPriority(s+(s?"-":"")+"transform")),e(this).data("sumome-stylebuffer-original"+s+"-transition-duration",e(this).style(s+(s?"-":"")+"transition-duration")),e(this).data("sumome-stylebuffer-original"+s+"-transition-duration-priority",e(this).style().getPropertyPriority(s+(s?"-":"")+"transition-duration")),e(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode",e(this).style(s+(s?"-":"")+"animation-fill-mode")),e(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode-priority",e(this).style().getPropertyPriority(s+(s?"-":"")+"animation-fill-mode")),e(this).data("sumome-stylebuffer-original"+s+"-animation-duration",e(this).style(s+(s?"-":"")+"animation-duration")),e(this).data("sumome-stylebuffer-original"+s+"-animation-duration-priority",e(this).style().getPropertyPriority(s+(s?"-":"")+"animation-duration"))}for(var i=0;i<t.length;i++){var s=t[i];e(this).style(s+(s?"-":"")+"transition-duration","0s","important"),e(this).style(s+(s?"-":"")+"transform","scale(0,0)","important"),e(this).style(s+(s?"-":"")+"animation-fill-mode","none","important"),e(this).style(s+(s?"-":"")+"animation-duration","0s","important")}e(this).is("iframe")&&(e(this).data("sumome-stylebuffer-original-display",e(this).style("display")),e(this).data("sumome-stylebuffer-original-display-priority",e(this).style().getPropertyPriority("display")),e(this).style("display","none","important"))})):e("[data-sumome-stylebuffer-page-fixed]").each(function(){for(var t=["","-webkit","-ms","-moz","-o"],i=0;i<t.length;i++){var s=t[i];e(this).style(s+(s?"-":"")+"transform",e(this).data("sumome-stylebuffer-original"+s+"-transform"),e(this).data("sumome-stylebuffer-original"+s+"-transform-priority")),e(this).style(s+(s?"-":"")+"animation-fill-mode",e(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode"),e(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode-priority")),e(this).style(s+(s?"-":"")+"animation-duration",e(this).data("sumome-stylebuffer-original"+s+"-animation-duration"),e(this).data("sumome-stylebuffer-original"+s+"-animation-duration-priority")),setTimeout(e.proxy(function(){e(this).style(s+(s?"-":"")+"transition-duration",e(this).data("sumome-stylebuffer-original"+s+"-transition-duration"),e(this).data("sumome-stylebuffer-original"+s+"-transition-duration-priority"))},this),0)}e(this).is("iframe")&&e(this).style("display",e(this).data("sumome-stylebuffer-original-display"),e(this).data("sumome-stylebuffer-original-display-priority")),e(this).removeAttr("data-sumome-stylebuffer-page-fixed")}),i},e.fn.styleBufferTop=function(t){t?e.fn.styleBufferTop._debounceInit(t):e.fn.styleBufferTop._init(t)},e.fn.styleBufferTop._init=function(t){function i(){var t=document.getElementById("sumome-smartbar-popup");if(t){var i=t.getBoundingClientRect(),s=i.height;i.bottom>0&&(s=i.height-i.bottom),e.fn.styleBufferTop.stackedElements.each(function(t,i){e(i).css("marginTop",e(i).data("sumome-stylebuffertop-original-margin")-s)}),e.fn.styleBufferTop.oldTopElements.each(function(t,i){e(i).css("position",e(i).data("sumome-stylebuffertop-original-position")),e(i).css("top",e(i).data("sumome-stylebuffertop-original-top")-s)})}}var s=e.fn.styleBufferPage(),o=s.length*e(window).height();if(t)var n=e("[data-sumome-stylebuffer-top]");else var n=e("[data-sumome-stylebuffer-top],[data-sumome-stylebuffer-top-stash]");var a=0;n.sort(function(t,i){return t=e(t).data("sumome-stylebuffer-top"),i=e(i).data("sumome-stylebuffer-top"),t<i?-1:t>i?1:0}),e.fn.styleBufferTop._groups=[];var r=e("body"),l=e("#sumome-smartbar-popup[data-sumome-stylebuffer-top]"),c=0,u=!1;if(e.fn.styleBufferTop.stackedElements=e(n).not("#sumome-smartbar-popup"),l&&l.data("sumome-smartbar-config")&&(c=l.outerHeight(),u=l.data("sumome-smartbar-config").show_type),e(n).each(function(t,i){e.fn.styleBuffer._apply(e(i),"margin","top",a,!0),e.fn.styleBufferTop._groups.push({elements:e(i),prop:"margin",side:"top",px:a,force:!0}),void 0===e(i).data("sumome-stylebuffertop-original-margin")&&e(i).data("sumome-stylebuffertop-original-margin",a),a+=e(i).height()}),void 0===r.data("sumome-stylebuffertop-original-margintop")?(void 0===r.data("sumome-welcomemat-original-padding-top")?r.data("sumome-stylebuffertop-original-paddingtop",parseInt(r.css("paddingTop"))):r.data("sumome-stylebuffertop-original-paddingtop",parseInt(r.data("sumome-welcomemat-original-padding-top"))),r.data("sumome-stylebuffertop-original-margintop",parseInt(r.css("marginTop")))):(r.css("marginTop",r.data("sumome-stylebuffertop-original-margintop")),r.css("paddingTop",r.data("sumome-stylebuffertop-original-paddingtop")+"px !important")),e.fn.styleBufferTop.oldTopElements&&e.fn.styleBufferTop.oldTopElements.length&&e.fn.styleBufferTop.oldTopElements.each(function(t,i){if(e(i).data("sumome-stylebuffertop-original-offset")){var s=e(i).data("sumome-stylebuffertop-has-inline").top,o=e(i).data("sumome-stylebuffertop-has-inline").bottom,n=e(i).data("sumome-stylebuffertop-has-inline").left,a=e(i).data("sumome-stylebuffertop-has-inline").right,r=e(i).data("sumome-stylebuffertop-has-inline").position,l=e(i).style("right"),c=e(i).position().right,u=e(i).data("sumome-stylebuffertop-original-offset").right,m=e(i).style("left"),h=e(i).position().left,d=e(i).data("sumome-stylebuffertop-original-offset").left;e(i).style("top",e(i).data("sumome-stylebuffertop-original-offset").top),e(i).style("bottom",e(i).data("sumome-stylebuffertop-original-offset").bottom),l!==u&&c>0&&e(i).style("right",u),parseInt(d)>-2e3&&m!==d&&h<e(window).width()&&e(i).style("left",d),s||(e(i)[0].style.top=""),a||(e(i)[0].style.right=""),n||(e(i)[0].style.left=""),o||(e(i)[0].style.bottom=""),r||(e(i)[0].style.position="")}else e(i).style("top","0px")}),!t){!1===e.fn.styleBufferTop.classFixedElements&&(e.fn.styleBufferTop.classFixedElements=e(".fixed").not(n).length);var m=[".sumome-control",".sumome-dialog-popup",".sumome-dialog-popup-overlay",".sumome-image-sharer",".sumome-contactform-left-page-hidden",".sumome-contactform-right-page-hidden"];e.fn.styleBufferTop.oldTopElements=e("*").not(n).not(s).filter(function(t,i){var s=["absolute","fixed"].indexOf(e(i).css("position"))>=0&&e(i).position().top<a&&e(i).position().top>-2e3&&e(i).height()+e(i).position().top>0&&"sumome-modal-mask"!=e(i).attr("id")&&!e(i).is(m.join(","))&&!e(i).parent().is("#parallax-images");if(s&&void 0===e(i).data("sumome-stylebuffertop-original-position")){e(i).data("sumome-stylebuffertop-original-position",e(i).css("position"));var o={top:""!==e(i)[0].style.top,left:""!==e(i)[0].style.left,right:""!==e(i)[0].style.right,bottom:""!==e(i)[0].style.bottom,position:""!==e(i)[0].style.position},n={top:e(i).css("top"),left:e(i).css("left"),bottom:e(i).css("bottom"),right:e(i).css("right")};"auto"!=n.bottom&&parseFloat(n.bottom)>0&&(n.bottom=parseFloat(n.bottom)-a+"px"),e(i).data("sumome-stylebuffertop-original-offset",n),e(i).data("sumome-stylebuffertop-has-inline",o)}return s}),e.fn.styleBufferTop.oldTopElements=e.fn.styleBufferTop.oldTopElements.filter(function(t,i){if("fixed"==e(i).css("position"))return!0;var s=e(i).parents().filter(function(t,i){return!e(i).is("body,html")&&["relative","fixed","absolute"].indexOf(e(i).css("position"))>=0});return!(s&&s.length)}),e.fn.styleBufferTop.bumpDownElements=e.fn.styleBufferTop.oldTopElements.filter(function(t,i){var s=!1;return"fixed"==e(i).css("position")||(e(i).parents().each(function(t,i){if(!e(i).is("body,html")&&["relative","absolute"].indexOf(e(i).css("position"))>=0)return s=!0,!1}),!s)}),e.fn.styleBufferTop.changePositionElements=e.fn.styleBufferTop.bumpDownElements.filter(function(t,i){var s=!1;return"fixed"==e(i).css("position")&&(e(i).parents().each(function(t,i){if(!e(i).is("body,html")&&["relative","absolute","fixed"].indexOf(e(i).css("position"))>=0)return s=!0,!1}),s&&e(i).data("sumome-stylebuffertop-offset",{top:e(i).offset().top-e(window).scrollTop(),left:e(i).offset().left-e(window).scrollLeft()}),s)})}"smart"==u&&(e.fn.styleBufferTop.oldTopElements.addClass("sumome-smartbar-fixedTopSmart"),e(n).not("#sumome-smartbar-popup").style("transition","margin-top .2s ease-in-out"),r.style("transition","margin-top .2s ease-in-out")),"static"==u?(e.fn.styleBufferTop.bumpDownElements&&e.fn.styleBufferTop.bumpDownElements.length&&(e.fn.styleBufferTop.bumpDownElements.each(function(t,i){var s=!1;if(e.inArray(i,e.fn.styleBufferTop.changePositionElements)>=0){s=!0;var o=e(i).offset()}e(i).style("position","absolute"),s?(e(i).data("sumome-smartbar-new-offset",{top:c+o.top-e(i).offset().top,left:o.left-e(i).offset().left}),e(i).style("top",e(i).data("sumome-smartbar-new-offset").top+"px"),e(i).data("sumome-smartbar-new-offset").left!==parseInt(e(i).data("sumome-stylebuffertop-original-offset").left)&&parseInt(e(i).data("sumome-stylebuffertop-original-offset").left)>e(window).width()&&e(i).style("left",e(i).data("sumome-smartbar-new-offset").left+"px")):e(i).style("top",a+"px"),e(i).data("sumome-stylebuffertop-original-top",a)}),e.fn.styleBufferTop.oldTopElements.each(function(t,i){e(i).css("position",e(i).data("sumome-stylebuffertop-original-position"))})),e(window).scroll(i),i()):(e.fn.styleBufferTop.oldTopElements&&e.fn.styleBufferTop.oldTopElements.length&&e.fn.styleBufferTop.oldTopElements.each(function(t,i){e(i).data("sumome-stylebuffertop-original-offset")&&("auto"==e(i).data("sumome-stylebuffertop-original-offset").top||e(i).style("top",a+parseFloat(e(i).data("sumome-stylebuffertop-original-offset").top)+"px"))}),"fixed"==u&&e(window).scroll(function(){var t=60,i=e(window).scrollTop();e.fn.styleBufferTop.classFixedElements!==e.fn.styleBufferTop.classFixedElementsScroll&&(i>=60&&!1===e.fn.styleBufferTop.classFixedElementsScroll?e.fn.styleBufferTop.classFixedElementsScroll=e(".fixed").not(n).length:i>=60&&!e.fn.styleBufferTop.checkScrollDown?(e.fn.styleBufferTop.checkScrollDown=!0,e.fn.styleBufferTop.checkScrollUp=!1,e("body").styleBufferTop()):i<60&&!e.fn.styleBufferTop.checkScrollUp&&(e.fn.styleBufferTop.checkScrollDown=!1,e.fn.styleBufferTop.checkScrollUp=!0,e("body").styleBufferTop()))}));var l=e("#sumome-smartbar-popup");if(l&&l.data("sumome-smartbar-config")&&"smart"==l.data("sumome-smartbar-config").show_type&&(a=0,e("[data-sumome-stylebuffer-top],[data-sumome-stylebuffer-top-stash]").each(function(){a+=e(this).outerHeight()})),e.fn.styleBufferTop.totalOffset=a,a+=r.data("sumome-stylebuffertop-original-paddingtop")+r.data("sumome-stylebuffertop-original-margintop"),a+o!==0?(e.fn.styleBuffer._apply(r,"padding","top",a+o,!0,"important"),e.fn.styleBuffer._apply(r,"margin","top",0,!0,"important"),e.fn.styleBufferTop._groups.push({elements:r,prop:"padding",side:"top",px:a+o,force:!0,priority:"important"}),e.fn.styleBufferTop._groups.push({elements:r,prop:"margin",side:"top",px:0,force:!0,priority:"important"})):(r.removeStyleBuffer("padding","top"),r.removeStyleBuffer("margin","top")),"bugfix"!=r.css("-webkit-animation-name")&&"androidbugfix"!=r.css("-webkit-animation-name")||(e("[data-sumome-stylebuffertop-bugfix]").length&&e("[data-sumome-stylebuffertop-bugfix]").remove(),r.append("<style data-sumome-stylebuffertop-bugfix>@-webkit-keyframes sumome-bugfix { from { fill: 0; } to { fill: 0; } }</style>"),r.css("-webkit-animation","sumome-bugfix infinite 1s")),void 0===r.data("sumome-stylebuffertop-original-bgposition")&&(r.data("sumome-stylebuffertop-original-bgposition",r.css("backgroundPosition")),r.data("sumome-stylebuffertop-original-bgpositiony",r.css("backgroundPositionY")),r.data("sumome-stylebuffertop-original-bgrepeat",r.css("backgroundRepeat"))),("50% 0%"==r.data("sumome-stylebuffertop-original-bgposition")&&"no-repeat"==r.data("sumome-stylebuffertop-original-bgrepeat")||"0% 0%"==r.data("sumome-stylebuffertop-original-bgposition")&&"repeat-x"==r.data("sumome-stylebuffertop-original-bgrepeat"))&&r.css("backgroundPositionY",a),/^50% [0-9]+px, 0% [0-9]+px$/.test(r.data("sumome-stylebuffertop-original-bgposition"))&&/^no-repeat/.test(r.data("sumome-stylebuffertop-original-bgrepeat"))){var h=r.data("sumome-stylebuffertop-original-bgpositiony").split(", ");r.css("backgroundPositionY",parseInt(h[0])+a+"px, "+(parseInt(h[1])+a)+"px")}return this},e.fn.styleBufferTop._debounceInit=e.debounce(150,!0,function(t){e.fn.styleBufferTop._init(t)}),e.fn.styleBufferBottom=function(t){t?e.fn.styleBufferBottom._debounceInit(t):e.fn.styleBufferBottom._init(t)},e.fn.styleBufferBottom._init=function(t){var i=e("[data-sumome-stylebuffer-page]");if(t)var s=e("[data-sumome-stylebuffer-bottom]");else var s=e("[data-sumome-stylebuffer-bottom],[data-sumome-stylebuffer-bottom-stash]");var o=0;s.sort(function(t,i){return t=e(t).data("sumome-stylebuffer-bottom"),i=e(i).data("sumome-stylebuffer-bottom"),t<i?-1:t>i?1:0}),e.fn.styleBufferBottom._groups=[];var n=e("body"),a=e("#sumome-smartbar-popup[data-sumome-stylebuffer-bottom]"),r=0,l=!1;if(e.fn.styleBufferBottom.stackedElements=e(s).not("#sumome-smartbar-popup"),a&&a.data("sumome-smartbar-config")&&(r=a.outerHeight(),l=a.data("sumome-smartbar-config").show_type),e(s).each(function(t,i){e(i).data("sumome-stylebufferbottom-offsety")&&(o+=e(i).data("sumome-stylebufferbottom-offsety")),e.fn.styleBuffer._apply(e(i),"top","top","auto",!0),e.fn.styleBuffer._apply(e(i),"bottom","bottom",o,!0),e.fn.styleBufferBottom._groups.push({elements:e(i),prop:"top",side:"top",px:"auto",force:!0}),e.fn.styleBufferBottom._groups.push({elements:e(i),prop:"bottom",side:"bottom",px:o,force:!0}),void 0===e(i).data("sumome-stylebufferbottom-original-bottom")&&e(i).data("sumome-stylebufferbottom-original-bottom",o),o+=e(i).height()}),void 0===n.data("sumome-stylebufferbottom-original-marginbottom")?(n.data("sumome-stylebufferbottom-original-marginbottom",parseInt(n.css("marginBottom"))),n.data("sumome-stylebufferbottom-original-paddingbottom",parseInt(n.css("paddingBottom")))):(n.css("marginBottom",n.data("sumome-stylebufferbottom-original-marginbottom")),n.css("paddingBottom",n.data("sumome-stylebufferbottom-original-paddingbottom"))),e.fn.styleBufferBottom.oldBottomElements&&e.fn.styleBufferBottom.oldBottomElements.length&&e.fn.styleBufferBottom.oldBottomElements.each(function(t,i){if(e(i).data("sumome-stylebufferbottom-original-offset")){var s=e(i).data("sumome-stylebufferbottom-has-inline").top,o=e(i).data("sumome-stylebufferbottom-has-inline").bottom,n=e(i).data("sumome-stylebufferbottom-has-inline").left,a=e(i).data("sumome-stylebufferbottom-has-inline").right,r=e(i).data("sumome-stylebufferbottom-has-inline").position;e(i).style("position",e(i).data("sumome-stylebufferbottom-original-position")),e(i).style("top",e(i).data("sumome-stylebufferbottom-original-offset").top),e(i).style("bottom",e(i).data("sumome-stylebufferbottom-original-offset").bottom),e(i).style("left",e(i).data("sumome-stylebufferbottom-original-offset").left),e(i).style("right",e(i).data("sumome-stylebufferbottom-original-offset").right),s||(e(i)[0].style.top=""),a||(e(i)[0].style.right=""),n||(e(i)[0].style.left=""),o||(e(i)[0].style.bottom=""),r||(e(i)[0].style.position="")}else e(i).style("bottom","0px")}),!t){var c=["#sumome-modal-mask",".sumome-control",".sumome-dialog-popup",".sumome-dialog-popup-overlay"],u=["sumome-react-form-tab-bottom-left","sumome-react-form-tab-bottom-center","sumome-react-form-tab-bottom-right"];e.fn.styleBufferBottom.oldBottomElements=e("*").not(s).not(i).filter(function(t,i){var s=["absolute","fixed"].indexOf(e(i).css("position"))>=0&&parseInt(e(i).css("bottom"))<o&&!e(i).is(c.join(","));return e(i).is(u.join(","))&&(s=!0),s&&void 0===e(i).data("sumome-stylebufferbottom-original-position")&&(e(i).data("sumome-stylebufferbottom-original-position",e(i).css("position")),e(i).data("sumome-stylebufferbottom-original-offset",{top:e(i).css("top"),left:e(i).css("left"),bottom:e(i).css("bottom"),right:e(i).css("right")}),e(i).data("sumome-stylebufferbottom-has-inline",{top:""!==e(i)[0].style.top,left:""!==e(i)[0].style.left,right:""!==e(i)[0].style.right,bottom:""!==e(i)[0].style.bottom,position:""!==e(i)[0].style.position})),s});var m=e(window).height();e.fn.styleBufferBottom.oldBottomElements=e.fn.styleBufferBottom.oldBottomElements.filter(function(t,i){if(e(i).is(u.join(",")))return!0;if(e(i).height()>=m)return!1;if("fixed"===e(i).css("position"))return!e(i).is(":notonpage");if("absolute"===e(i).css("position")&&e(i).is(":notonpage"))return!1;var s=e(i).parents().filter(function(t,i){return!e(i).is("body,html")&&["relative","fixed","absolute"].indexOf(e(i).css("position"))>=0});return!(s&&s.length)})}return"smart"==l&&e(s).not("#sumome-smartbar-popup").style("transition","bottom .2s ease-in-out"),e.fn.styleBufferBottom.oldBottomElements&&e.fn.styleBufferBottom.oldBottomElements.length&&e.fn.styleBufferBottom.oldBottomElements.each(function(t,i){e(i).style("bottom",o+parseFloat(e(i).data("sumome-stylebufferbottom-original-offset").bottom)+"px"),o+=0===o||"fixed"===e(i).style("position")?0:e(i).height()}),e.fn.styleBufferBottom.totalOffset=o,o+=n.data("sumome-stylebufferbottom-original-paddingbottom")+n.data("sumome-stylebufferbottom-original-marginbottom"),e(".sumome-stylebufferbottom-shim").length||e('<div class="sumome-stylebufferbottom-shim" />').appendTo(n),e(".sumome-stylebufferbottom-shim").height(o),this},e.fn.styleBufferBottom._debounceInit=e.debounce(150,!0,function(t){e.fn.styleBufferBottom._init(t)}),e.fn.styleBuffer=function(t,i,s){return this.length<1?this:(e.fn.styleBuffer._groups.push({elements:this,prop:t,side:i,px:s,force:!1}),e.fn.styleBuffer._apply(this,t,i,s,!1),this)},e.fn.styleBuffer._apply=function(t,i,o,n,a,r){return e(t).each(function(){var t=e(this);if(i==o)t.style(i,n+("auto"!=n?"px":""),void 0==r?"":r);else{var l=t.data(i+"-buffer-"+o),c=t.data(i+"-buffer-"+o+"-priority");if(void 0==l?(l=t.style(i+"-"+o),c=t.style().getPropertyPriority(i+"-"+o),t.data(i+"-buffer-"+o,void 0==l?"":l),t.data(i+"-buffer-"+o+"-priority",void 0==c?"":c)):e(this).style(i+"-"+o,l,void 0==c?"":c),a)t.style(i+"-"+o,n+"px",void 0==r?"":r);else{
var u=s(t.css(i+"-"+o));t.style(i+"-"+o,Math.max(u,n)+"px",void 0==r?"":r)}}}),this},e.fn.styleBuffer.smartHide=function(t,i){if(!e.fn.styleBuffer.firedSmartHide){if(e.fn.styleBuffer.firedSmartHide=!0,e.fn.styleBuffer.firedSmartShow=!1,i)var s=e.fn.styleBufferTop,o=s.oldTopElements,n="sumome-stylebuffertop-original-margin",a="sumome-stylebuffertop-original-offset",r="sumome-stylebuffertop-original-position",l="top",c="marginTop";else{var s=e.fn.styleBufferBottom,o=s.oldBottomElements,n="sumome-stylebufferbottom-original-bottom",a="sumome-stylebufferbottom-original-offset",r="sumome-stylebufferbottom-original-position",l="bottom",c="bottom";e(".sumome-stylebufferbottom-shim").length&&e(".sumome-stylebufferbottom-shim").height("-="+t)}o&&o.length&&o.each(function(i,o){if(e(o).data(a)){if("fixed"==e(o).data(r))var n=s.totalOffset-t;else var n=t+parseFloat(e(o).data(a).top);e(o).style(l,n+"px")}else e(o).style(l,"0px")}),s.stackedElements&&s.stackedElements.length&&s.stackedElements.each(function(i,s){e(s).css(c,e(s).data(n)-t)})}},e.fn.styleBuffer.smartShow=function(t,i){if(!e.fn.styleBuffer.firedSmartShow){if(e.fn.styleBuffer.firedSmartHide=!1,e.fn.styleBuffer.firedSmartShow=!0,i)var s=e.fn.styleBufferTop,o=s.oldTopElements,n="sumome-stylebuffertop-original-margin",a="sumome-stylebuffertop-original-offset",r="top",l="marginTop";else{var s=e.fn.styleBufferBottom,o=s.oldBottomElements,n="sumome-stylebufferbottom-original-bottom",a="sumome-stylebufferbottom-original-offset",r="bottom",l="bottom";e(".sumome-stylebufferbottom-shim").length&&e(".sumome-stylebufferbottom-shim").height("+="+t)}o&&o.length&&o.each(function(i,o){e(o).data(a)?e(o).style(r,s.totalOffset+"px"):e(o).style(r,t+"px")}),s.stackedElements&&s.stackedElements.length&&s.stackedElements.each(function(t,i){e(i).css(l,e(i).data(n))})}},e.fn.styleBuffer._groups=[],e.fn.styleBuffer._throttle=80,e.fn.styleBuffer.firedSmartHide=!1,e.fn.styleBuffer.firedSmartShow=!1,e.fn.styleBufferTop._groups=[],e.fn.styleBufferTop.stackedElements=null,e.fn.styleBufferTop.oldTopElements=null,e.fn.styleBufferTop.bumpDownElements=null,e.fn.styleBufferTop.changePositionElements=null,e.fn.styleBufferTop.totalOffset=0,e.fn.styleBufferTop.checkedScrollDown=!1,e.fn.styleBufferTop.classFixedElements=!1,e.fn.styleBufferTop.classFixedElementsScroll=!1,e.fn.styleBufferTop.checkScrollDown=!1,e.fn.styleBufferTop.checkScrollUp=!0,e.fn.styleBufferBottom._groups=[],e.fn.styleBufferBottom.stackedElements=null,e.fn.styleBufferBottom.oldBottomElements=null,e.fn.styleBufferBottom.totalOffset=0;var i=-1;e.fn.styleBuffer._update=e.debounce(150,!0,function(t){if(t&&"resize"===t.type){var s=e(window).width();if(s===i)return;i=s}e.each(e.fn.styleBuffer._groups,function(){e.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)}),e.fn.styleBufferTop._groups.length&&(e("body").styleBufferTop(!0),e.each(e.fn.styleBufferTop._groups,function(){e.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)})),e.fn.styleBufferBottom._groups.length&&(e("body").styleBufferBottom(!0),e.each(e.fn.styleBufferBottom._groups,function(){e.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)})),e(window).trigger("resize.sumome-welcomemat")}),e(window).bind("load resize orientationchange",function(t){t&&"resize"==t.type&&t.target!=window||e.fn.styleBuffer._update(t)}),t.config({strictlyNew:!1}),t("#menufication-top").every(e.proxy(function(t){e("body").styleBufferTop()},this));var s=function(e){return parseFloat(e)||0}}),sumo.define("es6!services/share/index",["jquery","URI","color","vex","plugins/text!share/templates/share.html","articles","jquery.share","jquery.style","jquery.styleBuffer","jquery.displayrules"],function(e,t,i,s,o,n){function a(e,t){var t=t||1;t=Math.pow(10,t);for(var i=["k","m","b","t"],s=i.length-1;s>=0;s--){var o=Math.pow(10,3*(s+1));if(o<=e){e=Math.round(e*t/o)/t,1e3==e&&s<i.length-1&&(e=1,s++),e+=i[s];break}}return e}var r=function i(){var s=e('meta[property="og:url"]').eq(0).attr("content")||e('link[rel="canonical"]').eq(0).attr("href")||window.location.href.split("#")[0]||null;if(s){var o=t(s);return o.is("absolute")?o.toString():o.absoluteTo(window.location.href.split("#")[0]).toString()}return s};e.fn.unstatic=function(){return e(this).addClass("sumome-article"),"static"==e(this).css("position")&&e(this).css("position","relative"),"content-box"==e(this).css("box-sizing")&&e(this).css("box-sizing","border-box"),this};var l={settings:{},positionSettings:{},customPositions:{},lastScrollTop:0,lastScrollUp:0,initialize:function t(i){this.api.on("9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/service/reload",e.proxy(function(){this.load()},this)),this.loadFromServices(i)},load:function t(){this.settings={articles:e(n.findAll())},this.settings.articles.length>1&&(this.settings.articles=e([]));var i=[];this.settings.articles.each(function(){this.__url&&i.push(this.__url)}),e.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/apps/share/load",data:{site_id:this.api.properties.siteId,href:r(),urls:i,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0}).done(e.proxy(function(t){if(t&&"success"in t&&t.success){e.extend(this.settings,t);var i=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(this.settings.use_mobile_services&&i<=this.settings.mobile_width)var s=this.settings.mobile_services;else var s=this.settings.services;var o={button_padding:this.settings.button_padding,button_style:this.settings.button_style,color:this.settings.color,services:s,services_displayed:this.settings.services_displayed,shares_background:this.settings.shares_background,shares_displayed:this.settings.shares_displayed,size:this.settings.size,offset_x:0,offset_y:0,total_shares_displayed:this.settings.total_shares_displayed};"positions"in this.settings&&this.settings.positions.length&&this.settings.positions.forEach(e.proxy(function(t){switch(t in this.settings.position_settings?this.positionSettings[t]=e.extend({},o,this.settings.position_settings[t]):this.positionSettings[t]=e.extend({},o),this.positionSettings[t].size){case"small":this.positionSettings[t].sizePx=30;break;case"large":this.positionSettings[t].sizePx=70;break;default:this.positionSettings[t].sizePx=50}!this.settings.noSumoBranding&&this.positionSettings[t].services.indexOf("sumome")<0&&this.positionSettings[t].services.push("sumome")},this)),"custom_position_settings"in this.settings&&e(this.settings.custom_position_settings).length&&this.settings.custom_position_settings.forEach(e.proxy(function(t){switch(t.use_settings||e.extend(t,o),t.size){case"small":t.sizePx=30;break;case"large":t.sizePx=70;break;default:t.sizePx=50}this.customPositions[t.position_id]=t},this)),this.settings.ctry=!(!this.api.properties.geoLocation||!this.api.properties.geoLocation.ctry)&&this.api.properties.geoLocation.ctry,this.settings.views=this.api.properties.views?this.api.properties.views:1,this.settings.reflink="https://sumo.com/?src=sm-sh-"+this.api.properties.siteId+"&utm_source=sumo-powered-by&utm_medium=share&utm_campaign="+this.api.properties.siteId,e.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views)||(this.settings.positions=[]),this.install(),this.fetch()}},l))},loadFromServices:function t(i){this.settings={articles:e(n.findAll())},this.settings.articles.length>1&&(this.settings.articles=e([]));var s=[];if(this.settings.articles.each(function(){this.__url&&s.push(this.__url)}),i&&"success"in i&&i.success){e.extend(this.settings,i);var o=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(this.settings.use_mobile_services&&o<=this.settings.mobile_width)var a=this.settings.mobile_services;else var a=this.settings.services;var r={button_padding:this.settings.button_padding,button_style:this.settings.button_style,color:this.settings.color,services:a,services_displayed:this.settings.services_displayed,shares_background:this.settings.shares_background,shares_displayed:this.settings.shares_displayed,size:this.settings.size,offset_x:0,offset_y:0,total_shares_displayed:this.settings.total_shares_displayed};"positions"in this.settings&&this.settings.positions.length&&this.settings.positions.forEach(e.proxy(function(t){switch(t in this.settings.position_settings?this.positionSettings[t]=e.extend({},r,this.settings.position_settings[t]):this.positionSettings[t]=e.extend({},r),this.positionSettings[t].size){case"small":this.positionSettings[t].sizePx=30;break;case"large":this.positionSettings[t].sizePx=70;break;default:this.positionSettings[t].sizePx=50}!this.settings.noSumoBranding&&this.positionSettings[t].services.indexOf("sumome")<0&&this.positionSettings[t].services.push("sumome")},this)),"custom_position_settings"in this.settings&&e(this.settings.custom_position_settings).length&&this.settings.custom_position_settings.forEach(e.proxy(function(t){switch(t.use_settings||e.extend(t,r),t.size){case"small":t.sizePx=30;break;case"large":t.sizePx=70;break;default:t.sizePx=50}this.customPositions[t.position_id]=t},this)),this.settings.ctry=!(!this.api.properties.geoLocation||!this.api.properties.geoLocation.ctry)&&this.api.properties.geoLocation.ctry,this.settings.views=this.api.properties.views?this.api.properties.views:1,this.settings.reflink="https://sumo.com/?src=sm-sh-"+this.api.properties.siteId+"&utm_source=sumo-powered-by&utm_medium=share&utm_campaign="+this.api.properties.siteId,e.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views)||(this.settings.positions=[]),this.install(),this.fetch()}},position:function t(){var i=this;e(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").each(function(){var t=e(window).height(),s=e(this).outerHeight(),o=Math.max(Math.floor(t-s)/2,0),n=e(this).hasClass("sumome-share-client-wrapper-left-page")?"lp":"rp";n in i.settings.position_settings&&("offset_x"in i.settings.position_settings[n]&&0!=i.settings.position_settings[n].offset_x&&("lp"==n?e(this).css("left",i.settings.position_settings[n].offset_x+"px"):e(this).css("right",0-i.settings.position_settings[n].offset_x+"px")),"offset_y"in i.settings.position_settings[n]&&0!=i.settings.position_settings[n].offset_y&&(o+=i.settings.position_settings[n].offset_y)),e(this).css("top",o+"px")}),e(".sumome-share-client-desktop-bottom-bar, .sumome-share-client-mobile-top-bar, .sumome-share-client-mobile-bottom-bar").each(function(){var t=e(this).data("sumome-share-pos"),s=i.positionSettings[t].sizePx,o=e(this).children();o.show();for(var n=document.documentElement.clientWidth||document.body.clientWidth||e(window).width(),a=Math.max(s,n/o.length),r=Math.floor(n/a),l=o.length-r,c=0,u=0;c<l&&u<o.length;){"sumome"!=o.eq(o.length-1-u).data("sumome-share")&&(o.eq(o.length-1-u).hide(),c++),u++}var m=o.length-c,h=!1,d=0,t=e(this).data("sumome-share-pos");t in i.settings.position_settings&&"button_padding"in i.settings.position_settings[t]?("button_style"in i.settings.position_settings[t]&&"circle"==i.settings.position_settings[t].button_style&&(h=!0),d=i.settings.position_settings[t].button_padding):"button_padding"in i.settings&&("button_style"in i.settings&&"circle"==i.settings.button_style&&(h=!0),d=i.settings.button_padding),h?(a=s,o.css({marginRight:(n-a*m)/(m-1)+"px"})):(d&&(n-=(m-1)*d),a=n/m),o.css({width:a+"px"}),o.eq(m-1).css("marginRight",0)}),e.each(e(".sumome-share-client-custom"),e.proxy(function t(i,s){var o=e(s),n=null,a=!1,r=0,l=this.positionSettings[e(s).data("sumome-share-pos")];if(o.hasClass("sumome-share-client-horizontal")&&l.button_padding>0){var c=o.children();if(e.each(c,e.proxy(function t(i,s){n!==e(s).offset().top&&(r=i,a||(a=!0)),n=e(s).offset().top},this)),a){e(c).css("verticalAlign","top");for(var u=0;u<r;u++)e(c[u]).css("marginBottom",l.button_padding)}}},this))},updateTotals:function t(i){this.settings.share+=i;var s=this.settings.share,o=e(".sumome-share-client-share[data-sumome-share=share]");s>=this.settings.shares_minimum?o.html("<span><strong>"+a(s)+"</strong><br>"+this.settings.shares_label+"</span>"):o.html("<span>"+this.settings.shares_label+"</span>");var n=e(".sumome-share-client-open-mobile");n.find("span").remove(),s>=this.settings.shares_minimum&&n.append("<span>"+a(s)+"</span>"),s>=this.settings.shares_minimum?e("[data-sumome-share-count=share]").text(a(s)):e("[data-sumome-share-count=share]").text(""),this.alignShareLabels()},fetch:function t(i){var s=this,i=i||null,o=null!==i;if(null===i){i=[];for(var n in e.shareServices)"background"in e.shareServices[n]&&"name"in e.shareServices[n]&&"fetch"in e.shareServices[n]&&i.push(n)}i.forEach(function(t){if(t in e.shareServices){var i="yummly"===t;if((o||!(t in s.settings)&&(!i||i&&s.settings.fetch_yummly)||s.settings.fetch.indexOf(t)>=0)&&"fetch"in e.shareServices[t]&&"parse"in e.shareServices[t])if(["facebook","facebooklike"].indexOf(t)>-1&&s.settings.has_facebook_token)try{e.ajax({type:"POST",dataType:"json",xhrFields:{withCredentials:!1},crossDomain:!0,url:s.api.properties.sumoUrl+"/apps/share/facebook/queue",data:{site_id:s.api.properties.siteId,url:r()},success:e.proxy(function(e){var i=this.updateCount(t,this.settings[t]+1);this.updateTotals(i)},s)})}catch(e){}else e.shareFetch(t,r(),e.proxy(function(i,s,o){if(!i){var n=this.updateCount(t,o);this.updateTotals(n);try{e.ajax({type:"POST",dataType:"json",xhrFields:{withCredentials:!1},crossDomain:!0,url:this.api.properties.sumoUrl+"/api/jsonpcallback",data:{site_id:this.api.properties.siteId,href:s,service:t,count:o},success:function e(t){}})}catch(e){}}},s))}})},updateCount:function t(i,s){var o=(s||0)-(this.settings[i]||0);return this.settings[i]=s,e(".sumome-share-client-share[data-sumome-share="+i+"]").each(e.proxy(function(t,i){this.positionSettings[e(i).parent().data("sumome-share-pos")].shares_displayed&&s>=0&&s>=this.settings.shares_minimum?(e(i).addClass("sumome-share-client-count"),e(i).find("span").remove(),e(i).append("<span>"+a(s)+"</span>")):(e(i).find("span").remove(),e(i).removeClass("sumome-share-client-count"))},this)),s>=0&&s>=this.settings.shares_minimum?e("[data-sumome-share-count="+i+"]").text(a(s)):e("[data-sumome-share-count="+i+"]").text(""),o},install:function t(){e(window).on("resize.sumome-share",e.debounce(300,function(e){l.render()})),this.render(),setInterval(e.proxy(function(){this.bindCustomShares()},this),500)},remove:function t(){e(".sumome-share-client-wrapper, .sumome-share-client-open-mobile").remove()},popupMobile:function t(i,s){e(".sumome-share-client-close-mobile").trigger("click");var o=e('<div class="sumome-share-mobile-popup" />').appendTo(document.body),n=e('<div class="sumome-share-mobile-close-popup"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/close-white-60.png" alt="Close Share"></div>'),a=e("<ul />").appendTo(o);a.data("sumome-share-target-url",i),a.data("sumome-share-target-text",s),n.appendTo(o),n.click(function(){e(document.body).removeClass("sumome-share-mobile-popup-open"),o.remove()}),e(document.body).addClass("sumome-share-mobile-popup-open"),this.renderPopupServices(a,!1)},popup:function t(i,o){this.$modal=s.open({content:"<h5>Share</h5><ul />",className:"sumome-sharer-popup sumome-sharer-popup-small",overlayClassName:"sumome-sharer-popup-overlay",contentClassName:"sumome-sharer-popup-content",closeClassName:"sumome-sharer-popup-close",overlayClosesOnClick:!0}),this.$modal.find("ul").data("sumome-share-target-url",i),this.$modal.find("ul").data("sumome-share-target-text",o),this.$modal.on("vexResize",e.proxy(function(t,i){var s=Math.max((e(window).height()-i.$vexContent.outerHeight())/2,0);i.$vex.css({"padding-top":s+"px"})},this)),this.$modal.on("vexOpen",e.proxy(function(t,i){this.renderPopupServices(this.$modal.find("ul"),!0),this.$modal.resize(),this.settings.noSumoBranding||e(".sumome-sharer-popup-overlay").append('<a class="sumome-sharer-popup-link" href="'+this.settings.reflink+'" target="_blank">Powered by Sumo</a>')},this))},renderPopupServices:function s(o,n){var a=e('<input type="text" />').attr("placeholder","Find a service");a.insertBefore(o),this.settings.noSumoBranding||o.after('<a class="sumome-sharer-popup-link" href="'+this.settings.reflink+'" target="_blank">Powered by Sumo</a>'),e.shareSortedKeys.map(e.proxy(function(t){var s=e.shareServices[t];if("background"in s&&"name"in s&&"sumome"!=t){var n=e('<li data-service="'+t+'"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+t+"-"+(this.settings.color?i.whiteOrBlack(this.settings.color):"white")+'-60.png" alt="'+s.name+'">'+s.name+"</li>").data("sumome-share",t);o.append(n),n.find("img").css("background",this.settings.color?this.settings.color:"background"in s?s.background:"#ccc")}},this)),o.on("click","li",e.proxy(function(i){var s=e(i.currentTarget).data("service"),o=e(i.delegateTarget).data("sumome-share-target-url")||r(),n=e(i.delegateTarget).data("sumome-share-target-text");if("share"!=s){this.api.emit("event",{appId:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",event:s+"-click",href:o}),"twitter"===s&&(e('meta[name="twitter:title"]').length&&void 0===e(i.currentTarget).data("sumome-share-text")&&(n=e('meta[name="twitter:title"]').eq(0).attr("content")),e('meta[name="twitter:url"]').length&&void 0===e(i.currentTarget).data("sumome-share-url")&&(o=e('meta[name="twitter:url"]').eq(0).attr("content")));var a={url:o,text:n,siteId:this.api.properties.siteId,sumoUrl:this.api.properties.sumoUrl,shortenUrl:this.settings.use_shortener,shortener:this.settings.shortener+this.settings.short_domain,noSumoBranding:this.settings.noSumoBranding};if("services_settings"in this.settings&&this.settings.services_settings&&s in this.settings.services_settings&&e.extend(a,this.settings.services_settings[s]),this.settings.noSumoBranding&&"url"in a&&a.url&&"utm"in this.settings&&this.settings.utm){var l=t(a.url);"utm_source"in this.settings&&this.settings.utm_source&&(l.removeQuery("utm_source"),l.addQuery("utm_source",this.settings.utm_source.replace("{service}",s))),"utm_medium"in this.settings&&this.settings.utm_medium&&(l.removeQuery("utm_medium"),l.addQuery("utm_medium",this.settings.utm_medium.replace("{service}",s))),"utm_name"in this.settings&&this.settings.utm_name&&(l.removeQuery("utm_campaign"),l.addQuery("utm_campaign",this.settings.utm_name.replace("{service}",s))),"utm_custom_key"in this.settings&&this.settings.utm_custom_key&&"utm_custom_val"in this.settings&&this.settings.utm_custom_val&&(l.removeQuery(this.settings.utm_custom_key),l.addQuery(this.settings.utm_custom_key.replace("{service}",s),this.settings.utm_custom_val.replace("{service}",s))),a.url=l.toString()}e.share(s,a,e.proxy(function(e){this.fetch([e])},this))}["fancy","kaboodle","printerfriendly","slashdot"].indexOf(s)>-1&&e(".sumome-vex-close",this.$modal).trigger("click")},this)),a.on("keyup",function(){var t=(e(this).val()+"").trim().toLowerCase(),i=e(this).next("ul");for(var s in e.shareServices){var o=e.shareServices[s];if("background"in o&&"name"in o){var n=o.name.toLowerCase(),a=""==t||n.indexOf(t)>=0;i.find('li[data-service="'+s+'"]').toggle(a)}}}),n&&a.focus()},render:function t(){var s=this.settings.articles,o=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),n=o<=this.settings.mobile_width?"mobile":"desktop";if("current_mode"in this.settings&&n==this.settings.current_mode)return void this.position();if(this.remove(),0!=this.positionSettings.length){this.settings.current_mode=n;var r=50;if("large"==this.settings.size?r=70:"small"==this.settings.size&&(r=30),"mobile"==n){if("positions"in this.settings&&this.settings.positions.indexOf("mbt")>=0&&(e("body").append('<div data-sumome-stylebuffer-top="90" data-sumome-stylebuffertop-offsety="'+this.positionSettings.mbt.offset_y+'" class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile-top-bar'+(this.positionSettings.mbt.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbt.size+'"><div data-sumome-share-pos="mbt" class="sumome-share-client sumome-share-client-mobile-top-bar'+(this.positionSettings.mbt.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbt.size+'"></div></div>'),e("body").styleBufferTop()),"positions"in this.settings&&this.settings.positions.indexOf("mbb")>=0&&(e("body").append('<div data-sumome-stylebuffer-bottom="90" data-sumome-stylebufferbottom-offsety="'+(0-this.positionSettings.mbb.offset_y)+'" class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile-bottom-bar'+(this.positionSettings.mbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbb.size+'"><div data-sumome-share-pos="mbb" class="sumome-share-client sumome-share-client-mobile-bottom-bar'+(this.positionSettings.mbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbb.size+'"></div></div>'),e("body").styleBufferBottom(),this.settings.scroll_view&&(this.$mobileBottomBar=e(".sumome-share-client-wrapper-mobile-bottom-bar"),this.$mobileBottomBar.css("bottom",-1*this.$mobileBottomBar.height()),this.$mobileBottomBar.addClass("sumome-share-client-wrapper-mobile-bottom-bar-scroll"),this.$mobileBottomBar.addClass("sumome-share-client-wrapper-mobile-bottom-bar-hidden"),this.lastScrollTop=e(window).scrollTop(),e(window).on("scroll",e.debounce(1,function(){l.scroll()})))),"positions"in this.settings&&this.settings.positions.indexOf("mbl")>=0){var c=e('<div class="sumome-share-client-open-mobile sumome-share-client-open-mobile-left'+(this.positionSettings.mbl.total_shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/share-black-60.png" alt="Open Share"></div>'),u=e('<div class="sumome-share-client-close-mobile sumome-share-client-close-mobile-left'+(this.positionSettings.mbl.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/close-white-60.png" alt="Close Share"></div>'),m=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile sumome-share-client-wrapper-mobile-left'+(this.positionSettings.mbl.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"></div>'),h=e('<div class="sumome-share-client-mobile sumome-share-client-mobile-left'+(this.settings.list_view?" sumome-share-client-mobile-list":"")+(this.positionSettings.mbl.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"></div>');if(e("body").append(c),m.append(h),h.append(u),e("body").append(m),this.positionSettings.mbl.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum&&c.append("<span>"+("share"in this.settings?a(this.settings.share):"0")+"</span>"),this.positionSettings.mbl.total_shares_displayed&&(this.settings.shares_label||this.settings.shares_minimum<=0||!("share"in this.settings)||parseInt(this.settings.share)>=this.settings.shares_minimum)){var d=e('<div class="sumome-share-client-animated sumome-share-client-share sumome-share-client-share-share sumome-share-client-count" data-sumome-share="share"></div>');this.positionSettings.mbl.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum?d.append("<span><strong>"+("share"in this.settings?a(this.settings.share):"0")+"</strong><br>"+this.settings.shares_label+"</span>"):d.append("<span>"+this.settings.shares_label+"</span>"),d.css("background","transparent"),d.css("color","#fff");var p=e('<div class="sumome-row"></div>'),f=e('<div class="sumome-12 sumome-columns sumome-text-center"></div>');f.append(d),p.append(f),h.append(p)}var g=e('<div class="sumome-row sumome-share-services"></div>');h.append(g);var v=0;this.positionSettings.mbl.services.forEach(e.proxy(function(t){if(v<this.positionSettings.mbl.services_displayed||"sumome"===t){var s=e('<div class="sumome-share-client-animated sumome-share-client-share"'+(this.settings.list_view?"":' data-sumome-share="'+t+'"')+'"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+(this.settings.noSumoBranding&&"sumome"===t?"sumomepro":t)+"-"+(this.positionSettings.mbl.color?i.whiteOrBlack(this.positionSettings.mbl.color):"white")+'-60.png" alt="'+("sumome"===t?"More":e.shareServices[t].name)+'"></div>');this.positionSettings.mbl.shares_displayed&&t in this.settings&&parseInt(this.settings[t])>=this.settings.shares_minimum&&(s.addClass("sumome-share-client-count"),s.append("<span>"+(t in this.settings?a(this.settings[t]):"0")+"</span>")),s.css("background",this.positionSettings.mbl.color?this.positionSettings.mbl.color:"background"in e.shareServices[t]?e.shareServices[t].background:"#ccc"),s.css("color",this.positionSettings.mbl.color?i.whiteOrBlack(this.positionSettings.mbl.color):"color"in e.shareServices[t]?e.shareServices[t].color:"#fff");var o=e('<div class="sumome-4 sumome-columns'+(this.settings.list_view?'" data-sumome-share="'+t+'"':' sumome-text-center"')+"></div>");if(o.append(s),this.settings.list_view){var n="name"in e.shareServices[t]?e.shareServices[t].name:t;"SumoMe"==n&&(n="More"),o.append(n)}g.append(o),"sumome"!=t&&v++}},this)),g.find(".sumome-columns").last().addClass("sumome-end"),e(".sumome-share-client-open-mobile-left").on("click",e.proxy(function(t){e(".sumome-share-client-open-mobile-left").hide(),e(".sumome-share-client-wrapper-mobile-left").show(),e(document.body).addClass("sumome-share-mobile-popup-open")},this)),e(".sumome-share-client-close-mobile-left").on("click",e.proxy(function(t){e(".sumome-share-client-wrapper-mobile-left").hide(),e(".sumome-share-client-open-mobile-left").show(),e(document.body).removeClass("sumome-share-mobile-popup-open")},this))}if("positions"in this.settings&&this.settings.positions.indexOf("mbr")>=0){var c=e('<div class="sumome-share-client-open-mobile sumome-share-client-open-mobile-right'+(this.positionSettings.mbr.total_shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/share-black-60.png" alt="Open Share"></div>'),u=e('<div class="sumome-share-client-close-mobile sumome-share-client-close-mobile-right'+(this.positionSettings.mbr.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/close-white-60.png" alt="Close Share"></div>'),m=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile sumome-share-client-wrapper-mobile-right'+(this.positionSettings.mbr.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"></div>'),h=e('<div class="sumome-share-client-mobile sumome-share-client-mobile-right'+(this.positionSettings.mbr.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"></div>');if(e("body").append(c),m.append(h),h.append(u),e("body").append(m),this.positionSettings.mbr.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum&&c.append("<span>"+("share"in this.settings?a(this.settings.share):"0")+"</span>"),this.positionSettings.mbr.total_shares_displayed&&(this.settings.shares_label||this.settings.shares_minimum<=0||!("share"in this.settings)||parseInt(this.settings.share)>=this.settings.shares_minimum)){var d=e('<div class="sumome-share-client-animated sumome-share-client-share sumome-share-client-share-share sumome-share-client-count" data-sumome-share="share"></div>');this.positionSettings.mbr.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum?d.append("<span><strong>"+("share"in this.settings?a(this.settings.share):"0")+"</strong><br>"+this.settings.shares_label+"</span>"):d.append("<span>"+this.settings.shares_label+"</span>"),d.css("background","transparent"),d.css("color","#fff");var p=e('<div class="sumome-row"></div>'),f=e('<div class="sumome-12 sumome-columns sumome-text-center"></div>');f.append(d),p.append(f),h.append(p)}var g=e('<div class="sumome-row"></div>');h.append(g);var v=0;this.positionSettings.mbr.services.forEach(e.proxy(function(t){if(v<this.positionSettings.mbr.services_displayed||"sumome"===t){var s=e('<div class="sumome-share-client-animated sumome-share-client-share" data-sumome-share="'+t+'"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+(this.settings.noSumoBranding&&"sumome"===t?"sumomepro":t)+"-"+(this.positionSettings.mbr.color?i.whiteOrBlack(this.positionSettings.mbr.color):"white")+'-60.png" alt="'+(this.settings.noSumoBranding&&"sumome"===t?"More":e.shareServices[t].name)+'"></div>');this.positionSettings.mbr.shares_displayed&&t in this.settings&&parseInt(this.settings[t])>=this.settings.shares_minimum&&(s.addClass("sumome-share-client-count"),s.append("<span>"+(t in this.settings?a(this.settings[t]):"0")+"</span>")),s.css("background",this.positionSettings.mbr.color?this.positionSettings.mbr.color:"background"in e.shareServices[t]?e.shareServices[t].background:"#ccc"),s.css("color",this.positionSettings.mbr.color?i.whiteOrBlack(this.positionSettings.mbr.color):"color"in e.shareServices[t]?e.shareServices[t].color:"#fff");var o=e('<div class="sumome-4 sumome-columns sumome-text-center"></div>');o.append(s),g.append(o),"sumome"!=t&&v++}},this)),g.find(".sumome-columns").last().addClass("sumome-end"),e(".sumome-share-client-open-mobile-right").on("click",e.proxy(function(t){e(".sumome-share-client-open-mobile-right").hide(),e(".sumome-share-client-wrapper-mobile-right").show(),e(document.body).addClass("sumome-share-mobile-popup-open")},this)),e(".sumome-share-client-close-mobile-right").on("click",e.proxy(function(t){e(".sumome-share-client-wrapper-mobile-right").hide(),e(".sumome-share-client-open-mobile-right").show(),e(document.body).removeClass("sumome-share-mobile-popup-open")},this))}}else{if(e.fn.styleBuffer._update(),"positions"in this.settings&&this.settings.positions.indexOf("la"),"positions"in this.settings&&this.settings.positions.indexOf("ra"),"positions"in this.settings&&this.settings.positions.indexOf("ra")>=0){s.unstatic(),s.styleBuffer("padding","right",20+this.positionSettings.ra.sizePx);var b=this;s.each(function(){
var t=parseInt(e(this).css("padding-right").replace("px",""))-(r+10),i=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right-sidebar'+(b.positionSettings.ra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.ra.size+'"></div>'),s=e('<div data-sumome-share-pos="ra" class="sumome-share-client sumome-share-client-right-sidebar-article'+(b.positionSettings.ra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.ra.size+'"></div>');if(i.append(s),this._header){var o=this._header.position().top,n=this._header.outerHeight();i.css("top",o+n+"px")}i.css("right",t+"px"),e(this).prepend(i)})}if("positions"in this.settings&&this.settings.positions.indexOf("la")>=0){s.unstatic(),s.styleBuffer("padding","left",2+this.positionSettings.la.sizePx);var b=this;s.each(function(){var t=parseInt(e(this).css("padding-left").replace("px",""))-(10+r),i=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left-sidebar'+(b.positionSettings.la.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.la.size+'"></div>'),s=e('<div data-sumome-share-pos="la" class="sumome-share-client sumome-share-client-left-sidebar-article'+(b.positionSettings.la.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.la.size+'"></div>');if(i.append(s),this._header){var o=this._header.position().top,n=this._header.outerHeight();i.css("top",o+n+"px")}i.css("left",t+"px"),e(this).prepend(i)})}if("positions"in this.settings&&this.settings.positions.indexOf("hra")>=0){s.unstatic();var b=this;s.each(function(){var t=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right'+(b.positionSettings.hra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.hra.size+'"></div>'),i=e('<div data-sumome-share-pos="hra" class="sumome-share-client sumome-share-client-header-right-article'+(b.positionSettings.hra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.hra.size+'"></div>');t.append(i),this._header?this._header.after(t):e(this).prepend(t)})}if("positions"in this.settings&&this.settings.positions.indexOf("hca")>=0){s.unstatic();var b=this;s.each(function(){var t=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-center'+(b.positionSettings.hca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.hca.size+'"></div>'),i=e('<div data-sumome-share-pos="hca" class="sumome-share-client sumome-share-client-header-center-article'+(b.positionSettings.hca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.hca.size+'"></div>');t.append(i),this._header?this._header.after(t):e(this).prepend(t)})}if("positions"in this.settings&&this.settings.positions.indexOf("hla")>=0){s.unstatic();var b=this;s.each(function(){var t=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left'+(b.positionSettings.hla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.hla.size+'"></div>'),i=e('<div data-sumome-share-pos="hla" class="sumome-share-client sumome-share-client-header-left-article'+(b.positionSettings.hla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.hla.size+'"></div>');t.append(i),this._header?this._header.after(t):e(this).prepend(t)})}if("positions"in this.settings&&this.settings.positions.indexOf("tra")>=0){s.unstatic();var b=this;s.each(function(){var t=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right'+(b.positionSettings.tra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.tra.size+'"></div>'),i=e('<div data-sumome-share-pos="tra" class="sumome-share-client sumome-share-client-top-right-article'+(b.positionSettings.tra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.tra.size+'"></div>');t.append(i),e(this).prepend(t)})}if("positions"in this.settings&&this.settings.positions.indexOf("tca")>=0){s.unstatic();var b=this;s.each(function(){var t=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-center'+(b.positionSettings.tca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.tca.size+'"></div>'),i=e('<div data-sumome-share-pos="tca" class="sumome-share-client sumome-share-client-top-center-article'+(b.positionSettings.tca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.tca.size+'"></div>');t.append(i),e(this).prepend(t)})}if("positions"in this.settings&&this.settings.positions.indexOf("tla")>=0){s.unstatic();var b=this;s.each(function(){var t=e('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left'+(b.positionSettings.tla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.tla.size+'"></div>'),i=e('<div data-sumome-share-pos="tla" class="sumome-share-client sumome-share-client-top-left-article'+(b.positionSettings.tla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+b.settings.theme+" sumome-share-client-"+b.positionSettings.tla.size+'"></div>');t.append(i),e(this).prepend(t)})}if("positions"in this.settings&&this.settings.positions.indexOf("bra")>=0&&s.unstatic().append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right'+(this.positionSettings.bra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bra.size+'"><div data-sumome-share-pos="bra" class="sumome-share-client sumome-share-client-bottom-right-article'+(this.positionSettings.bra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bra.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("bca")>=0&&s.unstatic().append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-center'+(this.positionSettings.bca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bca.size+'"><div data-sumome-share-pos="bca" class="sumome-share-client sumome-share-client-bottom-center-article'+(this.positionSettings.bca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bca.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("bla")>=0&&s.unstatic().append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left'+(this.positionSettings.bla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bla.size+'"><div data-sumome-share-pos="bla" class="sumome-share-client sumome-share-client-bottom-left-article'+(this.positionSettings.bla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bla.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("lp")>=0&&e("body").append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left-page'+(this.positionSettings.lp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.lp.size+'"><div data-sumome-share-pos="lp" class="sumome-share-client sumome-share-client-left-page'+(this.positionSettings.lp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.lp.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("rp")>=0&&e("body").append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right-page'+(this.positionSettings.rp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.rp.size+'"><div data-sumome-share-pos="rp" class="sumome-share-client sumome-share-client-right-page'+(this.positionSettings.rp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.rp.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("dbb")>=0&&(e("body").append('<div data-sumome-stylebuffer-bottom="90" data-sumome-stylebufferbottom-offsety="'+(0-this.positionSettings.dbb.offset_y)+'" class="sumome-share-client-wrapper sumome-share-client-wrapper-desktop-bottom-bar'+(this.positionSettings.dbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.dbb.size+'"><div data-sumome-share-pos="dbb" class="sumome-share-client sumome-share-client-desktop-bottom-bar'+(this.positionSettings.dbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.dbb.size+'"></div></div>'),e("body").styleBufferBottom()),"positions"in this.settings&&(this.settings.positions.indexOf("lp")>=0||this.settings.positions.indexOf("rp")>=0)){var y=e('<div class="sumome-share-client-show"><span /></div>');e(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").prepend(y);var w=e('<div class="sumome-share-client-hide"><span /></div>');e(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").append(w),e(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").hover(function(){e(this).hasClass("sumome-share-client-hidden")||e(this).find(".sumome-share-client-hide").fadeIn("fast")},function(){e(this).find(".sumome-share-client-hide").fadeOut("fast")}),e(".sumome-share-client-hide").click(function(){var t=e(this).closest(".sumome-share-client-wrapper"),i=t.hasClass("sumome-share-client-wrapper-left-page");t.data("sumome-share-original-position",t.css(i?"left":"right")),t.animate(i?{left:"-"+r+"px"}:{right:"-"+r+"px"},"fast",function(){e(this).addClass("sumome-share-client-hidden"),e(this).find(".sumome-share-client-hide").hide(),e(this).animate(i?{left:"0px"}:{right:"0px"},"fast")})}),e(".sumome-share-client-show").click(function(){var t=e(this).closest(".sumome-share-client-wrapper"),i=t.hasClass("sumome-share-client-wrapper-left-page"),s=t.data("sumome-share-original-position");t.animate(i?{left:"-"+r+"px"}:{right:"-"+r+"px"},"fast",function(){e(this).removeClass("sumome-share-client-hidden"),e(this).find(".sumome-share-client-hide").show(),e(this).animate(i?{left:s}:{right:s},"fast")})})}}this.addButtons(e(".sumome-share-client"),n),this.applyPositionSettings(),this.position(),this.alignShareLabels(),this.updateCustomCounts(),e(".sumome-share-client-share",e(".sumome-share-client-mobile-right,.sumome-share-client-mobile-left")).on("click",e.proxy(function(e){this.click(e)},this)),this.api.emit("9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/service/rendered")}},addButtons:function t(s,o){s.each(e.proxy(function(t,s){var n=this.positionSettings[e(s).data("sumome-share-pos")],r="share"in this.settings?a(this.settings.share):"0";if(n.total_shares_displayed&&(this.settings.shares_label||this.settings.shares_minimum<=0||!("share"in this.settings)||parseInt(this.settings.share)>=this.settings.shares_minimum)){var l=e('<div class="sumome-share-client-animated sumome-share-client-share sumome-share-client-share-share sumome-share-client-count" data-sumome-share="share"></div>');n.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum?l.append("<span><strong>"+r+"</strong><br>"+this.settings.shares_label+"</span>"):l.append("<span>"+this.settings.shares_label+"</span>"),"mobile"===o?(l.css("background",n.color?n.color:"transparent"),l.css("color",n.color?i.whiteOrBlack(n.color):"black")):(l.css("background","transparent"),l.css("color","#000")),e(s).append(l)}var c=0,u="";e(s).data("sumome-share-url")&&(u+=' data-sumome-share-url="'+e(s).data("sumome-share-url")+'"'),e(s).data("sumome-share-text")&&(u+=' data-sumome-share-text="'+e(s).data("sumome-share-text")+'"'),n.services.forEach(e.proxy(function(t){if((c<n.services_displayed||"sumome"===t)&&"share"!=t){var o=e("<a"+u+' title="'+(this.settings.noSumoBranding&&"sumome"==t?"More":e.shareServices[t].name)+'" class="sumome-share-client-animated sumome-share-client-share" data-sumome-share="'+t+'" href="javascript:void(0);"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+(this.settings.noSumoBranding&&"sumome"==t?"sumomepro":t)+"-"+(n.color?i.whiteOrBlack(n.color):"white")+'-60.png" alt="'+(this.settings.noSumoBranding&&"sumome"===t?"More":e.shareServices[t].name)+'"></a>');n.shares_displayed&&t in this.settings&&parseInt(this.settings[t])>=this.settings.shares_minimum&&(o.addClass("sumome-share-client-count"),o.append("<span>"+(t in this.settings?a(this.settings[t]):"0")+"</span>")),o.css("background",n.color?n.color:"background"in e.shareServices[t]?e.shareServices[t].background:"#ccc"),o.css("color",n.color?i.whiteOrBlack(n.color):"color"in e.shareServices[t]?e.shareServices[t].color:"#fff"),e(s).append(o),"sumome"!=t&&c++}},this)),e(".sumome-share-client-share",e('[data-sumome-share-pos="'+e(s).data("sumome-share-pos")+'"]')).hover(e.proxy(function(){var t=e(this).data("sumome-share");if(t&&t in e.shareServices){var s=i.shadeColor(n.color?n.color:"background"in e.shareServices[t]?e.shareServices[t].background:"#ccc",-10);e(this).css("background",s)}}),e.proxy(function(){var t=e(this).data("sumome-share");t&&t in e.shareServices&&e(this).css("background",n.color?n.color:"background"in e.shareServices[t]?e.shareServices[t].background:"#ccc")})),e(".sumome-share-client-share",s).on("click",e.proxy(function(e){this.click(e)},this))},this))},bindCustomShares:function t(){var i=e("[data-sumome-share]:not(.sumome-share-client-share, [data-sumome-custom])");i.on("click",e.proxy(function(e){this.click(e)},this)).attr("data-sumome-custom",!0),i.length>0&&this.updateCustomCounts();var s=e("[data-sumome-share-id]:empty");if(s.length>0){var o=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),n=o<=this.settings.mobile_width?"mobile":"desktop";e.each(s,e.proxy(function(t,i){var s=e(i).data("sumome-share-id");if(s in this.customPositions){var o=this.customPositions[s];if("mobile"!=n||o.show_mobile){var a=e(i),r="";a.data("sumome-share-url")&&(r+=' data-sumome-share-url="'+a.data("sumome-share-url")+'"'),a.data("sumome-share-text")&&(r+=' data-sumome-share-text="'+a.data("sumome-share-text")+'"'),a.html('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-custom'+(o.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+(o.float?" sumome-share-client-float-"+o.float:"")+" sumome-share-client-"+o.size+'"><div data-sumome-share-pos="'+o.position_id+'" class="sumome-share-client sumome-share-client-custom'+(o.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+o.size+" sumome-share-client-"+o.orientation+'"'+r+"></div></div>"),this.positionSettings[o.position_id]=o}}},this)),this.addButtons(e(".sumome-share-client",s),n),this.applyPositionSettings(),this.position(),this.alignShareLabels(),this.updateCustomCounts()}},updateCustomCounts:function t(){e("[data-sumome-share-count]").each(e.proxy(function(t,i){var s=e(i).data("sumome-share-count");s in this.settings&&parseInt(this.settings[s])>=this.settings.shares_minimum?e(i).text(s in this.settings?a(this.settings[s]):"0"):e(i).text("")},this))},click:function i(s){var o=e(s.currentTarget).data("sumome-share"),n=e(s.currentTarget).data("sumome-share-url")||e(s.currentTarget).closest(".sumome-share-client").data("sumome-share-target-url")||r(),a=e(s.currentTarget).data("sumome-share-text")||e(s.currentTarget).closest(".sumome-share-client").data("sumome-share-target-text");if("sumome"==o)this.api.emit("event",{appId:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",event:o+"-click",href:n}),"mobile"===this.settings.current_mode?this.popupMobile(n,a):this.popup(n,a);else if("share"!=o){this.api.emit("event",{appId:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",event:o+"-click",href:n}),"twitter"===o&&(e('meta[name="twitter:title"]').length&&void 0===e(s.currentTarget).data("sumome-share-text")&&(a=e('meta[name="twitter:title"]').eq(0).attr("content")),e('meta[name="twitter:url"]').length&&void 0===e(s.currentTarget).data("sumome-share-url")&&(n=e('meta[name="twitter:url"]').eq(0).attr("content")));var l={url:n,text:a,siteId:this.api.properties.siteId,sumoUrl:this.api.properties.sumoUrl,shortenUrl:this.settings.use_shortener,shortener:this.settings.shortener+this.settings.short_domain,noSumoBranding:this.settings.noSumoBranding};if("services_settings"in this.settings&&this.settings.services_settings&&o in this.settings.services_settings&&e.extend(l,this.settings.services_settings[o]),this.settings.noSumoBranding&&"url"in l&&l.url&&"utm"in this.settings&&this.settings.utm){var c=t(l.url);"utm_source"in this.settings&&this.settings.utm_source&&(c.removeQuery("utm_source"),c.addQuery("utm_source",this.settings.utm_source.replace("{service}",o))),"utm_medium"in this.settings&&this.settings.utm_medium&&(c.removeQuery("utm_medium"),c.addQuery("utm_medium",this.settings.utm_medium.replace("{service}",o))),"utm_name"in this.settings&&this.settings.utm_name&&(c.removeQuery("utm_campaign"),c.addQuery("utm_campaign",this.settings.utm_name.replace("{service}",o))),"utm_custom_key"in this.settings&&this.settings.utm_custom_key&&"utm_custom_val"in this.settings&&this.settings.utm_custom_val&&(c.removeQuery(this.settings.utm_custom_key),c.addQuery(this.settings.utm_custom_key,this.settings.utm_custom_val.replace("{service}",o))),l.url=c.toString()}e.share(o,l,e.proxy(function(e){this.fetch([e])},this))}},applyPositionSettings:function t(){var s=this.settings;if("object"==typeof s&&(Array.isArray(s.positions)&&0!==s.positions.length||"object"==typeof this.customPositions)&&"object"==typeof s.position_settings){var o={lp:{suffix:"left-page",layout:"vertical"},rp:{suffix:"right-page",layout:"vertical"},la:{suffix:"left-sidebar-article",layout:"vertical"},ra:{suffix:"right-sidebar-article",layout:"vertical"},hla:{suffix:"header-left-article",layout:"horizontal"},hca:{suffix:"header-center-article",layout:"horizontal"},hra:{suffix:"header-right-article",layout:"horizontal"},tla:{suffix:"top-left-article",layout:"horizontal"},tca:{suffix:"top-center-article",layout:"horizontal"},tra:{suffix:"top-right-article",layout:"horizontal"},bla:{suffix:"bottom-left-article",layout:"horizontal"},bca:{suffix:"bottom-center-article",layout:"horizontal"},bra:{suffix:"bottom-right-article",layout:"horizontal"},dbb:{suffix:"wrapper-desktop-bottom-bar",layout:"horizontal"},mbt:{suffix:"wrapper-mobile-top-bar",layout:"horizontal"},mbb:{suffix:"wrapper-mobile-bottom-bar",layout:"horizontal"},mbl:{suffix:"open-mobile-left",layout:"horizontal"},mbr:{suffix:"open-mobile-right",layout:"horizontal"}};e(this.customPositions).length&&e.each(this.customPositions,e.proxy(function e(t,i){s.positions.push(i.position_id),o[i.position_id]={suffix:!1,layout:i.orientation}},this)),s.positions.forEach(e.proxy(function t(s){if(o.hasOwnProperty(s)){var n=this.positionSettings[s],a=o[s],r;if(a.suffix)r=e(".sumome-share-client-"+a.suffix);else{if(void 0===n)return;r=e('[data-sumome-share-id="'+n.position_id+'"]')}if(r.removeClass("sumome-share-client-circle").removeClass("sumome-share-client-rounded"),n.button_style&&"square"!==n.button_style&&r.addClass("sumome-share-client-"+n.button_style),n.button_padding&&n.button_padding>0&&e(".sumome-share-client-share",r).css("margin"+("vertical"==a.layout?"Bottom":"Right"),n.button_padding+"px"),n.shares_background)if(["mbl","mbr"].indexOf(s)>-1){var l=i.whiteOrBlack(n.shares_background);r.css({backgroundColor:i.hexToRGBA(n.shares_background,.8)}).find("span").css({color:l}),"white"===l&&r.find("img").attr("src",this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/share-white-60.png")}else{if(n.shares_background)var c={backgroundColor:n.shares_background,color:i.whiteOrBlack(n.shares_background)};else var c={backgroundColor:"transparent",color:"#000"};e(".sumome-share-client-share-share",r).css(c)}if(["la","ra"].indexOf(s)>-1&&(r=r.closest(".sumome-share-client-wrapper")),!(["lp","rp"].indexOf(s)<0))if(["mbt","mbb","mbl","mbr"].indexOf(s)>-1){if(n.offset_x&&0!==n.offset_x){var u="left",m=n.offset_x;"mbr"==s&&(u="right",m=0-m),r.css(u,m+"px")}["mbt","mbb"].indexOf(s)<0&&n.offset_y&&0!==n.offset_y&&r.css("bottom",0-n.offset_y+"px")}else{var h="marginTop",u="marginLeft",m=0;n.position_id&&(r=e(".sumome-share-client-wrapper-custom",r)),n.offset_x&&0!==n.offset_x&&("la"===s?u="left":"ra"===s?u="right":["tra","hra","bra"].indexOf(s)>-1&&(u="marginRight"),m=["ra","tra","hra","bra"].indexOf(s)>-1?0-n.offset_x:n.offset_x,r.css(u,m+"px")),n.offset_y&&0!==n.offset_y&&(["la","ra"].indexOf(s)>-1&&(h="top"),r.css(h,n.offset_y+"px"))}}},this))}},alignShareLabels:function t(){e.each(e(".sumome-share-client-share-share"),function(){var t=e(this).outerHeight(),i=e(this).find("span").css("bottom","auto"),s=e(i).outerHeight();e(i).css("top",(t-s)/2+"px")})},scroll:function t(){if(null!=this.$mobileBottomBar){var i=e(window).scrollTop(),s="sumome-share-client-wrapper-mobile-bottom-bar-hidden",o=!this.$mobileBottomBar.hasClass(s),n=this.$mobileBottomBar.height()||16;i>this.lastScrollTop?(this.lastScrollUp=0,o||(this.$mobileBottomBar.css("bottom",""),this.$mobileBottomBar.removeClass(s))):i<this.lastScrollTop&&(this.lastScrollUp+=this.lastScrollTop-i,(o&&this.lastScrollUp>=n/2||0==i)&&(this.$mobileBottomBar.css("bottom",-1*n),this.$mobileBottomBar.addClass(s))),this.lastScrollTop=i}}};return l});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};sumo.define("lib/sumome/sumolist/formsync",["jquery","postscribe"],function(e,t){function s(s,o){this.config=s,this.$syncEl=null;var n={};Array.isArray(o)?o.forEach(function(e){e.form_sync_field&&(n[e.field_variable]=e.form_sync_field)}):o&&"object"===(void 0===o?"undefined":i(o))&&(n=JSON.parse(JSON.stringify(o))),s.email_field&&(n.email=s.email_field),this.fieldMap=n,this.install=function(i){this.fields=i,this.$syncEl=e('<div class="sumo-formsync" />'),this.$syncEl.hide(),this.$syncEl.appendTo(document.body),t.postscribe(this.$syncEl.get(0),this.config.snippet)},this.remove=function(){this.$syncEl&&(this.$syncEl.remove(),this.$syncEl=null)},this.submit=function(e){if(this.$syncEl){var t=this.$syncEl.find("form");if(t.length){t.prop("novalidate",!0),t.replaceWith(t.clone(!1)),t=this.$syncEl.find("form");var i=this;t.on("submit",function(){window.setTimeout(function(){i.remove()},1e4)}),this.$fieldsEl=this.$syncEl.find("input, select");for(var s in this.fields)s in this.fieldMap&&this.setFieldValue(this.fieldMap[s],this.fields[s].value);var o=t.find('input[type="submit"]');o.length||(o=t.find('button[type="submit"]')),o.get(0)?o.trigger("click"):t.trigger("submit")}else if(void 0===e||e<20){var i=this;window.setTimeout(function(){i.submit((e||0)+1)},500)}}},this.setFieldValue=function(t,i){var s=this.$fieldsEl.filter(function(){return e(this).attr("name")===t});if(s.is("input")){switch((s.attr("type")||"").toLowerCase()){case"email":case"password":case"text":case"hidden":s.val(i);break;case"checkbox":case"radio":s.filter(function(){return e(this).val().toLowerCase()===i.toLowerCase()}).prop("checked",!0)}}else s.is("select")&&s.val(i)}}return s}),sumo.define("JSON",[],function(){var e=null;try{var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),e=t.contentWindow.JSON}catch(e){}return e||JSON}),sumo.define("pixel-helpers",[],function(){return{injectVars:function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var s=new RegExp("\\{\\s*sumome-"+i+"\\s*\\}","g");e=e.replace(s,t[i])}return e}}}),sumo.define("countries",[],function(){return["Afghanistan","Åland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua And Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia, Plurinational State Of","Bonaire, Sint Eustatius And Saba","Bosnia And Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (keeling) Islands","Colombia","Comoros","Congo","Congo, The Democratic Republic Of The","Cook Islands","Costa Rica","Côte D'ivoire","Croatia","Cuba","Curaçao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-bissau","Guyana","Haiti","Heard Island And Mcdonald Islands","Holy See (vatican City State)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran, Islamic Republic Of","Iraq","Ireland","Isle Of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic People's Republic Of","Korea, Republic Of","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, The Former Yugoslav Republic Of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States Of","Moldova, Republic Of","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestine, State Of","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Réunion","Romania","Russian Federation","Rwanda","Saint Barthélemy","Saint Helena, Ascension And Tristan Da Cunha","Saint Kitts And Nevis","Saint Lucia","Saint Martin (french Part)","Saint Pierre And Miquelon","Saint Vincent And The Grenadines","Samoa","San Marino","Sao Tome And Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (dutch Part)","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia And The South Sandwich Islands","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Svalbard And Jan Mayen","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan, Province Of China","Tajikistan","Tanzania, United Republic Of","Thailand","Timor-leste","Togo","Tokelau","Tonga","Trinidad And Tobago","Tunisia","Turkey","Turkmenistan","Turks And Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela, Bolivarian Republic Of","Viet Nam","Virgin Islands, British","Virgin Islands, U.s.","Wallis And Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"]}),sumo.define("plugins/text!scrollbox/templates/email_popup.html",[],function(){return'<div class="sumome-scrollbox-form">\n  <h2 class="sumome-scrollbox-heading"></h2>\n  <div class="sumome-scrollbox-text"></div>\n  <div class="sumome-scrollbox-error"></div>\n  <input class="sumome-scrollbox-input" type="text" value="" name="scrollbox_email_address" id="scrollbox_email_address" placeholder="Enter your email address" />\n  <button class="sumome-scrollbox-button sumome-scrollbox-button-bg sumome-scrollbox-button-text" type="submit">Subscribe Me</button>\n  <button class="sumome-scrollbox-continue sumome-scrollbox-continue-bg sumome-scrollbox-continue-text" type="submit" style="display:none;">Continue</button>\n</div>\n<div class="sumome-scrollbox-close"></div>'});var n={email:"Email",name:"Name",first_name:"First Name",last_name:"Last Name",company:"Company",zip:"Zip Code",website:"Website URL",phone:"Phone"};"undefined"!=typeof sumo&&"function"==typeof sumo.define?sumo.define("scrollbox/fields",[],function(){return n}):void 0!==t&&t.exports&&(t.exports=n),sumo.define("countdown",[],function(){var e;return function(e){"use strict";function t(e,t){var i=e.getTime();return e.setMonth(e.getMonth()+t),Math.round((e.getTime()-i)/A)}function i(e){var t=e.getTime(),i=new Date(t);return i.setMonth(e.getMonth()+1),Math.round((i.getTime()-t)/A)}function s(e){var t=e.getTime(),i=new Date(t);return i.setFullYear(e.getFullYear()+1),Math.round((i.getTime()-t)/A)}function o(e,t){if(t=t instanceof Date||null!==t&&isFinite(t)?new Date(+t):new Date,!e)return t;var i=+e.value||0;return i?(t.setTime(t.getTime()+i),t):(i=+e.milliseconds||0,i&&t.setMilliseconds(t.getMilliseconds()+i),i=+e.seconds||0,i&&t.setSeconds(t.getSeconds()+i),i=+e.minutes||0,i&&t.setMinutes(t.getMinutes()+i),i=+e.hours||0,i&&t.setHours(t.getHours()+i),i=+e.weeks||0,i&&(i*=O),i+=+e.days||0,i&&t.setDate(t.getDate()+i),i=+e.months||0,i&&t.setMonth(t.getMonth()+i),i=+e.millennia||0,i&&(i*=U),i+=+e.centuries||0,i&&(i*=D),i+=+e.decades||0,i&&(i*=B),i+=+e.years||0,i&&t.setFullYear(t.getFullYear()+i),t)}function n(e,t){return ie(e)+(1===e?V[t]:K[t])}function a(){}function r(e,t){switch(t){case"seconds":if(e.seconds!==$||isNaN(e.minutes))return;e.minutes++,e.seconds=0;case"minutes":if(e.minutes!==I||isNaN(e.hours))return;e.hours++,e.minutes=0;case"hours":if(e.hours!==L||isNaN(e.days))return;e.days++,e.hours=0;case"days":if(e.days!==O||isNaN(e.weeks))return;e.weeks++,e.days=0;case"weeks":if(e.weeks!==i(e.refMonth)/O||isNaN(e.months))return;e.months++,e.weeks=0;case"months":if(e.months!==P||isNaN(e.years))return;e.years++,e.months=0;case"years":if(e.years!==B||isNaN(e.decades))return;e.decades++,e.years=0;case"decades":if(e.decades!==D||isNaN(e.centuries))return;e.centuries++,e.decades=0;case"centuries":if(e.centuries!==U||isNaN(e.millennia))return;e.millennia++,e.centuries=0}}function l(e,t,i,s,o,n){return e[i]>=0&&(t+=e[i],delete e[i]),t/=o,t+1<=1?0:e[s]>=0?(e[s]=+(e[s]+t).toFixed(n),r(e,s),0):t}function c(e,t){var o=l(e,0,"milliseconds","seconds",E,t)
;if(o&&(o=l(e,o,"seconds","minutes",$,t))&&(o=l(e,o,"minutes","hours",I,t))&&(o=l(e,o,"hours","days",L,t))&&(o=l(e,o,"days","weeks",O,t))&&(o=l(e,o,"weeks","months",i(e.refMonth)/O,t))&&(o=l(e,o,"months","years",s(e.refMonth)/i(e.refMonth),t))&&(o=l(e,o,"years","decades",B,t))&&(o=l(e,o,"decades","centuries",D,t))&&(o=l(e,o,"centuries","millennia",U,t)))throw new Error("Fractional unit overflow")}function u(e){var i;for(e.milliseconds<0?(i=R(-e.milliseconds/E),e.seconds-=i,e.milliseconds+=i*E):e.milliseconds>=E&&(e.seconds+=N(e.milliseconds/E),e.milliseconds%=E),e.seconds<0?(i=R(-e.seconds/$),e.minutes-=i,e.seconds+=i*$):e.seconds>=$&&(e.minutes+=N(e.seconds/$),e.seconds%=$),e.minutes<0?(i=R(-e.minutes/I),e.hours-=i,e.minutes+=i*I):e.minutes>=I&&(e.hours+=N(e.minutes/I),e.minutes%=I),e.hours<0?(i=R(-e.hours/L),e.days-=i,e.hours+=i*L):e.hours>=L&&(e.days+=N(e.hours/L),e.hours%=L);e.days<0;)e.months--,e.days+=t(e.refMonth,1);e.days>=O&&(e.weeks+=N(e.days/O),e.days%=O),e.months<0?(i=R(-e.months/P),e.years-=i,e.months+=i*P):e.months>=P&&(e.years+=N(e.months/P),e.months%=P),e.years>=B&&(e.decades+=N(e.years/B),e.years%=B,e.decades>=D&&(e.centuries+=N(e.decades/D),e.decades%=D,e.centuries>=U&&(e.millennia+=N(e.centuries/U),e.centuries%=U)))}function m(e,i,s,o){var n=0;!(i&C)||n>=s?(e.centuries+=e.millennia*U,delete e.millennia):e.millennia&&n++,!(i&S)||n>=s?(e.decades+=e.centuries*D,delete e.centuries):e.centuries&&n++,!(i&k)||n>=s?(e.years+=e.decades*B,delete e.decades):e.decades&&n++,!(i&x)||n>=s?(e.months+=e.years*P,delete e.years):e.years&&n++,!(i&_)||n>=s?(e.months&&(e.days+=t(e.refMonth,e.months)),delete e.months,e.days>=O&&(e.weeks+=N(e.days/O),e.days%=O)):e.months&&n++,!(i&w)||n>=s?(e.days+=e.weeks*O,delete e.weeks):e.weeks&&n++,!(i&y)||n>=s?(e.hours+=e.days*L,delete e.days):e.days&&n++,!(i&b)||n>=s?(e.minutes+=e.hours*I,delete e.hours):e.hours&&n++,!(i&v)||n>=s?(e.seconds+=e.minutes*$,delete e.minutes):e.minutes&&n++,!(i&g)||n>=s?(e.milliseconds+=e.seconds*E,delete e.seconds):e.seconds&&n++,i&f&&!(n>=s)||c(e,o)}function h(e,t,i,s,o,n){var a=new Date;if(e.start=t=t||a,e.end=i=i||a,e.units=s,e.value=i.getTime()-t.getTime(),e.value<0){var r=i;i=t,t=r}e.refMonth=new Date(t.getFullYear(),t.getMonth(),15,12,0,0);try{e.millennia=0,e.centuries=0,e.decades=0,e.years=i.getFullYear()-t.getFullYear(),e.months=i.getMonth()-t.getMonth(),e.weeks=0,e.days=i.getDate()-t.getDate(),e.hours=i.getHours()-t.getHours(),e.minutes=i.getMinutes()-t.getMinutes(),e.seconds=i.getSeconds()-t.getSeconds(),e.milliseconds=i.getMilliseconds()-t.getMilliseconds(),u(e),m(e,s,o,n)}finally{delete e.refMonth}return e}function d(e){return e&f?E/30:e&g?E:e&v?E*$:e&b?E*$*I:e&y?E*$*I*L:E*$*I*L*O}function p(e,t,i,s,n){var r;i=+i||T,s=s>0?s:NaN,n=n>0?n<20?Math.round(n):20:0;var l=null;"function"==typeof e?(r=e,e=null):e instanceof Date||(null!==e&&isFinite(e)?e=new Date(+e):("object"==typeof l&&(l=e),e=null));var c=null;if("function"==typeof t?(r=t,t=null):t instanceof Date||(null!==t&&isFinite(t)?t=new Date(+t):("object"==typeof t&&(c=t),t=null)),l&&(e=o(l,t)),c&&(t=o(c,e)),!e&&!t)return new a;if(!r)return h(new a,e,t,i,s,n);var u=d(i),m,p=function(){r(h(new a,e,t,i,s,n),m)};return p(),m=setInterval(p,u)}var f=1,g=2,v=4,b=8,y=16,w=32,_=64,x=128,k=256,S=512,C=1024,T=x|_|y|b|v|g,E=1e3,$=60,I=60,L=24,A=L*I*$*E,O=7,P=12,B=10,D=10,U=10,R=Math.ceil,N=Math.floor,z=0,j=1,F=2,M=3,H=4,q=5,W=6,Q=7,X=8,G=9,Y=10,V,K,Z,J,ee,te,ie,se;a.prototype.toString=function(e){var t=se(this),i=t.length;if(!i)return e?""+e:ee;if(1===i)return t[0];var s=Z+t.pop();return t.join(J)+s},a.prototype.toHTML=function(e,t){e=e||"span";var i=se(this),s=i.length;if(!s)return t=t||ee,t?"<"+e+">"+t+"</"+e+">":t;for(var o=0;o<s;o++)i[o]="<"+e+">"+i[o]+"</"+e+">";if(1===s)return i[0];var n=Z+i.pop();return i.join(J)+n},a.prototype.addTo=function(e){return o(this,e)},se=function(e){var t=[],i=e.millennia;return i&&t.push(te(i,10)),i=e.centuries,i&&t.push(te(i,9)),i=e.decades,i&&t.push(te(i,8)),i=e.years,i&&t.push(te(i,7)),i=e.months,i&&t.push(te(i,6)),i=e.weeks,i&&t.push(te(i,5)),i=e.days,i&&t.push(te(i,4)),i=e.hours,i&&t.push(te(i,3)),i=e.minutes,i&&t.push(te(i,2)),i=e.seconds,i&&t.push(te(i,1)),i=e.milliseconds,i&&t.push(te(i,0)),t},p.MILLISECONDS=f,p.SECONDS=g,p.MINUTES=v,p.HOURS=b,p.DAYS=y,p.WEEKS=w,p.MONTHS=_,p.YEARS=x,p.DECADES=k,p.CENTURIES=S,p.MILLENNIA=C,p.DEFAULTS=T,p.ALL=C|S|k|x|_|w|y|b|v|g|f;var oe=p.setFormat=function(e){if(e){if("singular"in e||"plural"in e){var t=e.singular||[];t.split&&(t=t.split("|"));var i=e.plural||[];i.split&&(i=i.split("|"));for(var s=0;s<=10;s++)V[s]=t[s]||V[s],K[s]=i[s]||K[s]}"string"==typeof e.last&&(Z=e.last),"string"==typeof e.delim&&(J=e.delim),"string"==typeof e.empty&&(ee=e.empty),"function"==typeof e.formatNumber&&(ie=e.formatNumber),"function"==typeof e.formatter&&(te=e.formatter)}},ne=p.resetFormat=function(){V=" millisecond| second| minute| hour| day| week| month| year| decade| century| millennium".split("|"),K=" milliseconds| seconds| minutes| hours| days| weeks| months| years| decades| centuries| millennia".split("|"),Z=" and ",J=", ",ee="",ie=function(e){return e},te=n};return p.setLabels=function(e,t,i,s,o,n,a){oe({singular:e,plural:t,last:i,delim:s,empty:o,formatNumber:n,formatter:a})},p.resetLabels=ne,ne(),e&&e.exports?e.exports=p:"function"==typeof window.define&&void 0!==window.define.amd&&window.define("countdown",[],function(){return p}),p}(void 0)}),sumo.define("sumocountdown",["jquery","countdown"],function(e,t){function i(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function s(t,i,s,a){var l=t.html()||"",c=new Date(i).toString(),u=a?a.data("interval"):null;u?clearInterval(b[u]):u=r(),s||(s=g);var a=e('<span class="sumome-countdown-timer" data-end="'+i+'" data-interval="'+u+'" data-format="'+s+'"></span>');return l=l.split(f),1==l.length&&l[0].length>0&&(l[0]=l[0]+"&nbsp;"),l.splice(1,0,a[0].outerHTML),l=l.join(""),t.empty(),t.html(l),a=t.find(".sumome-countdown-timer").length?t.find(".sumome-countdown-timer"):a,a.bind("destroyed",function(){o(a)}),n(a),a}function o(e){var t=e.data("interval");clearInterval(b[t]),delete b[t]}function n(e,t){if(e){var i=e.data("interval"),s=e.data("end"),o=e.data("format");t&&(i=r(),e.data("interval",i)),clearInterval(b[i]);var n=function t(){var n=l(s);e.html(u(n,o)),n.value<=0&&clearInterval(b[i])};n(),b[i]=setInterval(n,1e3)}}function a(e){var t=e.data("interval");clearInterval(b[t])}function r(){return Math.random().toString().replace(".","")}function l(e){var i=new Date,s=new Date(e);return t(i,s)}function c(e,t){return 1!=t&&(e+="s"),e}function u(e,t){if(e.value<=0)for(var i in e)e[i]=0;var s=t;if(s=s.replace("yy",h(e.years)),s=s.replace("MM",h(e.months)),s=s.replace("dd",h(e.days)),s=s.replace("HH",p(e)),s=s.replace("hh",h(e.hours)),s=s.replace("mm",h(e.minutes)),s=s.replace("ss",h(e.seconds)),d(t.toLowerCase(),"uu")&&d(t.toLowerCase(),"nn")&&!d(t,"HH")){for(var o=t.toLowerCase().indexOf("uu"),n=t.toLowerCase().indexOf("nn"),a=o<n?o:n,r=o>n?o+2:n+2,l=t.substring(a,r),c="",u=0;r+u<t.length;u++){var f=t.substring(r+u+0,r+u+1),g=t.substring(r+u+1,r+u+2);if(v[f+g])break;c+=f}l+=c;var b="";d(t,"ss")||(b=(e.value>59e3?"and ":"")+m(e.seconds,v.ss,l)+b),e.minutes&&!d(t,"mm")&&(b=m(e.minutes,v.mm,l)+b),e.hours&&!d(t,"hh")&&(b=m(e.hours,v.hh,l)+b),e.days&&!d(t,"dd")&&(b=m(e.days,v.dd,l)+b),e.months&&!d(t,"MM")&&(b=m(e.months,v.MM,l)+b),e.years&&!d(t,"yy")&&(b=m(e.years,v.yy,l)+b),d(t,"ss")||d(t,"mm")||d(t,"hh")||(b=b.slice(0,-1*c.length)),s=s.replace(l,b)}return s}function m(e,t,i){return i=i.replace("UU",e).replace("uu",e).replace("NN",c(t,e)).replace("nn",t.substring(0,1).toLowerCase()).replace("Nn",t.substring(0,1).toUpperCase())}function h(e){return("0"+e).slice(-2)}function d(e,t){return e.indexOf(t)>-1}function p(e){var t=Math.floor(e.value/36e5);return t<10&&(t=h(t)),i(t)}var f="{timer}",g="UU NN, hh:mm:ss",v={yy:"year",MM:"month",dd:"day",hh:"hour",mm:"minute",ss:"second"},b={};return e.event.special.destroyed={remove:function e(t){t.handler&&t.handler()}},{create:s,destroy:o,start:n,stop:a,replace:f}}),sumo.define("twitter-widgets",["jquery"],function(e){return{load:function(t){this.isLoaded()?t():e.getScript("//platform.twitter.com/widgets.js",t)},isLoaded:function(){return"undefined"!=typeof twttr&&void 0!==twttr.widgets},followButton:function(e,t,i){this.load(function(){twttr.widgets.createFollowButton(e,t,{showScreenName:!0,showCount:!0}).then(i&&"function"==typeof i?i:Function.prototype)})}}}),sumo.define("jquery.iframe-tracker",["jquery"],function(e){e.fn.iframeTracker=function(t){e.iframeTracker.handlersList.push(t),e(this).bind("mouseover",{handler:t},function(e){e.data.handler.over=!0;try{e.data.handler.overCallback(this)}catch(e){}}).bind("mouseout",{handler:t},function(t){t.data.handler.over=!1,e.iframeTracker.focusRetriever.focus();try{t.data.handler.outCallback(this)}catch(e){}})},e.iframeTracker={focusRetriever:null,focusRetrieved:!1,handlersList:[],isIE8AndOlder:!1,init:function(){try{1==e.browser.msie&&e.browser.version<9&&(this.isIE8AndOlder=!0)}catch(e){try{var t=navigator.userAgent.match(/(msie) ([\w.]+)/i);t[2]<9&&(this.isIE8AndOlder=!0)}catch(e){}}e(window).focus(),e(window).blur(function(t){e.iframeTracker.windowLoseFocus(t)}),e("body").append('<div style="position:fixed;top:0;left:0;overflow:hidden;"><label for="focus_retriever" style="position:absolute;left:-1000px;">Focus Retriever</label><input style="position:absolute;left:-1000px;" type="text" name="focus_retriever" value="" id="focus_retriever" readonly="true" /></div>'),this.focusRetriever=e("#focus_retriever"),this.focusRetrieved=!1;var i=this;if(e(document).mousemove(function(t){i.handlersList.some(function(t){return e(t.target).is(e(document.activeElement))})&&document.activeElement&&"IFRAME"==document.activeElement.tagName&&(e.iframeTracker.focusRetriever.focus(),e.iframeTracker.focusRetrieved=!0)}),this.isIE8AndOlder){this.focusRetriever.blur(function(t){t.stopPropagation(),t.preventDefault(),e.iframeTracker.windowLoseFocus(t)}),e("body").click(function(t){e(window).focus()}),e("form").click(function(e){e.stopPropagation()});try{e("body").on("click","form",function(e){e.stopPropagation()})}catch(e){}}},windowLoseFocus:function(e){for(var t in this.handlersList)if(1==this.handlersList[t].over)try{this.handlersList[t].blurCallback()}catch(e){}}},e(document).ready(function(){e.iframeTracker.init()})});var a={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","mac.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","google.com","optonline.net","sbcglobal.net","aol.com","me.com","btinternet.com","charter.net","shaw.ca"],defaultSecondLevelDomains:["yahoo","hotmail","mail","live","outlook","gmx"],defaultTopLevelDomains:["com","com.au","com.tw","co","ca","co.nz","co.uk","de","fr","fi","io","it","ru","net","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","in","net","net.au","info","biz","mil","co.jp","sg","hu","uk"],run:function e(t){t.domains=t.domains||a.defaultDomains,t.secondLevelDomains=t.secondLevelDomains||a.defaultSecondLevelDomains,t.topLevelDomains=t.topLevelDomains||a.defaultTopLevelDomains,t.distanceFunction=t.distanceFunction||a.sift3Distance;var i=function e(t){return t},s=t.suggested||i,o=t.empty||i,n=a.suggest(a.encodeEmail(t.email),t.domains,t.secondLevelDomains,t.topLevelDomains,t.distanceFunction);return n?s(n):o()},suggest:function e(t,i,s,o,n){t=t.toLowerCase();var a=this.splitEmail(t);if(s&&o&&-1!==s.indexOf(a.secondLevelDomain)&&-1!==o.indexOf(a.topLevelDomain))return!1;var r=this.findClosestDomain(a.domain,i,n,this.domainThreshold);if(r)return r!=a.domain&&{address:a.address,domain:r,full:a.address+"@"+r};var l=this.findClosestDomain(a.secondLevelDomain,s,n,this.secondLevelThreshold),c=this.findClosestDomain(a.topLevelDomain,o,n,this.topLevelThreshold);if(a.domain){var r=a.domain,u=!1;if(l&&l!=a.secondLevelDomain&&(r=r.replace(a.secondLevelDomain,l),u=!0),c&&c!=a.topLevelDomain&&(r=r.replace(new RegExp(a.topLevelDomain+"$"),c),u=!0),1==u)return{address:a.address,domain:r,full:a.address+"@"+r}}return!1},findClosestDomain:function e(t,i,s,o){o=o||this.topLevelThreshold;var n,a=1/0,r=null;if(!t||!i)return!1;s||(s=this.sift3Distance);for(var l=0;l<i.length;l++){if(t===i[l])return t;var c="com"===r&&"c"===t||"net"===r&&"n"===t;n=s(t,i[l]),n<a&&!c&&(a=n,r=i[l])}return a<=o&&null!==r&&r},sift3Distance:function e(t,i){if(null==t||0===t.length)return null==i||0===i.length?0:i.length;if(null==i||0===i.length)return t.length;for(var s=0,o=0,n=0,a=0,r=5;s+o<t.length&&s+n<i.length;){if(t.charAt(s+o)==i.charAt(s+n))a++;else{o=0,n=0;for(var l=0;l<5;l++){if(s+l<t.length&&t.charAt(s+l)==i.charAt(s)){o=l;break}if(s+l<i.length&&t.charAt(s)==i.charAt(s+l)){n=l;break}}}s++}return(t.length+i.length)/2-a},splitEmail:function e(t){var i=t.trim().split("@");if(i.length<2)return!1;for(var s=0;s<i.length;s++)if(""===i[s])return!1;var o=i.pop(),n=o.split("."),a="",r="";if(0==n.length)return!1;if(1==n.length)r=n[0];else{a=n[0];for(var s=1;s<n.length;s++)r+=n[s]+".";r=r.substring(0,r.length-1)}return{topLevelDomain:r,secondLevelDomain:a,domain:o,address:i.join("@")}},encodeEmail:function e(t){var i=encodeURI(t);return i=i.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};void 0!==t&&t.exports&&(t.exports=a),"function"==typeof sumo.define&&sumo.define.amd&&sumo.define("mailcheck",[],function(){return a}),"undefined"!=typeof window&&window.jQuery&&function(e){e.fn.mailcheck=function(e){var t=this;if(e.suggested){var i=e.suggested;e.suggested=function(e){i(t,e)}}if(e.empty){var s=e.empty;e.empty=function(){s.call(null,t)}}e.email=this.val(),a.run(e)}}(jQuery);var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t){"function"==typeof sumo.define&&sumo.define.amd?sumo.define("jquery.email-autocomplete",["jquery","mailcheck"],t):"object"===(void 0===e?"undefined":i(e))?t(require("jquery","mailcheck")):t(jQuery,a)}(function(e,t){function i(t,i){this.$field=e(t),"domains"in i&&Array.isArray(i.domains)&&(i.domains=i.domains.concat(o.domains)),this.options=e.extend(!0,{},o,i),this._defaults=o,this._domains=this.options.domains,this._emails=this.options.emails,this.init()}var s="emailautocomplete",o={suggClass:"sumome-eac-sugg",suggsClass:"sumome-eac-suggs",renderDrop:!0,domains:["gmail.com","hotmail.com","yahoo.com","outlook.com","aol.com","live.com","me.com","icloud.com","mail.ru","hotmail.co.uk","yahoo.co.uk","facebook.com","ymail.com","yandex.ru","msn.com","comcast.net","mail.com","mac.com","hotmail.fr","googlemail.com","yahoo.fr","gmx.de","qq.com","web.de","yahoo.es","live.co.uk","yahoo.com.br","att.net","sbcglobal.net","yahoo.ca","rocketmail.com","abv.bg","btinternet.com","verizon.net","hotmail.it","gmx.com","hotmail.es","cox.net","seznam.cz","live.fr","yandex.com","yahoo.co.in","yahoo.co.id","mailinator.com","bigpond.com","yahoo.com.au","yahoo.it","libero.it","yopmail.com","yahoo.de","yahoo.in","wp.pl","163.com","shaw.ca","ntlworld.com","rediffmail.com","bk.ru","naver.com","bellsouth.net","gmx.net","live.nl","live.ca","outlook.fr","free.fr","o2.pl","kw.com","ukr.net","ya.ru","outlook.es","orange.fr","earthlink.net","rogers.com","hotmail.de","live.com.au","charter.net","rambler.ru","yahoo.co.jp","yahoo.gr","hotmail.ca"],emails:[]};i.prototype={init:function i(){Array.prototype.indexOf||this.doIndexOf();var s=this.getDefaultStyle(this.$field[0],"width"),o=this.$field[0].style.height||this.$field.outerHeight(),n=this.$field.css("backgroundColor"),a=this.isBgColorDark(n),r=e("<div class='sumome-eac-input-wrap' />").css({display:"block",position:"relative",fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),float:this.$field.css("float"),width:s,maxWidth:"100%",minWidth:this.$field.css("min-width"),margin:this.$field.css("margin"),marginTop:this.$field.css("margin-top"),marginRight:this.$field.css("margin-right"),marginBottom:this.$field.css("margin-bottom"),marginLeft:this.$field.css("margin-left"),opacity:"1 !important",background:this.$field.css("background"),backgroundImage:this.$field.css("background-image"),backgroundColor:n,borderRadius:this.$field.css("border-radius")||this.$field.css("border-top-left-radius"),textAlign:this.$field.css("text-align"),borderColor:"transparent"}).addClass(this.$field.attr("class"));this.$field.wrap(r),this.$wrap=this.$field.parent(),this.removeStyle(this.$field,"margin"),this.removeStyle(this.$field,"background"),this.removeStyle(this.$field,"background-color"),this.removeStyle(this.$field,"background-image"),this.$field[0].style.margin="",this.$field[0].style.marginTop="",this.$field[0].style.marginRight="",this.$field[0].style.marginBottom="",this.$field[0].style.marginLeft="",this.$field[0].style.background="",this.$field[0].style.backgroundColor="",this.$field[0].style.backgroundImage="",this.$field.css({position:"relative",top:0,left:0,width:"100%",minWidth:"100%",margin:0,background:"transparent",backgroundColor:"transparent",backgroundImage:"",lineHeight:"initial"}),this.isTextAlignCenter="center"===this.$field.css("textAlign"),this.updateFieldLeftOffset(),this.$cval=e("<span class='sumome-eac-cval' />").css({visibility:"hidden",position:"absolute",top:0,left:0,display:"inline-block",fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),height:"100%",zIndex:"-1"}).insertBefore(this.$field);var l=(this.$field.outerHeight(!0)-this.$field.height())/2;this.$suggUnderlay=e("<input class='"+this.options.suggClass+"' disabled/>").css({display:"inline-block","box-sizing":"border-box",fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),position:"absolute",left:0,height:"100%",width:"100%",padding:this.$field.css("padding"),paddingTop:this.$field.css("padding-top"),paddingRight:this.$field.css("padding-right"),paddingBottom:this.$field.css("padding-bottom"),paddingLeft:this.$field.css("padding-left"),border:this.$field.css("border"),borderTopWidth:this.$field.css("border-top-width"),borderRightWidth:this.$field.css("border-right-width"),borderBottomWidth:this.$field.css("border-bottom-width"),borderLeftWidth:this.$field.css("border-left-width"),borderRadius:this.$field.css("border-radius")||this.$field.css("border-top-left-radius"),background:"transparent",borderColor:"transparent",color:a?"rgba(0, 0, 0, 0.25)":"rgba(255, 255, 255, 0.25)",opacity:1,lineHeight:"initial"}).insertBefore(this.$field),this.$suggOverlay=e("<span class='sumome-eac-overlay-hitbox' />").css({display:"inline-block","box-sizing":"border-box",fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),transform:"translateY(-50%)",position:"absolute",top:"50%",opacity:0,left:0,cursor:"pointer"}).insertAfter(this.$field),this.$spellErrorEl=e("<span class='sumome-eac-sugg-spell-error' />").css({fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),background:"transparent",transform:"translateY(-50%)",display:"inline-block",position:"absolute",top:"50%"}).insertBefore(this.$field),this.$spellErrorUsrEl=e("<span class='sumome-eac-sugg-spell-error-usernm' />").css({marginLeft:this.fieldLeftOffset}).appendTo(this.$spellErrorEl),this.$spellErrorDomEl=e("<span class='sumome-eac-sugg-spell-error-domain' />").appendTo(this.$spellErrorEl),!1===this.options.renderDrop?this.$suggsListEl=e("."+this.options.suggsClass):(this.$suggsListEl=e("<span class='"+this.options.suggsClass+"' />").css("visibility","hidden").insertAfter(this.$field),this.$field.on("blur",e.proxy(function(e){this.$wrap.removeClass("sumome-eac-input-wrap-focus"),this.hideSuggsDropDown()},this)),this.$field.on("focus",e.proxy(function(e){if(this.$wrap.addClass("sumome-eac-input-wrap-focus"),void 0===this.suggestion||this.suggestion.length<1)return!1;this.showSuggsDropDown()},this)),this.$suggsListEl.on("mousemove",e.proxy(function(t){"target"in t&&e(t.target).hasClass("sumome-eac-bubble")&&!e(t.target).hasClass("active")&&this.tabSuggs(0,e(t.target))},this))),this.$field.on("blur",e.proxy(function(e){this.$suggOverlay.hide(),this.$suggUnderlay.fadeOut(200)},this)),this.$field.on("focus",e.proxy(function(e){this.$suggOverlay.show(),this.$suggUnderlay.fadeIn(200)},this)),this.$field.on("input",e.proxy(this.displaySuggestion,this)),this.$field.on("keydown",e.proxy(function(e){13===e.which&&this.suggestion.length>0&&e.preventDefault(),13!==e.which&&9!==e.which||this.autocomplete(),39===e.which&&!0!==e.shiftKey&&this.suggestion.length>0&&this.autocomplete(),38!==e.which&&40!==e.which||(e.preventDefault(),38===e.which&&this.tabSuggs(-1),40===e.which&&this.tabSuggs(1))},this)),this.$suggOverlay.on("mousedown.eac touchstart.eac",e.proxy(this.autocomplete,this)),this._emails.length>0&&this.$field.attr("placeholder",""),t&&this.$field.attr("spellcheck","false"),this.$field.attr("autocomplete","email"),this.$field.attr("autocapitalize","off"),this.$field.attr("autocorrect","off"),this.$field.attr("type","email"),this.updateFontSizeMatchin(),setTimeout(e.proxy(function(){this.updateFontSizeMatchin()},this),1e3)},suggest:function e(t,i){var s=t.split("@");if(!(s.length>1))return"";if(t=s.pop(),!t.length)return"";var o=this._domains.filter(function(e){return 0===e.indexOf(t)});return i&&o&&-1===t.indexOf(o)?o:(o=o.shift()||"",o.replace(t,""))},suggests:function t(i,s){this.domainSpellCheck(i,e.proxy(function(e){var t=e||[];t.length>0&&-1===t[0].indexOf(i)?(this.$spellErrorUsrEl.css({marginLeft:this.fieldLeftOffset}),this.$spellErrorUsrEl.text(i.split("@")[0]+"@"),this.$spellErrorDomEl.text(i.split("@")[1]).css({visibility:"visible"})):this.$spellErrorDomEl.css("visibility","hidden");var o=this.suggest(this.val,!0)||[],n=this._emails.filter(function(e){return 0===e.indexOf(i)&&e!==i}),a=this._emails.filter(function(e){return 0===e.indexOf(i)&&e===i});if(a.length){var r=this._emails.slice(0),l=r.indexOf(a[0]);r.splice(l,1),r.unshift(a[0]),n=r}else 0===i.length&&(n=this._emails.slice(0));if(i.split("@").length>1&&i.split("@")[1].length<1){o=this._domains.slice(0,7)}t=t.concat(n.concat(o)),s(t)},this))},autocomplete:function t(){if(void 0===this.suggestion||this.suggestion.length<1)return!1;if(e(".sumome-eac-bubble.active").length>0){var i=e(".sumome-eac-bubble.active").eq(0).text();this.$field.val(i),this.$field.trigger("change")}this.clear()},clear:function e(){this.$suggUnderlay.val(""),this.$suggOverlay.text("").css("left",""),this.$suggsListEl.html("").css("visibility","hidden"),this.$spellErrorDomEl.css("visibility","hidden"),this.$cval.text(""),this.suggestion=""},displaySuggestion:function t(i){var s=this,o={},n=0;this.val=this.$field.val(),this.updateFieldLeftOffset(),this.suggests(this.val,e.proxy(function(e){this.suggestions=e,this.suggestions.length?i&&i.preventDefault():(this.$suggUnderlay.val(""),this.$suggsListEl.html("")),this.setUnderlaySuggestion(this.suggestions[0]),this.$suggsListEl.html("");for(var t=0;t<this.suggestions.length;t++){var s=this.suggestions[t];-1==s.indexOf("@")&&(s=this.val.split("@")[0]+"@"+s),o[s]||(o[s]=s,this.addSuggBubble(s),n++)}this.suggestions.length<=0?(this.$field.attr("autocomplete","email"),this.hideSuggsDropDown(!0)):(this.$field.attr("autocomplete","off"),this.showSuggsDropDown()),this.$cval.text(this.val);var a=this.$cval.width();this.$field.outerWidth()>a?(this.isTextAlignCenter?(this.$spellErrorEl.css("left",this.$field.outerWidth()/2+a/2-this.$spellErrorEl.width()+"px"),this.$suggOverlay.css("left",this.$field.outerWidth()/2+a/2+"px"),this.$suggUnderlay.css("paddingLeft",+this.$field.outerWidth()/2-a/2+"px")):this.$suggOverlay.css("left",this.fieldLeftOffset+a+"px"),this.$suggUnderlay.css("opacity",1)):this.$suggUnderlay.css("opacity",0)},this))},doIndexOf:function e(){Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var i=this.length>>>0;for(t=+t||0,Math.abs(t)===1/0&&(t=0),t<0&&(t+=i)<0&&(t=0);t<i;t++)if(this[t]===e)return t;return-1}},tabSuggs:function e(t,i){var s=this.$suggsListEl.find(".sumome-eac-bubble:visible"),o=i||this.$suggsListEl.find(".sumome-eac-bubble.active"),n=-1;if(0===o.length)t>0?(s.first().addClass("active"),o=s.first()):(s.last().addClass("active"),o=s.last());else{n=o.index();var a=n+t;s.removeClass("active"),o=null,a>=0&&a<s.length&&(o=s.eq(a),o.addClass("active"))}var r=o?o.text():"";this.setUnderlaySuggestion(r)},setUnderlaySuggestion:function e(t){this.val=this.$field.val();var i=!1,s=t&&-1==t.indexOf("@")?this.val.split("@")[0]+"@"+t:t;s&&-1===s.indexOf(this.val)&&(i=!0);var o=t;if(o&&o.indexOf(this.val)>-1)this.suggestion=o.replace(this.val,"");else if(o){var n=this.val.split("@")[1];this.suggestion=o.replace(n,"")}else this.suggestion="";this.$suggOverlay.text(i?"":this.suggestion),this.$suggUnderlay.val(i?"":s)},addSuggBubble:function t(i){var s=e("<span class='sumome-eac-bubble' />");if(s.text(i),s.on("mousedown touchend",e.proxy(function(t){if(!t.altKey){var i=e(t.currentTarget).text();this.$field.val(i),this.$field.trigger("change"),this.clear(),this.hideSuggsDropDown(!0)}},this)),i!=this.$field.val()){0===this.$suggsListEl.find(".sumome-eac-bubble:visible").length&&this.suggestion.length>0&&this.suggestion.length>0&&"hidden"===this.$spellErrorDomEl.css("visibility")&&s.addClass("active"),s.appendTo(this.$suggsListEl),s.position().top>125&&s.remove()}},domainSpellCheck:function e(i,s){t&&this.hasPotential(i)?t.run({email:i,domains:this._domains,suggested:function e(t){s("full"in t?[t.full]:[])},empty:function e(){s([])}}):s([])},hasPotential:function e(t){t||(t="");var i=!1;return t.indexOf("@")>0&&2===t.split("@").length&&t.split("@")[1].indexOf(".")>0&&t.indexOf(".")!==t.length-1&&(i=!0),i},updateFieldLeftOffset:function e(){var t=parseInt(this.$field.css("borderLeftWidth"),10),i=parseInt(this.$field.css("paddingLeft"),10);this.fieldLeftOffset=t+i},updateFontSizeMatchin:function e(){var t=this.$field.css("fontSize");this.$cval.css("fontSize",t),this.$suggUnderlay.css("fontSize",t),this.$suggOverlay.css("fontSize",t),this.$spellErrorEl.css("fontSize",t)},removeStyle:function e(t,i){var s=new RegExp(i+"[^;]+;?","g");return t.attr("style",function(e,t){t&&t.replace(s,"")})},setDropDownDirection:function t(){e(window).height()-(this.$field.offset().top-e(window).scrollTop()+this.$field.outerHeight())<=this.$suggsListEl.outerHeight()?this.$suggsListEl.css({top:"initial",bottom:"100%"}):this.$suggsListEl.css({top:"100%",bottom:"initial"})},showSuggsDropDown:function e(){window.clearInterval(this.hideDropTimer),this.setDropDownDirection(),this.$suggsListEl.css("visibility","")},hideSuggsDropDown:function t(i){window.clearInterval(this.hideDropTimer),this.hideDropTimer=setTimeout(e.proxy(function(){this.$suggsListEl.css("visibility","hidden")},this),i?0:250)},isBgColorDark:function e(t){var i=!0,s=null,o=null;if(-1!==t.indexOf("rgb(")||-1!==t.indexOf("rgba(")){t=t.replace("rgb(","").replace("rgba(","").replace(")",""),s=t.split(","),s.forEach(function(e,t,i){i[t]=parseFloat(e)}),o={r:s[0],g:s[1],b:s[2],a:s[3]};i=!((o.r+o.g+o.b)/765<.5),0===o.a&&void 0!==o.a&&(i=!0)}return i},getDefaultStyle:function e(t,i){var s=t.parentNode,o=getComputedStyle(t),n;return s.style.display="none",n=o.getPropertyValue(i),s.style.removeProperty("display"),n}},e.fn[s]=function(t){return this.each(function(){e.data(this,"yz_"+s)||e.data(this,"yz_"+s,new i(this,t))})}}),sumo.define("es6!services/scrollbox/index",["jquery","lib/sumome/sumolist/formsync","JSON","postscribe","pixel-helpers","jquery.cookie","countries","plugins/text!scrollbox/templates/email_popup.html","scrollbox/fields","sumocountdown","twitter-widgets","jquery.style","jquery.displayrules","jquery.iframe-tracker","jquery.email-autocomplete"],function(e,t,i,s,o,n,a,r,l,c,u){var m="13359558-e447-43f3-a3cd-aa61c0b91c02",h=function t(i,s,o){var n=s.settings;if(o=o||0,"post"===n.subscribe_redirect_method){var a=e("<form />").attr("method","post").attr("action",n.subscribe_redirect_url);if(n.subscribe_redirect_variable){var r=e("<input />").attr("type","text").attr("name",n.subscribe_redirect_variable).val(i);a.append(r)}e(document.body).append(a),setTimeout(function(){a.trigger("submit")},o)}else if("get"===n.subscribe_redirect_method){var l=n.subscribe_redirect_url;if(n.subscribe_redirect_variable&&i){var c={};l.indexOf("?")>0?l+="&":l+="?",c[n.subscribe_redirect_variable]=i,l+=e.param(c)}setTimeout(function(){window.location=l,s.continueContent(i)},o)}else setTimeout(function(){window.location=n.subscribe_redirect_url,s.continueContent(i)},o)},d=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return{hasShown:!1,settings:{},cookieName:"__smScrollBoxShown",subCookieName:"__smSubscribed",ctaCookieName:"__smClicked",optOutCookieName:"__smScrollBoxOptOut",$scrollbox:null,transparentPng_id:"0000000000000000000000000000000000000000000000000000000000000000",transparentPng:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",iosKeyboardOpen:!1,lastScrollPos:null,getSumoBadge:function e(t,i){var s="";switch(i){case"top":s="bottom: -40px";break;case"bottom":s="top: -40px";break;default:s="bottom: -40px"}
return'<div><a class="powered-by-sumo" style="'+s+'" href="'+t+'" target="_blank"><p>POWERED BY</p><div class="sumo-logo"><?xml version="1.0" encoding="utf-8 "?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 515.7 93.8" style="enable-background:new 0 0 515.7 93.8;" xml:space="preserve"><style type="text/css">.st0{fill:#0F74B5;}.st1{opacity:0.2;fill:#041D2D;}.st2{fill:#000000;}</style><g><g><g><g><path class="st0" d="M19.1,89.7h124.2l18.7-70c0.7-2.5-2.2-4.5-4.3-2.9l-39.5,29.6L83.3,1c-1.1-1.4-3.3-1.3-4.3,0.1L45,46.5L4.4,16.7c-2.1-1.5-5,0.4-4.3,2.9L19.1,89.7z"/></g></g><path class="st1" d="M161.4,21.7c-12.9,46.4-62.6,68-142.4,68l0,0h70h54.2L161.4,21.7L161.4,21.7z"/></g><g><path class="st2" d="M199.1,27.2c0-5.9,4.8-10.6,13.4-10.6c9.5,0,13.9,5.9,16.1,10.1l12.7-5.1C238.9,15.6,231,4,212.7,4c-17.8,0-28.9,9.9-28.9,23.4c0,27.8,43.4,23.7,43.4,42c0,7.3-5.8,11.6-14.5,11.6s-14-4.1-17.1-8.9c-0.8-1.5-1.3-3-1.7-4.5c-0.4-1.8-0.6-3.6-0.6-5.3l-14,0.1c0,6,0.7,9.5,1.5,11.9l0,0c0,0.1,0,0.1,0.1,0.2c0.2,0.6,0.5,1.1,0.7,1.6c0.6,1.4,1.4,2.8,2.4,4.3c0.1,0.2,0.2,0.3,0.3,0.5c1.3,1.9,3,3.8,5.1,5.5l0.1,0.1l0,0c5,4.1,12.2,7.4,22.4,7.4c19,0,30.7-10.9,30.7-25.3C242.8,41.2,199.1,44.2,199.1,27.2z"/><polygon class="st2" points="333.5,4 333.5,92.1 347.2,92.1 345.9,40.9 376.9,79 408,40.9 406.6,92.1 420.4,92.1 420.4,4 376.9,59.1"/><path class="st2" d="M473,4c-24.8,0-42.8,19.5-42.8,44.9c0,25.6,17.9,44.9,42.7,44.9c24.9,0,42.8-19.4,42.8-44.9C515.7,23.6,497.8,4,473,4zM473,80.8c-16.7,0-29.1-13.5-29.1-32c0-18.3,12.3-32,29.1-32c16.6,0,29.1,13.7,29.1,32C502.1,67.4,489.6,80.8,473,80.8z"/><path class="st2" d="M251.4,60.9V7h14.3v53.8c0,12.5,7.2,19.9,20.6,19.9c13.3,0,20.6-7.5,20.6-20.1V7h14.2v53.8c0,19.3-12.9,33-34.8,33C263.8,93.8,251.4,80.6,251.4,60.9z"/></g></g></svg></div><div class="clear"></div></a></div>'},load:function t(i){if(i&&"success"in i&&i.success){var s=!0;if(this.settings.reflink="https://sumo.com/?src=sm-sb-"+this.api.properties.siteId+"&utm_source=sumo-powered-by&utm_medium=scroll-box&utm_campaign="+this.api.properties.siteId,this.settings.ctry=!(!this.api.properties.geoLocation||!this.api.properties.geoLocation.ctry)&&this.api.properties.geoLocation.ctry,this.settings.views=this.api.properties.views?this.api.properties.views:1,i.possiblePopups&&!0!==i.possiblePopups&&i.possiblePopups.length){var o=[];if(i.possiblePopups.forEach(e.proxy(function(t){t.displayRules&&!e.isCurrentUrlAllowed(t.displayRules,null,this.settings.ctry,this.settings.views)||o.push(t)},this)),i.displayRules&&!e.isCurrentUrlAllowed(i.displayRules,null,this.settings.ctry,this.settings.views)||o.push(i),o&&o.length){var n=function e(t,i){return Math.floor(Math.random()*(i-t)+t)},a=n(0,o.length);e.extend(i,o[a])}else s=!1}else i.possiblePopups&&i.displayRules&&!e.isCurrentUrlAllowed(i.displayRules,null,this.settings.ctry,this.settings.views)&&(s=!1);e.extend(this.settings,i);var r=!1;this.settings.ignore_cookie?r=e.cookie(this.cookieName)&&"true"===e.cookie(this.cookieName):"always"==this.settings.cookie_lifetime_interval?"email"==this.settings.box_mode?r=e.cookie(this.subCookieName)&&"true"===e.cookie(this.subCookieName):"cta"==this.settings.box_mode&&(r=e.cookie(this.ctaCookieName)&&"true"===e.cookie(this.ctaCookieName)):r="email"==this.settings.box_mode?e.cookie(this.subCookieName)&&"true"===e.cookie(this.subCookieName)||e.cookie(this.cookieName)&&"true"===e.cookie(this.cookieName):"cta"==this.settings.box_mode?e.cookie(this.ctaCookieName)&&"true"===e.cookie(this.ctaCookieName)||e.cookie(this.cookieName)&&"true"===e.cookie(this.cookieName):e.cookie(this.cookieName)&&"true"===e.cookie(this.cookieName),this.settings.optout_cookie&&e.cookie(this.optOutCookieName)&&"true"===e.cookie(this.optOutCookieName)&&(r=!0),s&&!r&&this.install()}},install:function t(){e(window).bind("scroll.scrollbox",e.proxy(function(t){var i=e(window).height(),s=e(document).height(),o=e(window).scrollTop(),n=s-i,a=o/n;a=Math.max(0,a),a=Math.min(1,a),a>=Math.min(100,Math.max(0,this.settings.trigger_percent/100))&&this.show()},this)),e(window).bind("resize.scrollbox",e.proxy(function(e){this.resize()},this))},resize:function e(){if(this.$scrollbox){var t=this.$scrollbox.find(".sumome-scrollbox-content").eq(0);if(t){var i="small",s=t.innerWidth();i=s>=1440?"xxlarge":s>=1080?"xlarge":s>=768?"large":s>=480?"medium":"small";var o="sumome-scrollbox-res-"+i;t.hasClass(o)||t.removeClass("sumome-scrollbox-res-small sumome-scrollbox-res-medium sumome-scrollbox-res-large sumome-scrollbox-res-xlarge sumome-scrollbox-res-xxlarge").addClass(o)}}},shadeColor:function e(t,i){t=t.toString();var s=parseInt(t.slice(1),16),o=Math.round(2.55*i),n=(s>>16)+o,a=(s>>8&255)+o,r=(255&s)+o;return"#"+(16777216+65536*(n<255?n<1?0:n:255)+256*(a<255?a<1?0:a:255)+(r<255?r<1?0:r:255)).toString(16).slice(1)},show:function t(n,c,u){var h=this,p=this;if(this.api||(this.api=u),(!(this.hasShown||this.settings.yield&&this.api.properties.yield)||c)&&(this.$scrollbox&&this.close(!0),"show_position"in(n=n||this.settings))){if(!c){var f=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(!e.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views))return}if(!c){if(this.hasShown=!0,-1!==n.cookie_lifetime){var g=new Date;switch(n.cookie_lifetime_interval){case"minute":g.setMinutes(g.getMinutes()+this.settings.cookie_lifetime);break;case"hour":g.setHours(g.getHours()+this.settings.cookie_lifetime);break;case"day":g.setDate(g.getDate()+this.settings.cookie_lifetime);break;case"month":g.setMonth(g.getMonth()+this.settings.cookie_lifetime);break;case"year":g.setFullYear(g.getFullYear()+this.settings.cookie_lifetime);break;case"always":g.setMinutes(g.getMinutes())}e.cookie(this.cookieName,"always"!==n.cookie_lifetime,{expires:g,path:"/"})}n.advanced_form?(this.api.emit("event",{appId:m,event:"popup-advanced"}),this.api.emit("event",{appId:m+"."+this.settings.id,event:"popup-advanced"}),this.api.emit("event",{appId:m+"."+this.settings.campaign_id,event:"popup-advanced"}),this.api.emit("event",{appId:m+"."+this.settings.id+"."+this.settings.campaign_id,event:"popup-advanced"})):(this.api.emit("event",{appId:m,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode}),this.api.emit("event",{appId:m+"."+this.settings.id,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode}),this.api.emit("event",{appId:m+"."+this.settings.campaign_id,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode}),this.api.emit("event",{appId:m+"."+this.settings.id+"."+this.settings.campaign_id,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode})),this.api.emit("setProperties",{yield:!0})}var v=n.show_position.split("-"),b=v[0],y=v[1];if(this.$scrollbox=e("<div />").addClass("sumome-scrollbox-popup").addClass("sumome-scrollbox-"+b).addClass("sumome-scrollbox-"+y).addClass("sumome-scrollbox-"+n.content_width).addClass("sumome-res-medium").data("sumome-scrollbox-config",n),this.$scrollbox.hide(),this.$scrollbox.css({left:"-10000px",top:"-10000px"}),n.advanced_form)this.$scrollbox.style("background-color",n.modal_color,"important"),e("<div />").addClass("sumome-scrollbox-content").html(n.advanced_form).appendTo(this.$scrollbox).css({padding:"1em"}),e('<a href="javascript:void(0);" />').addClass("sumome-scrollbox-close").appendTo(this.$scrollbox);else{var w,_,x,k,S,C,T,n,E,$,I,L,A,O,P,B,D,U,R,N,z,j;!function(){var t=function e(t){return t.replace(/\W+/g,"_").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()};n.scrollBoxTemplate?h.$scrollbox.style("background-color","transparent","important"):(n.scrollBoxTemplate={slug:"default",html:r},h.$scrollbox.style("background-color",n.modal_color,"important")),w=n.scrollBoxTemplate.html.replace(/\/\/load.(dev.)?sumo(me)?.com\/client\//g,h.api.properties.baseUrl),_=w.match(/\{sm\:.*?\}/g),_&&(x=[],_.forEach(e.proxy(function(e){var i=e.replace(/([\{\}]|sm\:)/g,""),s=i.split("|");if(s.length>1){var o=s[1].split(":");w=w.replace(e,this.shadeColor(n[t(s[0])],parseInt(o[1])))}else if("backgroundImage"==i)w=n.media_id===this.transparentPng_id?w.replace(e,"background-image: url('"+this.transparentPng+"') !important;"):n.media_id?w.replace(e,"background-image: url('//media.sumo.com/"+n.media_id+"') !important;"):w.replace(e,"");else if("Font"==i.substr(-4)){var a=n[t(i)];if(a){var r=a.split(":"),l=r[0].split(","),c=l.shift(),u=r[1]?r[1]:400;l.unshift("'"+c+"'"),l.length&&(w=w.replace(new RegExp(e,"g"),"font-family: "+l.join(",")+" !important;"),x.push(c.replace(/ /g,"+")+":"+u))}else w=w.replace(e,"")}else w=w.replace(e,n[t(s[0])])},h)),x.length&&(x=e.unique(x),w='<link href="//fonts.googleapis.com/css?family='+x.join("|")+'" type="text/css" rel="stylesheet">'+w)),e("<div />").addClass("sumome-scrollbox-content sumome-scrollbox-template-"+n.scrollBoxTemplate.slug).html(w).appendTo(h.$scrollbox),h.$scrollbox.find(".sumome-scrollbox-modal-bg").style("background-color",n.modal_color,"important"),n.noSumoBranding||(k="https://sumo.com/?src=sm-sb-"+n.site_id+"&utm_source=sumo-powered-by&utm_medium=scroll-box&utm_campaign="+n.site_id,S=["56696fd2-9edf-473f-9aba-a952a5723fb7"],C=S[0],T="powered-by-click:"+m+":"+C,n=h.$scrollbox.data("sumome-scrollbox-config"),E=n.show_position.split("-")[0],$=e(h.getSumoBadge(k,E)),I=h.$scrollbox.find(".sumome-scrollbox-content"),setTimeout(e.proxy(function(){I.append($);var e=$.find("p"),t=I.outerWidth();e&&t<=395&&e.css("display","none")},h),1400),$.on("click",e.proxy(function(e){this.api.emit("event",{appId:"2d1fffc9-378f-4b61-ac79-2dc8a077b827",event:T})},h))),h.findAndStyleElements(n),h.$headingEl.html(n.heading_text),h.$textEl.html(n.blurb_text),h.setTimer(n),h.$buttonTextEl.text(n.button_text),h.$inputEl.attr("placeholder",n.placeholder_text),L=h.$scrollbox.find(".sumome-scrollbox-field-template"),0==L.length&&(L=null),h.$inputEl=h.$scrollbox.find(".sumome-scrollbox-input").filter(":last"),A={input:h.$scrollbox.find(".sumome-scrollbox-input").filter(":last"),checkbox:h.$scrollbox.find(".sumome-scrollbox-checkbox"),radio:h.$scrollbox.find(".sumome-scrollbox-radio"),radio_header:h.$scrollbox.find(".sumome-scrollbox-radio-header"),checkbox_header:h.$scrollbox.find(".sumome-scrollbox-checkbox-header"),select:h.$scrollbox.find(".sumome-scrollbox-select")},A.radio.length<1&&(A.radio=e('<label class="sumome-scrollbox-radio"><input type="radio" /> Click me</label>')),A.radio_header.length<1&&(A.radio_header=e('<label class="sumome-scrollbox-radio-header">Select one</label>')),A.checkbox_header.length<1&&(A.checkbox_header=e('<label class="sumome-scrollbox-checkbox-header">Select one</label>')),A.checkbox.length<1&&(A.checkbox=e('<label class="sumome-scrollbox-checkbox"><input type="checkbox" /> Click me</label>')),A.select.length<1&&(A.select=e('<select style="padding-top: 0 !important; padding-bottom: 0 !important;" class="sumome-scrollbox-select"><option value="" disabled selected>Select an option</option></select>')),"email"==n.box_mode&&(O=l,P=L||h.$inputEl,B=[],P.removeClass("sumome-scrollbox-field-template"),P.removeProp("id"),D=null,U=0,n.fields.forEach(e.proxy(function(t,s,o){var n=this.getVariableName(t.field_name,t.field_variable);switch(U++,t.field_type){case"select":case"country":if(R=A.select.clone(),"country"==t.field_type)a.forEach(function(t){R.append(e("<option />").val(t).text(t))});else try{var r=i.parse(t.field_data);e.isArray(r)&&r.forEach(function(t){t.hasOwnProperty("value")&&t.hasOwnProperty("name")&&R.append(e("<option />").prop("value",t.value).text(t.name))})}catch(e){}R.prop("name",n),R.data("sumome-field-name",t.field_name),R.data("sumome-field-type",t.field_type),R.find('option[value=""]').text(t.field_placeholder?t.field_placeholder:"Choose a "+t.field_name),t.required&&R.prop("required",!0),R.addClass("sumome-scrollbox-select-placeholder"),P.before(R),R.on("change",function(){e(this).val()?e(this).removeClass("sumome-scrollbox-select-placeholder"):e(this).addClass("sumome-scrollbox-select-placeholder")});break;case"checkbox":R=A.checkbox.clone(),R.find("input").prop("name",n),R.find("input").prop("value",t.field_data),R.find("input").data("sumome-field-name",t.field_name),R.find("input").data("sumome-field-type",t.field_type),R.contents().filter(function(){return 3===this.nodeType&&""!=e.trim(this.textContent)})[0].textContent=" "+(t.field_placeholder?t.field_placeholder:t.field_name),t.required&&R.find("input").prop("required",!0),P.before(R);break;case"radio":R=A.radio_header.clone(),R.text(t.field_placeholder?t.field_placeholder:"Choose a "+t.field_name),P.before(R);try{var r=i.parse(t.field_data);e.isArray(r)&&r.forEach(function(i){U++,R=A.radio.clone(),R.find("input").prop("name",n),R.find("input").prop("value",i.value),R.find("input").data("sumome-field-name",t.field_name),R.find("input").data("sumome-field-type",t.field_type),t.required&&R.find("input").prop("required",!0),R.contents().filter(function(){return 3===this.nodeType&&""!=e.trim(this.textContent)})[0].textContent=" "+i.name,P.before(R)})}catch(e){}break;case"checkbox_group":R=A.checkbox_header.clone(),R.text(t.field_placeholder?t.field_placeholder:"Choose a "+t.field_name),P.before(R);try{var r=i.parse(t.field_data);e.isArray(r)&&r.forEach(function(i){U++,R=A.checkbox.clone(),R.find("input").prop("name",n),R.find("input").prop("value",i.value),R.find("input").data("sumome-field-name",t.field_name),R.find("input").data("sumome-field-type",t.field_type),t.required&&R.find("input").prop("required",!0),R.contents().filter(function(){return 3===this.nodeType&&""!=e.trim(this.textContent)})[0].textContent=" "+i.name,P.before(R)})}catch(e){}break;case"hidden":return $hiddenEl=e('<input type="hidden" />'),P.before($hiddenEl),$hiddenEl.addClass("sumome-scrollbox-hidden"),$hiddenEl.prop("name",n),$hiddenEl.prop("value",t.field_data),$hiddenEl.data("sumome-field-name",t.field_name),$hiddenEl.data("sumome-field-type",t.field_type),void U--;default:R=P.clone(),P.before(R),R.prop("placeholder",t.field_placeholder?t.field_placeholder:"Enter your "+t.field_name),R.prop("name",n),R.data("sumome-field-name",t.field_name),R.data("sumome-field-type",t.field_type),t.required&&R.prop("required",!0),R.addClass("sumome-scrollbox-input").show()}D=t},h)),R&&D&&(R.addClass("sumome-scrollbox-last"),N=D.field_type,"country"==N?N="select":"checkbox_group"==N?N="checkbox":["radio","checkbox","select"].indexOf(N)<0&&(N="input"),h.$buttonEl.addClass("sumome-scrollbox-last-"+N)),U>1&&h.$buttonEl.addClass("sumome-scrollbox-multiple-fields")),L&&L.remove();for(z in A)A[z].remove();h.$inputEl.remove(),h.$inputEl=h.$scrollbox.find(".sumome-scrollbox-input, .sumome-scrollbox-hidden, .sumome-scrollbox-select, .sumome-scrollbox-checkbox input, .sumome-scrollbox-radio input"),n.disclaimer&&(h.$disclaimerLabelEl=e('<label class="sumome-scrollbox-checkbox"><input type="checkbox" /></label>'),h.$disclaimerLabelEl.addClass("sumome-scrollbox-disclaimer"),h.$disclaimerLabelEl.find("input").prop("name","DISCLAIMER"),h.$disclaimerLabelEl.append(" "+n.disclaimer_text),j=h.$scrollbox.find(".sumome-scrollbox-disclaimer-wrapper"),j.length>0?(j.css("display",""),e(j).append(h.$disclaimerLabelEl)):h.$buttonEl.before(h.$disclaimerLabelEl))}()}this.$scrollbox.find(".sumome-scrollbox-close").on("click",e.proxy(function(){this.setOptOutCookie(),this.close()},this)),this.$scrollbox.appendTo(e(document.body)),n.media_id===this.transparentPng_id?this.$scrollbox.find(".sumome-scrollbox-media").attr("src",this.transparentPng).show():n.media_id?this.$scrollbox.find(".sumome-scrollbox-media").attr("src","//media.sumo.com/"+n.media_id).show():this.$scrollbox.find(".sumome-scrollbox-media").each(function(){e(this).attr("src",e(this).data("preview-src")).show()}),this.resize(),this.findAndStyleElements(),c||n.advanced_form||("email"==n.box_mode?(this.$buttonEl.prop("disabled","disabled"),this.$inputEl.filter('[name="email"]').emailautocomplete({}),this.$inputEl.on("keyup change paste",e.proxy(function(t){var i=!1;this.$inputEl.filter("input[type=text], select").each(function(){var t=e(this).prop("required"),s=e.trim(e(this).val());if(t&&!s)return i=e(this),!1}),this.$inputEl.filter("[type=radio][required]").each(function(){var t=e(this).prop("name");if(!(e(this).closest(".sumome-scrollbox-form").find("[name="+t+"][type=radio][required]").filter(":checked").length>0))return i=e(this),!1}),i&&i.length?this.$buttonEl.prop("disabled","disabled"):this.$buttonEl.prop("disabled",!1)},this)),this.$inputEl.on("keydown",e.proxy(function(e){13===e.keyCode&&(this.$buttonEl.trigger("click"),e.preventDefault())},this)),d&&(this.$inputEl.on("focus",e.proxy(this.iosKeyboardOpenedEvent,this)),this.$inputEl.on("blur",e.proxy(this.iosKeyboardClosedEvent,this)),e(window).bind("scroll",e.proxy(this.iosKeyboardScrollEvent,this))),this.$buttonEl.on("click",e.proxy(function(){if(!this.$buttonEl.is(":disabled")){var t=/\S+@\S+\.\S/,i=!1,s=this.$inputEl.filter('[name="email"]').val().trim(),o={},n=this.$scrollbox.find(".sumome-scrollbox-input, .sumome-scrollbox-hidden, .sumome-scrollbox-select, .sumome-scrollbox-checkbox input, .sumome-scrollbox-radio input");if(n.each(e.proxy(function(t,s){var a=e(s).prop("name"),r=e(s).data("sumome-field-name"),l=e(s).data("sumome-field-type"),c=e(s).prop("required"),u=e.trim(e(s).val());if(a&&r)if(e(s).is("[type=radio]")||e(s).is("[type=checkbox]")){if(e(s).is(":checked"))o[a]={name:r,type:l,value:u};else if(e(s).attr("required")){var m=n.filter('[name="'+a+'"]:checked');m&&m.length||(i=e(s))}}else if(o[a]={name:r,type:l,value:u},c&&!u)return i=e(s),!1},this)),n.filter("[type=radio][required]").each(function(){var t=e(this).prop("name");if(!o.hasOwnProperty(t))return i=e(this),!1}),!i&&this.$disclaimerLabelEl){var a=this.$disclaimerLabelEl.find("input[type=checkbox]").eq(0);a&&!a.prop("checked")&&(i=this.$disclaimerLabelEl)}i?i.focus():(d&&this.iosKeyboardOpen&&this.iosKeyboardClosedEvent(),this.logEmail(o))}},this))):"cta"==n.box_mode?p.$buttonEl.on("click",function(){function t(){if(!n.cta_url)return void p.close();"new"===n.cta_target?(window.open(n.cta_url,"_blank"),p.close()):setTimeout(function(){window.location=n.cta_url},1e3)}p.api.emit("event",{appId:m,event:"click"}),p.api.emit("event",{appId:m+"."+n.id,event:"click"}),p.api.emit("event",{appId:m+"."+n.campaign_id,event:"click"}),p.api.emit("event",{appId:m+"."+n.id+"."+n.campaign_id,event:"click"});var i=new Date;if(i.setFullYear(i.getFullYear()+10),e.cookie(p.ctaCookieName,!0,{expires:i,path:"/"}),n.hasTrackingPixels&&n.pixels_conversion){var a=e('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>'),r=o.injectVars(n.pixels_conversion,{"subscriber-email":""});e("body").append(a),s.postscribe(a.get(0),r,{done:t})}else t()}):"facebook-like"===n.box_mode?(p.$socialEl=p.$scrollbox.find(".sumome-scrollbox-social"),p.$socialEl.iframeTracker({blurCallback:function e(){p.$socialEl.data("sumome-disabled")||(p.$socialEl.data("sumome-disabled",!0),p.api.emit("event",{appId:m,event:"click"}),p.api.emit("event",{appId:m+"."+n.id,event:"click"}),p.api.emit("event",{appId:m+"."+n.campaign_id,event:"click"}),p.api.emit("event",{appId:m+"."+n.id+"."+n.campaign_id,event:"click"}))}})):"pinterest-follow"===n.box_mode&&p.$scrollbox.on("click.pinterest",'span[data-pin-log="button_follow"]',function(){var t=e(this);t.data("sumome-disabled")||(t.data("sumome-disabled",!0),p.api.emit("event",{appId:m,event:"click"}),p.api.emit("event",{appId:m+"."+n.id,event:"click"}),p.api.emit("event",{appId:m+"."+n.campaign_id,event:"click"}),p.api.emit("event",{appId:m+"."+n.id+"."+n.campaign_id,event:"click"}))}));var F=this.$scrollbox.outerHeight(),f=this.$scrollbox.outerWidth(),M={},H={};switch(b){case"top":M.top="in"==n.slide_direction?"0px":"-"+F+"px",H.top="0px";break;case"bottom":M.bottom="in"==n.slide_direction?"0px":"-"+F+"px",H.bottom="0px"}switch(y){case"left":M.left="up"==n.slide_direction?"0px":"-"+f+"px",H.left="0px";break;case"right":M.right="up"==n.slide_direction?"0px":"-"+f+"px",H.right="0px"}if(this.$scrollbox.css({top:"",left:""}),this.$scrollbox.css(M),this.$scrollbox.show(),this.$scrollbox.animate(H),this.resize(),this.$inputEl&&this.$inputEl.eq(0).focus(),n.hasTrackingPixels&&n.pixels_shown){var q=e('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>');e("body").append(q),s.postscribe(q.get(0),n.pixels_shown)}}},logEmail:function n(a){"string"==typeof a&&(a={email:a});var r="string"==typeof a.email?a.email:a.email.value,l=null;this.settings.form_sync&&(l=new t(this.settings.form_sync,this.settings.fields),l.install(a)),this.$buttonEl.prop("disabled","disabled"),e.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/list/subscribe",data:{site_id:this.api.properties.siteId,visitor_id:this.api.properties.visitorId,app_id:m,popup_id:this.settings.id,object_id:this.settings.id+","+this.settings.campaign_id,sumolist_id:this.settings.campaign_id,href:window.location.href,ref:document.referrer||null,fields:i.stringify(a)},xhrFields:{withCredentials:!1},crossDomain:!0}).done(e.proxy(function(t){if(t&&"success"in t&&t.success){this.api.emit("event",{appId:m,event:"subscribe"}),this.api.emit("event",{appId:m+"."+this.settings.id,event:"subscribe"}),this.api.emit("event",{appId:m+"."+this.settings.campaign_id,event:"subscribe"}),this.api.emit("event",{appId:m+"."+this.settings.id+"."+this.settings.campaign_id,event:"subscribe"});var i=new Date;i.setFullYear(i.getFullYear()+10),e.cookie(this.subCookieName,!0,{expires:i,path:"/"});var n=e.proxy(function(){l&&l.submit(),this.settings.subscribe_redirect_url&&this.settings.skip_success_popup?h(r,this,1e3):this.continueContent(r)},this);if(this.settings.hasTrackingPixels&&this.settings.pixels_conversion){var a=e('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>'),c=o.injectVars(this.settings.pixels_conversion,{"subscriber-email":r});e("body").append(a),s.postscribe(a.get(0),c,{done:n})}else n()}else t&&"error"in t?(this.$errorEl.text(t.error).show(),setTimeout(e.proxy(function(){this.$buttonEl.prop("disabled",!1)},this),1e3)):this.close()},this))},continueContent:function t(i){this.continueMode=!0,this.$scrollbox.find(".sumome-scrollbox-select, .sumome-scrollbox-input, .sumome-scrollbox-radio, .sumome-scrollbox-checkbox, .sumome-scrollbox-radio-header, .sumome-scrollbox-checkbox-header").remove(),this.$buttonEl.remove(),this.$continueButtonTextEl.text(this.settings.continue_button_text),this.$continueButtonEl.show(),this.findAndStyleElements(),this.$headingEl.text(this.settings.continue_heading_text),this.$textEl.html(this.settings.continue_blurb_text),this.$continueButtonEl.on("click",e.proxy(function(){this.settings.subscribe_redirect_url&&!this.settings.skip_success_popup?h(i,this,0):this.close()},this)),setTimeout(e.proxy(function(){this.settings.subscribe_redirect_url&&!this.settings.skip_success_popup?h(i,this,0):this.$continueButtonEl.trigger("click")},this),1e4)},getVariableName:function e(t,i){return i||(i=t.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")),i},findAndStyleElements:function t(i){var i=i||this.settings;if(!e.isEmptyObject(i)){this.$headingEl=this.$scrollbox.find(".sumome-scrollbox-heading"),this.$headingEl.style("color",i.heading_color,"important"),this.$textEl=this.$scrollbox.find(".sumome-scrollbox-text"),this.$textEl.style("color",i.text_color,"important"),this.$inputEl=this.$scrollbox.find(".sumome-scrollbox-input"),this.$selectEl=this.$scrollbox.find(".sumome-scrollbox-select"),this.$buttonEl=this.$scrollbox.find(".sumome-scrollbox-button"),this.$buttonBgEl=this.$scrollbox.find(".sumome-scrollbox-button-bg"),this.$buttonTextEl=this.$scrollbox.find(".sumome-scrollbox-button-text"),this.$continueButtonEl=this.$scrollbox.find(".sumome-scrollbox-continue"),this.$continueButtonBgEl=this.$scrollbox.find(".sumome-scrollbox-continue-bg"),this.$continueButtonTextEl=this.$scrollbox.find(".sumome-scrollbox-continue-text"),this.$linkEl=this.$scrollbox.find(".sumome-scrollbox-link"),this.$linkEl.style("color",i.text_color,"important"),this.$errorEl=this.$scrollbox.find(".sumome-scrollbox-form div.sumome-scrollbox-error").hide(),this.$buttonBgEl.style("background-color",i.button_back_color,"important"),this.$buttonBgEl.style("border-bottom-color",this.shadeColor(i.button_back_color,-10),"important"),this.$buttonTextEl.style("color",i.button_fore_color,"important"),this.$continueButtonBgEl.style("background-color",i.button_back_color,"important"),this.$continueButtonBgEl.style("border-bottom-color",this.shadeColor(i.button_back_color,-10),"important"),this.$continueButtonTextEl.style("color",i.button_fore_color,"important"),this.$scrollbox.find(".sumome-scrollbox-close").style("color",i.text_color,"important"),this.$selectEl.each(function(t,i){e(i).css("line-height",e(i).css("height"))});var s=e('<div class="sumome-scrollbox-social-wrapper"></div>');if(this.$scrollbox.find(".sumome-scrollbox-social-wrapper").remove(),"twitter-follow"===i.box_mode)this.$buttonEl.hide(),this.$buttonEl.parent().append(s),u.followButton(i.twitter_username?i.twitter_username:"SumoMe",s[0],e.proxy(function(t){this.$socialEl=e(t),this.$socialEl.iframeTracker({blurCallback:e.proxy(function e(){this.$socialEl.data("sumome-disabled")||(this.$socialEl.data("sumome-disabled",!0),this.api.emit("event",{appId:m,event:"click"}),this.api.emit("event",{appId:m+"."+i.id,event:"click"}),this.api.emit("event",{appId:m+"."+i.campaign_id,event:"click"}),this.api.emit("event",{appId:m+"."+i.id+"."+i.campaign_id,event:"click"}))},this)})},this));else if("facebook-like"===i.box_mode)s.append('<iframe class="sumome-scrollbox-social" src="//www.facebook.com/plugins/like.php?href='+encodeURIComponent(i.facebook_like_url?i.facebook_like_url:"https://www.facebook.com/sumo")+'&width=300&layout=button_count&action=like&show_faces=false&share=false&height=20&appId=859406404089021" sumome-facebook-social" scrolling="no" frameborder="0" width="80" height="20" style="border:none;overflow:hidden;" allowTransparency="true"></iframe>'),this.$buttonEl.hide().after(s);else if("pinterest-follow"===i.box_mode){s.append('<a style="visibility: hidden;" class="sumome-scrollbox-pinterest-follow-button sumome-scrollbox-social" data-pin-do="buttonFollow" href="https://www.pinterest.com/'+(i.pinterest_username?i.pinterest_username:"Pinterest")+'">'+(i.pinterest_username?i.pinterest_username:"Pinterest")+"</a>"),this.$buttonEl.hide().after(s);var o={load:function t(i){this.get()?i():e.getScript("//assets.pinterest.com/js/pinit.js",i)},get:function e(){for(var t in window)if(0==t.indexOf("PIN_")&&"object"==typeof window[t])return window[t]},isLoaded:function e(){return!!this.get()},render:function e(t){this.isLoaded()&&this.get().f.seek.buttonFollow(t)}};o.load(function(){o.render(s.find(".sumome-scrollbox-pinterest-follow-button")[0])})}this.$templateTimerWrapEl=this.$scrollbox.find(".sumome-scrollbox-countdown-wrapper"),this.$templateTimerWrapEl[0]||(this.$templateTimerWrapEl=null)}},close:function t(i){var s=this.$scrollbox.data("sumome-scrollbox-config"),o=s.show_position.split("-"),n=o[0],a=o[1],r=this.$scrollbox.outerHeight(),l=this.$scrollbox.outerWidth(),c={},u=document.querySelector(".powered-by-sumo");if(u&&(r+=parseFloat(window.getComputedStyle(u).height.match(/\d+/))+10),i)this.$scrollbox.remove(),this.$scrollbox=null,"closeCallback"in s&&s.closeCallback.call(this);else{switch(n){case"top":c.top="in"==s.slide_direction?"0px":"-"+r+"px";break;case"bottom":c.bottom="in"==s.slide_direction?"0px":"-"+r+"px"}switch(a){case"left":c.left="up"==s.slide_direction?"0px":"-"+l+"px";break;case"right":c.right="up"==s.slide_direction?"0px":"-"+l+"px"}this.$scrollbox.off("click.pinterest"),this.$scrollbox.animate(c,e.proxy(function(){this.$scrollbox.remove(),this.$scrollbox=null,"closeCallback"in s&&s.closeCallback.call(this)},this))}},setTimer:function e(t){if(this.$templateTimerWrapEl&&this.$templateTimerWrapEl.css("display","none").html(""),t.hasCountdown&&t.countdown_end){var i=this.$textEl;"heading_text"==t.countdown_pos?(this.$headingEl.show(),i=this.$headingEl):"blurb_text"==t.countdown_pos?i=this.$textEl:"template_default"==t.countdown_pos&&this.$templateTimerWrapEl?(i=this.$templateTimerWrapEl,i.css("display","")):i=this.$textEl,c.create(i,t.countdown_end,t.countdown_format,this.$timerEl)}},setOptOutCookie:function t(){var i=new Date;i.setFullYear(i.getFullYear()+10),e.cookie(this.optOutCookieName,!0,{expires:i,path:"/"})},iosKeyboardOpenedEvent:function e(){var t=this.settings.show_position.split("-"),i=t[0];this.iosKeyboardOpen=!0,this.lastScrollPos=document.body.scrollTop;var s="bottom"==i?document.body.scrollHeight:0;document.body.scrollTop=s,setTimeout(function(){document.body.scrollTop=s},500)},iosKeyboardClosedEvent:function e(){var t=this.settings.show_position.split("-"),i=t[0];this.iosKeyboardOpen=!1,this.lastScrollPos&&(document.body.scrollTop=this.lastScrollPos,this.lastScrollPos=null),"bottom"==i?this.$scrollbox.css({position:"",top:"",bottom:"0px"}):this.$scrollbox.css({position:"",top:"0px",bottom:""})},iosKeyboardScrollEvent:function e(t){if(this.iosKeyboardOpen){var i=this.$scrollbox.offset().top,s=this.$inputEl.offset().top-i,o=document.body.scrollTop,n=o-s,a=o;i<n?(o-=s,o<0&&(o=0),this.$scrollbox.css({position:"absolute",top:o,bottom:""})):i>a&&(o<0&&(o=0),this.$scrollbox.css({position:"absolute",top:o,bottom:""})),1!=this.$inputEl.is(":focus")&&this.iosKeyboardClosedEvent()}}}}),sumo.define("services/services",["es6!launcher/util/constants","es6!services/highlighter/index","es6!services/contact-form/index","es6!services/content-analytics/index","googleanalytics/trackingcode","es6!services/heatmaps/index","es6!services/image-sharer/index","es6!services/share/index","es6!services/scrollbox/index"],function(e,t,i,s,o,n,a,r,l){return function(c){var u=c.properties.services||[];return{init:function m(h,d){if("admin"===c.properties.mode||"manage"===c.properties.mode)return d();var p=c.properties.serviceData;if(-1!==u.indexOf(e.CONTACT_FORM_APP_UUID)&&sumo.require(["plugins/css!../css/sme-contactform-popup.css"],function(){i.api=c,i.sumoProperties=c.properties,i.load(p.contactFormService)}),-1!==u.indexOf(e.CONTENT_ANALYTICS_APP_UUID)){new s(c).init({serviceData:p.contentAnalyticsStatus},function(){})}if(-1!==u.indexOf(e.IMAGE_SHARER_APP_UUID)&&sumo.require(["plugins/css!../css/sumome-image-sharer.css"],function(){a.api=c,a.sumoProperties=c.properties,a.init(p.imageSharerService)}),-1!==u.indexOf(e.SHARE_APP_UUID)&&sumo.require(["plugins/css!../css/sumome-share-client.css"],function(){r.api=c,r.initialize(p.shareService)}),-1!==u.indexOf(e.HIGHLIGHTER_APP_UUID)&&sumo.require(["plugins/css!../css/highlighter-popup.css"],function(){t.api=c,t.sumoProperties=c.properties,t.initialize(p.highlighterService)}),-1!==u.indexOf(e.GOOGLE_ANALYTICS_APP_ID)&&(o.api=c,o.sumoProperties=c.properties,o.initialize(p.googleAnalyticsService)),-1!==u.indexOf(e.HEAT_MAPS_APP_UUID)){new n(c).init({serviceData:p.heatMapsStatus},function(){})}-1!==u.indexOf(e.SCROLL_BOX_APP_UUID)&&sumo.require(["plugins/css!../css/sumome-scrollbox-popup.css"],function(){l.api=c,l.load(p.scrollBoxService)}),d()},destroy:function e(t){t()}}}}),sumo.define("services/services",function(){})}(void 0,void 0);